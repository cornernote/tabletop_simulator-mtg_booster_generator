{
  "SaveName": "Custom",
  "EpochTime": 1756560348,
  "Date": "8/30/2025 10:55:48 PM",
  "VersionNumber": "v13.3",
  "GameMode": "DND Measurement Injector",
  "GameType": "Utility",
  "GameComplexity": "Low Complexity",
  "PlayingTime": [
    0,
    0
  ],
  "PlayerCounts": [
    0,
    0
  ],
  "Tags": [
    "Components"
  ],
  "Gravity": 0.5,
  "PlayArea": 0.5,
  "Table": "Table_RPG",
  "Sky": "Sky_Tunnel",
  "Note": "",
  "TabStates": {
    "0": {
      "title": "Rules",
      "body": "",
      "color": "Grey",
      "visibleColor": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "id": 0
    },
    "1": {
      "title": "White",
      "body": "",
      "color": "White",
      "visibleColor": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "id": 1
    },
    "2": {
      "title": "Brown",
      "body": "",
      "color": "Brown",
      "visibleColor": {
        "r": 0.443,
        "g": 0.231,
        "b": 0.09
      },
      "id": 2
    },
    "3": {
      "title": "Red",
      "body": "",
      "color": "Red",
      "visibleColor": {
        "r": 0.856,
        "g": 0.1,
        "b": 0.094
      },
      "id": 3
    },
    "4": {
      "title": "Orange",
      "body": "",
      "color": "Orange",
      "visibleColor": {
        "r": 0.956,
        "g": 0.392,
        "b": 0.113
      },
      "id": 4
    },
    "5": {
      "title": "Yellow",
      "body": "",
      "color": "Yellow",
      "visibleColor": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.172
      },
      "id": 5
    },
    "6": {
      "title": "Green",
      "body": "",
      "color": "Green",
      "visibleColor": {
        "r": 0.192,
        "g": 0.701,
        "b": 0.168
      },
      "id": 6
    },
    "7": {
      "title": "Blue",
      "body": "",
      "color": "Blue",
      "visibleColor": {
        "r": 0.118,
        "g": 0.53,
        "b": 1.0
      },
      "id": 7
    },
    "8": {
      "title": "Teal",
      "body": "",
      "color": "Teal",
      "visibleColor": {
        "r": 0.129,
        "g": 0.694,
        "b": 0.607
      },
      "id": 8
    },
    "9": {
      "title": "Purple",
      "body": "",
      "color": "Purple",
      "visibleColor": {
        "r": 0.627,
        "g": 0.125,
        "b": 0.941
      },
      "id": 9
    },
    "10": {
      "title": "Pink",
      "body": "",
      "color": "Pink",
      "visibleColor": {
        "r": 0.96,
        "g": 0.439,
        "b": 0.807
      },
      "id": 10
    },
    "11": {
      "title": "Black",
      "body": "",
      "color": "Black",
      "visibleColor": {
        "r": 0.25,
        "g": 0.25,
        "b": 0.25
      },
      "id": 11
    }
  },
  "Grid": {
    "Type": 0,
    "Lines": false,
    "Color": {
      "r": 0.0,
      "g": 0.0,
      "b": 0.0
    },
    "Opacity": 0.75,
    "ThickLines": false,
    "Snapping": false,
    "Offset": true,
    "BothSnapping": false,
    "xSize": 1.55,
    "ySize": 1.55,
    "PosOffset": {
      "x": 0.0,
      "y": 1.0,
      "z": 0.0
    }
  },
  "Lighting": {
    "LightIntensity": 0.54,
    "LightColor": {
      "r": 1.0,
      "g": 0.9804,
      "b": 0.8902
    },
    "AmbientIntensity": 1.3,
    "AmbientType": 0,
    "AmbientSkyColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "AmbientEquatorColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "AmbientGroundColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "ReflectionIntensity": 1.0,
    "LutIndex": 0,
    "LutContribution": 1.0
  },
  "Hands": {
    "Enable": true,
    "DisableUnused": false,
    "Hiding": 0
  },
  "ComponentTags": {
    "labels": []
  },
  "Turns": {
    "Enable": false,
    "Type": 0,
    "TurnOrder": [],
    "Reverse": false,
    "SkipEmpty": false,
    "DisableInteractions": false,
    "PassTurns": true,
    "TurnColor": ""
  },
  "DecalPallet": [],
  "LuaScript": "--[[ Lua code. See documentation: https://api.tabletopsimulator.com/ --]]\n\n--[[ The onLoad event is called after the game save finishes loading. --]]\nfunction onLoad()\n    --[[ print('onLoad!') --]]\nend\n\n--[[ The onUpdate event is called once per frame. --]]\nfunction onUpdate()\n    --[[ print('onUpdate loop!') --]]\nend",
  "LuaScriptState": "",
  "XmlUI": "<!-- Xml UI. See documentation: https://api.tabletopsimulator.com/ui/introUI/ -->",
  "ObjectStates": [
    {
      "GUID": "c87ad1",
      "Name": "HandTrigger",
      "Transform": {
        "posX": -15.1107731,
        "posY": 4.81034231,
        "posZ": -20.1076221,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 11.7719851,
        "scaleY": 9.174497,
        "scaleZ": 4.871238
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09999997,
        "b": 0.09399996,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Red",
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "9d27dc",
      "Name": "HandTrigger",
      "Transform": {
        "posX": -30.2150211,
        "posY": 4.81034231,
        "posZ": 10.17524,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 11.6554289,
        "scaleY": 9.174497,
        "scaleZ": 4.91995144
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171999961,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Yellow",
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "7a641b",
      "Name": "HandTrigger",
      "Transform": {
        "posX": 30.2511711,
        "posY": 4.81034231,
        "posZ": 9.59069252,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 11.6554213,
        "scaleY": 9.174497,
        "scaleZ": 4.91995144
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 0.627,
        "g": 0.124999978,
        "b": 0.941,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Purple",
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "38e503",
      "Name": "HandTrigger",
      "Transform": {
        "posX": 15.4749184,
        "posY": 4.81034231,
        "posZ": 19.8365288,
        "rotX": 0.0,
        "rotY": 179.8,
        "rotZ": 0.0,
        "scaleX": 11.7719746,
        "scaleY": 9.174497,
        "scaleZ": 4.87124
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 0.117999978,
        "g": 0.53,
        "b": 1.0,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Blue",
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "e4fa7c",
      "Name": "HandTrigger",
      "Transform": {
        "posX": 15.1961212,
        "posY": 4.81034231,
        "posZ": -20.1400986,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 11.7719707,
        "scaleY": 9.174499,
        "scaleZ": 4.871238
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "White",
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "655788",
      "Name": "HandTrigger",
      "Transform": {
        "posX": -15.1927719,
        "posY": 4.81034231,
        "posZ": 19.787817,
        "rotX": 0.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 11.7719707,
        "scaleY": 9.174497,
        "scaleZ": 4.871238
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 0.191999972,
        "g": 0.701,
        "b": 0.167999953,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Green",
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "37fbad",
      "Name": "HandTrigger",
      "Transform": {
        "posX": 30.1035728,
        "posY": 4.81034231,
        "posZ": -8.449126,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 11.6554184,
        "scaleY": 9.174497,
        "scaleZ": 4.91995144
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 0.96,
        "g": 0.438999981,
        "b": 0.807,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Pink",
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "813026",
      "Name": "HandTrigger",
      "Transform": {
        "posX": -30.247818,
        "posY": 4.81034231,
        "posZ": -8.822588,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 11.6554317,
        "scaleY": 9.174497,
        "scaleZ": 4.91995144
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.39199996,
        "b": 0.112999953,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Orange",
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "2abf72",
      "Name": "3DText",
      "Transform": {
        "posX": 0.0154628754,
        "posY": 0.961133063,
        "posZ": 0.280485153,
        "rotX": 90.0,
        "rotY": 359.6668,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "== ANY MTG Booster Box ==\n\nSimply write \"SET: XYZ\" in the description.\n\nThe box will change to be an XYZ Booster Box!\n\nMake sure to use a real set code  :)",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 88
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "be3d64",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -13.1749992,
        "posY": 2.58781767,
        "posZ": 8.525,
        "rotX": -1.06722E-06,
        "rotY": 179.998016,
        "rotZ": -1.669373E-07,
        "scaleX": 8.048128,
        "scaleY": 3.25563526,
        "scaleZ": 5.16360474
      },
      "Nickname": "[FFDA00]ANY[ffffff] MTG Booster Box",
      "Description": "SET: TDM",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/1666858152071990826/9AD455F2CBAEC01B2CBCDDB8B6DC4CE48D14B545/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 0,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "--- Global Configuration ---\r\nlocal config = {\r\n    backURL = 'https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/',\r\n    apiBaseURL = 'http://api.scryfall.com/cards/random?q='\r\n}\r\n\r\n--- Script State ---\r\nlocal boosterCount = 0\r\nlocal boosterDataCache = {}\r\nlocal cardStackDescription = \"\"\r\nlocal lastDescription = \"\"\r\nlocal pollInterval = 0.15  -- seconds, limit scryfall API requests to <10/sec\r\nlocal timePassed = 0\r\n\r\n--- Function Hooks ---\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n\r\n    local setCode = getSetCode()\r\n\r\n    leave_object.setName(setCode .. \" Booster\")\r\n    boosterCount = boosterCount + 1\r\n    local currentBoosterID = boosterCount\r\n\r\n    local queryTable = getScryfallQueryTable()\r\n    fetchDeckData(queryTable, currentBoosterID)\r\n\r\n    leave_object.createButton(makeBoosterLabelParams(\"generating \" .. setCode))\r\n\r\n    Wait.condition(\r\n            function()\r\n                Wait.condition(\r\n                        function()\r\n                            local objectData = leave_object.getData()\r\n                            objectData.ContainedObjects = { boosterDataCache[currentBoosterID] }\r\n                            leave_object.destruct()\r\n                            local generatedBooster = spawnObjectData({ data = objectData })\r\n\r\n                            generatedBooster.createButton(makeBoosterLabelParams(setCode .. \" Booster\"))\r\n                        end,\r\n                        function()\r\n                            return leave_object.resting\r\n                        end\r\n                )\r\n            end,\r\n            function()\r\n                return boosterDataCache[currentBoosterID] ~= nil\r\n            end\r\n    )\r\nend\r\n\r\nfunction onLoad()\r\n    local setCode = getSetCode()\r\n\r\n    self.createButton({\r\n        click_function = \"null\",\r\n        function_owner = self,\r\n        label = setCode .. \" Boosters\",\r\n        position = { 0.025, -0.22, 0.355 },\r\n        rotation = { 270, 0, 0 },\r\n        color = { 0.1, 0.1, 0.1, 1 },\r\n        font_color = { 0.8, 0.8, 0.8, 0.8 },\r\n        scale = { 0.25, 0.25, 0.7 },\r\n        width = 0,\r\n        height = 0,\r\n        font_size = 220,\r\n    })\r\n\r\n    self.createButton({\r\n        click_function = \"null\",\r\n        function_owner = self,\r\n        label = setCode,\r\n        position = { 0.025, 0.5, -0.5 },\r\n        rotation = { 270, 0, 0 },\r\n        color = { 0.1, 0.1, 0.1, 1 },\r\n        font_color = { 0.8, 0.8, 0.8, 0.8 },\r\n        scale = { 0.25, 0.25, 0.7 },\r\n        width = 0,\r\n        height = 0,\r\n        font_size = 500,\r\n    })\r\n\r\n    if #setCode > 3 then\r\n        self.editButton({ index = 0, font_size = 160 })\r\n        self.editButton({ index = 1, font_size = 250 })\r\n    end\r\nend\r\n\r\nfunction onUpdate()\r\n    timePassed = timePassed + Time.delta_time\r\n    if timePassed >= pollInterval then\r\n        timePassed = 0\r\n        checkDescription()\r\n        processRequestQueue()\r\n    end\r\nend\r\n\r\nfunction checkDescription()\r\n    local description = self.getDescription()\r\n\r\n    if description ~= lastDescription then\r\n        local setCode = getSetCode()\r\n        lastDescription = description\r\n        self.editButton({ index = 0, label = setCode .. \" Boosters\" })\r\n        self.editButton({ index = 1, label = setCode })\r\n\r\n        if #setCode > 3 then\r\n            self.editButton({ index = 0, font_size = 160 })\r\n            self.editButton({ index = 1, font_size = 250 })\r\n        else\r\n            self.editButton({ index = 0, font_size = 220 })\r\n            self.editButton({ index = 1, font_size = 500 })\r\n        end\r\n    end\r\nend\r\n\r\n--- Booster Generation Logic ---\r\nfunction makeBoosterLabelParams(label)\r\n    return {\r\n        label = label,\r\n        click_function = 'null',\r\n        function_owner = self,\r\n        position = { 0, 0.2, -1.7 },\r\n        rotation = { 0, 0, 0 },\r\n        width = 0,\r\n        height = 0,\r\n        font_size = 100,\r\n        color = { 0, 0, 0, 0 },\r\n        font_color = { 0, 0, 0, 95 },\r\n    }\r\nend\r\n\r\nfunction getSetCode()\r\n    local setCode = \"mystery\"\r\n\r\n    -- Trim leading/trailing whitespace from the captured text\r\n    -- This makes sure \" SET: M15 \" becomes \"M15\"\r\n    local captured_text = self.getDescription():match(\"SET:%s*([^\\n]+)\")\r\n    if captured_text then\r\n        setCode = captured_text:match(\"^%s*(.-)%s*$\")\r\n    end\r\n\r\n    if #setCode > 3 then\r\n        setCode = string.lower(setCode):gsub(\"^%l\", string.upper)\r\n    else\r\n        setCode = string.upper(setCode)\r\n    end\r\n\r\n    return setCode\r\nend\r\n\r\nlocal BoosterPacks = {}\r\nlocal apiSetPrefix = config.apiBaseURL .. 'is:booster+s:'\r\n\r\nlocal function getRandomRarity(mythicChance, rareChance, uncommonChance)\r\n    if math.random(1, mythicChance or 36) == 1 then\r\n        return 'r:mythic'\r\n    elseif math.random(1, rareChance or 8) == 1 then\r\n        return 'r:rare'\r\n    elseif math.random(1, uncommonChance or 4) == 1 then\r\n        return 'r:uncommon'\r\n    else\r\n        return 'r:common'\r\n    end\r\nend\r\n\r\nlocal function addCardTypeToPack(pack, cardType)\r\n    local randomIndex = math.random(#pack - 1, #pack)\r\n    for i = 13, #pack do\r\n        if randomIndex == i then\r\n            pack[i] = pack[i] .. '+' .. cardType\r\n        else\r\n            pack[i] = pack[i] .. '+-(' .. cardType .. ')'\r\n        end\r\n    end\r\n    return pack\r\nend\r\n\r\nlocal MasterpieceSets = {\r\n    bfz = 'exp', ogw = 'exp', kld = 'mps', aer = 'mps',\r\n    akh = 'mp2', hou = 'mp2', stx = 'sta',\r\n    tsp = 'tsb', mb1 = 'fmb1', mh2 = 'h1r'\r\n}\r\n\r\nfunction BoosterPacks.default(set)\r\n    local pack = {}\r\n    local url = apiSetPrefix .. set .. '+'\r\n    url = url:gsub('%+s:%(', '+(')\r\n\r\n    for c in ('wubrg'):gmatch('.') do\r\n        table.insert(pack, url .. 'r:common+c>=' .. c)\r\n    end\r\n    for i = 1, 6 do\r\n        table.insert(pack, url .. 'r:common+-t:basic')\r\n    end\r\n    for i = 1, 3 do\r\n        table.insert(pack, url .. 'r:uncommon')\r\n    end\r\n\r\n    table.insert(pack, url .. getRandomRarity(8, 1))\r\n\r\n    if MasterpieceSets[set] and math.random(1, 144) == 1 then\r\n        pack[#pack] = config.apiBaseURL .. 's:' .. MasterpieceSets[set]\r\n    end\r\n\r\n    return pack\r\nend\r\n\r\nfunction BoosterPacks.dom(set)\r\n    return addCardTypeToPack(BoosterPacks.default(set), 't:legendary')\r\nend\r\nfunction BoosterPacks.war(set)\r\n    return addCardTypeToPack(BoosterPacks.default(set), 't:planeswalker')\r\nend\r\nfunction BoosterPacks.znr(set)\r\n    return addCardTypeToPack(BoosterPacks.default(set), 't:land+(is:spell+or+pathway)')\r\nend\r\n\r\n-- Changed function name to be a valid Lua identifier for clarity.\r\nfunction BoosterPacks.twoxm(set)\r\n    local pack = BoosterPacks.default(set)\r\n    pack[11] = pack[#pack]\r\n    for i = 9, 10 do\r\n        pack[i] = apiSetPrefix .. '2xm' .. '+' .. getRandomRarity()\r\n    end\r\n    return pack\r\nend\r\n\r\nlocal function createReplacementSlotPack(pack, set, removeQuery, addQuery)\r\n    for i, v in pairs(pack) do\r\n        if i ~= 6 then\r\n            pack[i] = v .. removeQuery\r\n        else\r\n            pack[i] = apiSetPrefix .. set .. '+' .. getRandomRarity() .. addQuery\r\n        end\r\n    end\r\n    return pack\r\nend\r\n\r\nfor _, s in ipairs({ 'isd', 'dka', 'soi', 'emn' }) do\r\n    BoosterPacks[s] = function(set)\r\n        return createReplacementSlotPack(BoosterPacks.default(set), set, '+-is:transform', '+is:transform')\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'mid' }) do\r\n    BoosterPacks[s] = function(set)\r\n        local pack = BoosterPacks.default(set)\r\n        local transformIndex = math.random(#pack - 1, #pack)\r\n        for i, v in pairs(pack) do\r\n            if i == 6 or i == transformIndex then\r\n                pack[i] = v .. '+is:transform'\r\n            else\r\n                pack[i] = v .. '+-is:transform'\r\n            end\r\n        end\r\n        return pack\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'cns', 'cn2' }) do\r\n    BoosterPacks[s] = function(set)\r\n        return createReplacementSlotPack(BoosterPacks.default(set), set, '+-wm:conspiracy', '+wm:conspiracy')\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'rav', 'gpt', 'dis', 'rtr', 'gtc', 'dgm', 'grn', 'rna' }) do\r\n    BoosterPacks[s] = function(set)\r\n        return createReplacementSlotPack(BoosterPacks.default(set), set, '+-t:land', '+t:land+-t:basic')\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'ice', 'all', 'csp', 'mh1', 'khm' }) do\r\n    BoosterPacks[s] = function(set)\r\n        local pack = BoosterPacks.default(set)\r\n        pack[6] = apiSetPrefix .. set .. '+t:basic+t:snow'\r\n        return pack\r\n    end\r\nend\r\n\r\nBoosterPacks.mystery = function()\r\n    local urlTable = {}\r\n    local urlPrefix = config.apiBaseURL .. 'set:mb1+'\r\n    for _, c in ipairs({ 'w', 'u', 'b', 'r', 'g' }) do\r\n        table.insert(urlTable, urlPrefix .. 'r<rare+c=' .. c)\r\n        table.insert(urlTable, urlPrefix .. 'r<rare+c=' .. c)\r\n    end\r\n    table.insert(urlTable, urlPrefix .. 'c:m+r<rare')\r\n    table.insert(urlTable, urlPrefix .. 'c:c+r<rare')\r\n    table.insert(urlTable, urlPrefix .. 'r>=rare+frame:2015')\r\n    table.insert(urlTable, urlPrefix .. 'r>=rare+-frame:2015')\r\n    table.insert(urlTable, config.apiBaseURL .. 'set:cmb1')\r\n    return urlTable\r\nend\r\n\r\nBoosterPacks.spm = function()\r\n    local urlTable = {}\r\n    local urlPrefix = config.apiBaseURL .. 's:spm+'\r\n\r\n    for i = 1, math.random(6, 9) do\r\n        table.insert(urlTable, urlPrefix .. 'r:common')\r\n    end\r\n    for i = 1, math.random(3, 5) do\r\n        table.insert(urlTable, urlPrefix .. 'r:uncommon')\r\n    end\r\n    table.insert(urlTable, urlPrefix .. 't:land')\r\n\r\n    local numRares = 1\r\n    local rareRoll = math.random(1, 200)\r\n    if rareRoll == 1 then\r\n        numRares = 4\r\n    elseif rareRoll <= 7 then\r\n        numRares = 3\r\n    elseif rareRoll <= 70 then\r\n        numRares = 2\r\n    end\r\n    for i = 1, numRares do\r\n        table.insert(urlTable, urlPrefix .. getRandomRarity(8, 1))\r\n    end\r\n\r\n    table.insert(urlTable, urlPrefix .. getRandomRarity(nil, nil, 4))\r\n    return urlTable\r\nend\r\n\r\nBoosterPacks.stx = function()\r\n    local pack = {}\r\n    local url = apiSetPrefix .. 'stx+'\r\n    local archiveURL = config.apiBaseURL .. 'set:sta+r>common+'\r\n    table.insert(pack, archiveURL .. (math.random(2) == 1 and 'lang:en' or 'lang:ja'))\r\n    table.insert(pack, url .. 't:lesson+-r:u')\r\n    table.insert(pack, url .. getRandomRarity(8, 1))\r\n    for i = 1, 3 do\r\n        table.insert(pack, url .. 'r:u')\r\n    end\r\n    for _, c in ipairs({ 'w', 'u', 'b', 'r', 'g' }) do\r\n        table.insert(pack, url .. 'r:c+c:' .. c)\r\n    end\r\n    for i = 1, 3 do\r\n        table.insert(pack, url .. 'r:c+-t:basic')\r\n    end\r\n\r\n    if math.random(3) == 1 then\r\n        table.insert(pack, url)\r\n    else\r\n        table.insert(pack, url .. 'r:c+-t:basic')\r\n    end\r\n    return pack\r\nend\r\n\r\nlocal function createCustomBooster(setQuery, packStructure)\r\n    return function()\r\n        local pack = BoosterPacks.default(setQuery)\r\n        return packStructure(pack)\r\n    end\r\nend\r\n\r\nBoosterPacks.standard = createCustomBooster('f:standard', function(pack)\r\n    local url = config.apiBaseURL .. 'f:standard+'\r\n    local artSets = '(set:tafr+or+set:tstx+or+set:tkhm+or+set:tznr+or+set:sznr+or+set:tm21+or+set:tiko+or+set:tthb+or+set:teld)'\r\n    local artQuery = '(border:borderless+or+frame:showcase+or+frame:extendedart+or+set:plist+or+set:sta)'\r\n    table.insert(pack, url .. 't:basic')\r\n    table.insert(pack, config.apiBaseURL .. artSets)\r\n    if math.random(2) == 1 then\r\n        pack[#pack - 1] = url .. artQuery\r\n    end\r\n    if math.random(2) == 1 then\r\n        pack[#pack] = url .. artQuery\r\n    end\r\n    return pack\r\nend)\r\n\r\nBoosterPacks.conspiracy = createCustomBooster('(s:cns+or+s:cn2)', function(pack)\r\n    table.insert(pack, pack[#pack]:gsub('r:%S+', getRandomRarity(9, 6, 3)))\r\n    pack[6] = pack[math.random(11, 12)]\r\n    for i, _ in pairs(pack) do\r\n        local query = (i == 6 or i == #pack) and '+wm:conspiracy' or '+-wm:conspiracy'\r\n        pack[i] = pack[i] .. query\r\n    end\r\n    return pack\r\nend)\r\n\r\nBoosterPacks.innistrad = createCustomBooster('(s:isd+or+s:dka+or+s:avr+or+s:soi+or+s:emn+or+s:mid)', function(pack)\r\n    table.insert(pack, pack[#pack]:gsub('r:%S+', getRandomRarity(8, 1)))\r\n    pack[11] = pack[12]\r\n    for i, _ in pairs(pack) do\r\n        local query = (i == 6 or i == #pack or i == #pack - 2) and '+is:transform' or '+-is:transform'\r\n        pack[i] = pack[i] .. query\r\n    end\r\n    return pack\r\nend)\r\n\r\nBoosterPacks.ravnica = createCustomBooster('(s:rav+or+s:gpt+or+s:dis+or+s:rtr+or+s:gtc+or+s:dgm+or+s:grn+or+s:rna)', function(pack)\r\n    local landQuery = 't:land+-t:basic'\r\n    table.insert(pack, pack[#pack])\r\n    for i = 7, 9 do\r\n        pack[i] = pack[6] .. '+id>=2'\r\n    end\r\n    for i, _ in pairs(pack) do\r\n        if i == 6 or i == #pack then\r\n            pack[i] = pack[i]:gsub('r:%S+', getRandomRarity(9, 6, 3)) .. '+' .. landQuery\r\n        else\r\n            pack[i] = pack[i] .. '+-' .. landQuery\r\n        end\r\n    end\r\n    return pack\r\nend)\r\n\r\n-- Maps set codes that are not valid Lua identifiers to valid function names.\r\nlocal setCodeMapping = {\r\n    ['2xm'] = 'twoxm'\r\n}\r\n\r\n--- Rate Limiting State ---\r\nlocal requestQueue = {}\r\nlocal requestsThisMinute = 0\r\nlocal resetTime = os.time()\r\n\r\n-- enqueue requests instead of calling WebRequest.get directly\r\nfunction enqueueRequest(url, callback)\r\n    table.insert(requestQueue, { url = url, callback = callback })\r\nend\r\n\r\n-- process up to 5 requests per minute\r\nfunction processRequestQueue()\r\n    if #requestQueue == 0 then\r\n        return\r\n    end\r\n    local req = table.remove(requestQueue, 1)\r\n    WebRequest.get(req.url, req.callback)\r\nend\r\n\r\n--- Scryfall API and Deck Handling ---\r\nfunction getScryfallQueryTable()\r\n    local setCode = string.lower(getSetCode())\r\n    local mappedSetCode = setCodeMapping[setCode] or setCode\r\n    local packGenerator = BoosterPacks[mappedSetCode] or BoosterPacks.default\r\n    return packGenerator(setCode)\r\nend\r\n\r\nfunction fetchDeckData(urlTable, boosterID)\r\n    local deck = {\r\n        Transform = { posX = 0, posY = 0, posZ = 0, rotX = 0, rotY = 180, rotZ = 180, scaleX = 1, scaleY = 1, scaleZ = 1 },\r\n        Name = \"Deck\",\r\n        Nickname = getSetCode() .. \" Booster\",\r\n        Description = cardStackDescription,\r\n        DeckIDs = {},\r\n        CustomDeck = {},\r\n        ContainedObjects = {},\r\n    }\r\n\r\n    local requestsPending = #urlTable\r\n    local requestsCompleted = 0\r\n\r\n    for i, url in ipairs(urlTable) do\r\n        enqueueRequest(url, function(request)\r\n            if request.response_code ~= 200 then\r\n                local errorInfo = JSON.decode(request.text)\r\n                local message = errorInfo and errorInfo.details or (request.error .. \": \" .. request.text)\r\n                broadcastToAll(message, \"Red\")\r\n                print(message)\r\n            else\r\n                local cardData = createCardDataFromJSON(request.text, i)\r\n                if cardData then\r\n                    deck.ContainedObjects[i] = cardData\r\n                    deck.DeckIDs[i] = cardData.CardID\r\n                    deck.CustomDeck[i] = cardData.CustomDeck[i]\r\n                end\r\n            end\r\n            requestsCompleted = requestsCompleted + 1\r\n        end)\r\n    end\r\n\r\n    Wait.condition(\r\n            function()\r\n                if #deck.ContainedObjects ~= #urlTable then\r\n                    return\r\n                end\r\n\r\n                local cardNames = {}\r\n                local hasDuplicates = false\r\n                for _, card in ipairs(deck.ContainedObjects) do\r\n                    if cardNames[card.Nickname] then\r\n                        hasDuplicates = true\r\n                        break\r\n                    end\r\n                    cardNames[card.Nickname] = true\r\n                end\r\n\r\n                if hasDuplicates then\r\n                    fetchDeckData(urlTable, boosterID)\r\n                else\r\n                    boosterDataCache[boosterID] = deck\r\n                end\r\n            end,\r\n            function()\r\n                return requestsPending == requestsCompleted\r\n            end\r\n    )\r\nend\r\n\r\nfunction getCardOracleText(cardFace)\r\n    local powerToughness = \"\"\r\n    if cardFace.power then\r\n        powerToughness = '\\n[b]' .. cardFace.power .. '/' .. cardFace.toughness .. '[b]'\r\n    elseif cardFace.loyalty then\r\n        powerToughness = '\\n[b]' .. tostring(cardFace.loyalty) .. '[/b]'\r\n    end\r\n    return (cardFace.oracle_text or \"\") .. powerToughness\r\nend\r\n\r\nfunction createCardDataFromJSON(jsonString, cardIndex)\r\n    local card = JSON.decode(jsonString)\r\n    if not card or not card.name then\r\n        error(\"Failed to decode JSON: \" .. jsonString)\r\n        return\r\n    end\r\n\r\n    local cardName = \"\"\r\n    local cardOracle = \"\"\r\n    local faceURL = \"\"\r\n    local backData = nil\r\n    local imageQuality = 'large'\r\n    local cacheBuster = (card.image_status ~= 'highres_scan') and ('?' .. os.date(\"%Y%m%d\")) or \"\"\r\n\r\n    local function getFormattedName(face, typeSuffix)\r\n        return string.format('%s\\n%s %s CMC %s', face.name:gsub('\"', ''), face.type_line, tostring(card.cmc or face.cmc or 0), typeSuffix or \"\"):gsub('%s$', '')\r\n    end\r\n\r\n    if card.card_faces then\r\n        if card.image_uris then\r\n            -- Split cards like Adventure\r\n            cardName = getFormattedName(card.card_faces[1])\r\n            for i, face in ipairs(card.card_faces) do\r\n                cardOracle = cardOracle .. getFormattedName(face) .. '\\n' .. getCardOracleText(face)\r\n                if i < #card.card_faces then\r\n                    cardOracle = cardOracle .. '\\n'\r\n                end\r\n            end\r\n            faceURL = card.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n        else\r\n            -- Transform / DFC\r\n            local face = card.card_faces[1]\r\n            local back = card.card_faces[2]\r\n            cardName = getFormattedName(face, 'DFC')\r\n            cardOracle = getCardOracleText(face)\r\n            faceURL = face.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n            local backURL = back.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n\r\n            local backCardIndex = cardIndex + 100\r\n            backData = {\r\n                Transform = { posX = 0, posY = 0, posZ = 0, rotX = 0, rotY = 0, rotZ = 0, scaleX = 1, scaleY = 1, scaleZ = 1 },\r\n                Name = \"Card\",\r\n                Nickname = getFormattedName(back, 'DFC'),\r\n                Description = getCardOracleText(back),\r\n                Memo = card.oracle_id,\r\n                CardID = backCardIndex * 100,\r\n                CustomDeck = {\r\n                    [backCardIndex] = {\r\n                        FaceURL = backURL, BackURL = config.backURL, NumWidth = 1, NumHeight = 1,\r\n                        Type = 0, BackIsHidden = true, UniqueBack = false\r\n                    }\r\n                },\r\n            }\r\n        end\r\n    else\r\n        -- Normal card\r\n        cardName = getFormattedName(card)\r\n        cardOracle = getCardOracleText(card)\r\n        faceURL = card.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n    end\r\n\r\n    local cardData = {\r\n        Transform = { posX = 0, posY = 0, posZ = 0, rotX = 0, rotY = 0, rotZ = 0, scaleX = 1, scaleY = 1, scaleZ = 1 },\r\n        Name = \"Card\",\r\n        Nickname = cardName,\r\n        Description = cardOracle,\r\n        Memo = card.oracle_id,\r\n        CardID = cardIndex * 100,\r\n        CustomDeck = {\r\n            [cardIndex] = {\r\n                FaceURL = faceURL, BackURL = config.backURL, NumWidth = 1, NumHeight = 1,\r\n                Type = 0, BackIsHidden = true, UniqueBack = false\r\n            }\r\n        },\r\n    }\r\n\r\n    if backData then\r\n        cardData.States = { [2] = backData }\r\n    end\r\n\r\n    return cardData\r\nend\r\n\r\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "3482bf",
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -12.191412,
            "posY": 4.42412567,
            "posZ": 9.041547,
            "rotX": 1.33040712E-05,
            "rotY": 359.976929,
            "rotZ": 2.27627E-05,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Empty Booster",
          "Description": "",
          "GMNotes": "",
          "AltLookAngle": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          },
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/9779110528988615269/E9A65CD25256BFDB28AE4140FCB1D27BC71A5A8D/",
            "DiffuseURL": "https://steamusercontent-a.akamaihd.net/ugc/12555777445170015064/1F22F21DA19B1C5D668D761C2CA447889AE98A2A/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "Bag": {
            "Order": 0
          },
          "LuaScript": "function tryObjectEnter()\r\n    return false\r\nend\r\n\r\nfunction onObjectLeaveContainer(container)\r\n    if container ~= self then\r\n        return\r\n    end\r\n\r\n    -- wait one second, then destroy the container when it's empty\r\n    Wait.time(function()\r\n        Wait.condition(\r\n                function()\r\n                    if container ~= nil then\r\n                        container.destruct()\r\n                    end\r\n                end,\r\n                function()\r\n                    return container ~= nil and container.getQuantity() == 0\r\n                end\r\n        )\r\n    end, 1)\r\nend\r\n",
          "LuaScriptState": "",
          "XmlUI": "",
          "ContainedObjects": [
            {
              "GUID": "8cd2f5",
              "Name": "CardCustom",
              "Transform": {
                "posX": -8.525,
                "posY": 1.38543224,
                "posZ": -2.32499981,
                "rotX": 0.0001361478,
                "rotY": 180.01059,
                "rotZ": 179.9995,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 0.713235259,
                "g": 0.713235259,
                "b": 0.713235259
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": true,
              "Hands": true,
              "CardID": 24700,
              "SidewaysCard": false,
              "CustomDeck": {
                "247": {
                  "FaceURL": "https://steamusercontent-a.akamaihd.net/ugc/1869555422032369755/F9BD705BCF967068A85CC525B6879147EDB76E71/",
                  "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1869555872447018243/605ECC61FD27EE474845AA7CC2AAC1AB2984DECB/",
                  "NumWidth": 1,
                  "NumHeight": 1,
                  "BackIsHidden": true,
                  "UniqueBack": false,
                  "Type": 0
                }
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            }
          ]
        }
      ],
      "ChildObjects": [
        {
          "GUID": "f39cf0",
          "Name": "Custom_Model_Infinite_Bag",
          "Transform": {
            "posX": -1.37481074E-05,
            "posY": -0.50000006,
            "posZ": -0.07334592,
            "rotX": -5.5286984E-16,
            "rotY": -5.502838E-08,
            "rotZ": 2.654954E-25,
            "scaleX": 0.0338982977,
            "scaleY": 0.08542431,
            "scaleZ": 0.0289256871
          },
          "Nickname": "Booster Box",
          "Description": "Set: M14",
          "GMNotes": "",
          "AltLookAngle": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          },
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/12983479995982417794/E62DB17C9EF924DD8561E483368697A5C396D16F/",
            "DiffuseURL": "https://steamusercontent-a.akamaihd.net/ugc/17688090535400173324/590A8D3033394EA170B56B22C333819A1DD29CD1/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 7,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "LuaScript": "function onLoad()\r\n  --customize card-back image\r\n  backURL='https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/'\r\n\r\n  setCode='Mystery'\r\n  -- setCode='KLM'\r\n  -- setCode='STX'\r\n  -- setCode='ZNR'\r\n\r\n  cardStackName=setCode..\" Booster\"\r\n  cardStackDescription=\"\"\r\n\r\n  -------------- don't change these\r\n  nBooster=0\r\n  boosterDats={}\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n---- Booster Set Lookup Function\r\n---- should be correct for all sets?\r\n---- if not add special cases e.g. using the set:lower()=='mystery' example\r\n--------------------------------------------------------------------------------\r\nlocal apiSet='http://api.scryfall.com/cards/random?q=is:booster+s:'\r\nfunction rarity(m,r,u)\r\n  if math.random(1,m or 36)==1 then return'r:mythic'\r\n  elseif math.random(1,r or 8)==1 then return'r:rare'\r\n  elseif math.random(1,u or 4)==1 then return'r:uncommon'\r\n  else return'r:common'end end\r\nfunction typeCo(p,t)local n=math.random(#p-1,#p)for i=13,#p do if n==i then p[i]=p[i]..'+'..t else p[i]=p[i]..'+-('..t..')'end end return p end\r\n\r\nlocal Booster=setmetatable({\r\n  dom=function(p)return typeCo(p,'t:legendary')end,\r\n  war=function(p)return typeCo(p,'t:planeswalker')end,\r\n  znr=function(p)return typeCo(p,'t:land+(is:spell+or+pathway)')end,\r\n  tsp='tsb',mb1='fmb1',mh2='h1r',bfz='exp',ogw='exp',kld='mps',aer='mps',akh='mp2',hou='mp2',stx='sta'\r\n},{__call=function(t,set,n)\r\n  local pack,u={},apiSet..set..'+'\r\n  u=u:gsub('%+s:%(','+(')\r\n  if not n and t[set]and type(t[set])=='function'then\r\n    return t[set](t(set,true))\r\n  else\r\n    for c in('wubrg'):gmatch('.')do table.insert(pack,u..'r:common+c>='..c)end\r\n    for i=1,6 do table.insert(pack,u..'r:common+-t:basic')end\r\n    --masterpiece math\r\n    if not n and((t[set]and math.random(1,144)==1)or('tsp mb1 mh2'):find(set))then\r\n      pack[#pack]=apiSet..t[set]end\r\n    for i=1,3 do table.insert(pack,u..'r:uncommon')end\r\n    table.insert(pack,u..rarity(8,1))\r\n    return pack\r\n  end\r\nend})\r\n\r\n--ReplacementSlot\r\nfunction rSlot(p,s,a,b)for i,v in pairs(p)do if i~=6 then p[i]=v..a else p[i]=apiSet..s..'+'..rarity()..b end end return p end\r\n\r\n--Weird Boosters\r\nBooster['mystery']=function()\r\n  urlTable={}\r\n  -- MYSTERY BOOSTER (set mb1)\r\n  urlPrefix='http://api.scryfall.com/cards/random?q=set:mb1+'\r\n  -- slot 1-10: each Convention pack has 2 commons/uncommons of each color\r\n  for _,c in pairs({'w','u','b','r','g'}) do\r\n    table.insert(urlTable,urlPrefix..'r<rare+c='..c)\r\n    table.insert(urlTable,urlPrefix..'r<rare+c='..c)\r\n  end\r\n  -- slot 11: 1 multicolored common/uncommon\r\n  table.insert(urlTable,urlPrefix..'c:m+r<rare')\r\n  -- slot 12: 1 common/uncommon artifact/land\r\n  table.insert(urlTable,urlPrefix..'c:c+r<rare')\r\n  -- slot 13: 1 rare/mythic rare with the M15 card frame\r\n  table.insert(urlTable,urlPrefix..'r>=rare+frame:2015')\r\n  -- slot 14: one pre-M15 card in its original frame\r\n  table.insert(urlTable,urlPrefix..'r>=rare+-frame:2015')\r\n  -- slot 15: a pretend \"playtest card\" in the special slot that seems more like part of an Un-set\r\n  table.insert(urlTable,'http://api.scryfall.com/cards/random?q=set:cmb1')\r\n  return urlTable\r\nend\r\n\r\nBooster['stx']=function()\r\n  local pack,u={},apiSet..'stx+'\r\n  -- 1 mystical archive card  (Uncommon, Rare, or Mythic Rare, 50% chance japanese)\r\n  if math.random(2)==1 then table.insert(pack,'http://api.scryfall.com/cards/random?q=set:sta+r>common+lang:en')\r\n  else table.insert(pack,'http://api.scryfall.com/cards/random?q=set:sta+r>common+lang:ja') end\r\n  table.insert(pack,u..'t:lesson+-r:u')             -- 1 lesson card (Common, Rare, or Mythic Rare)\r\n  table.insert(pack,u..rarity(8,1))                 -- 1 rare (7/8 chance) or mythic rare (1/8 chance)\r\n  for i=1,3 do table.insert(pack,u..'r:u') end      -- 3 uncommons\r\n  for _,c in pairs({'w','u','b','r','g'}) do table.insert(pack,u..'r:c+c:'..c) end              -- 8 commons\r\n  for i=1,3 do table.insert(pack,u..'r:c+-t:basic') end\r\n  if math.random(3)==1 then table.insert(pack,u) else table.insert(pack,u..'r:c+-t:basic') end  -- 33% chance foil of any rarity (66% chance another common)\r\n  return pack\r\nend\r\n\r\nBooster['2xm']=function(p)p[11]=p[#p]for i=9,10 do p[i]=apiSet..'2xm'..'+'..rarity()end return p end\r\nfor s in('isd dka soi emn'):gmatch('%S+')do\r\n  Booster[s]=function(p)return rSlot(p,s,'+-is:transform','+is:transform')end end\r\nfor s in('mid'):gmatch('%S+')do--Crimson Moon\r\n  Booster[s]=function(p)local n=math.random(#p-1,#p)for i,v in pairs(p)do if i==6 or i==n then p[i]=p[i]..'+is:transform'else p[i]=p[i]..'+-is:transform'end end return p end end\r\nfor s in('cns cn2'):gmatch('%S+')do\r\n  Booster[s]=function(p)return rSlot(p,s,'+-wm:conspiracy','+wm:conspiracy')end end\r\nfor s in('rav gpt dis rtr gtc dgm grn rna'):gmatch('%S+')do\r\n  Booster[s]=function(p)return rSlot(p,s,'+-t:land','+t:land+-t:basic')end end\r\nfor s in('ice all csp mh1 khm'):gmatch('%S+')do\r\n  Booster[s]=function(p)p[6]=apiSet..s..'+t:basic+t:snow'return p end end\r\n\r\n--Custom Booster Packs\r\nBooster.standard=function(qTbl)\r\n  local pack,u={},'http://api.scryfall.com/cards/random?q=f:standard+'\r\n  for c in ('wubrg'):gmatch('.')do\r\n    table.insert(pack,u..'r:common+c:'..c)end\r\n  for i=1,5 do table.insert(pack,u..'r:common+-t:basic')end\r\n  for i=1,3 do table.insert(pack,u..'r:uncommon')end\r\n  table.insert(pack,u..rarity(8,1))\r\n  table.insert(pack,u..'t:basic')\r\n  table.insert(pack,u:sub(1,39)..'(set:tafr+or+set:tstx+or+set:tkhm+or+set:tznr+or+set:sznr+or+set:tm21+or+set:tiko+or+set:tthb+or+set:teld)')\r\n  for i=#pack-1,#pack do\r\n    if math.random(1,2)==1 then\r\n      pack[i]=u..'(border:borderless+or+frame:showcase+or+frame:extendedart+or+set:plist+or+set:sta)'\r\n    end end\r\n  return pack end\r\nBooster.conspiracy=function(qTbl)--wubrgCCCCCTUUURT\r\n  local p=Booster('(s:cns+or+s:cn2)')\r\n  local z=p[#p]:gsub('r:%S+',rarity(9,6,3))\r\n  table.insert(p,z)\r\n  p[6]=p[math.random(11,12)]\r\n  for i,s in pairs(p)do\r\n    if i==6 or i==#p then\r\n      p[i]=p[i]..'+wm:conspiracy'\r\n    else p[i]=p[i]..'+-wm:conspiracy'end end\r\n  return p end\r\nBooster.innistrad=function(qTbl)--wubrgDCCCCUUUDRD\r\n  local p=Booster('(s:isd+or+s:dka+or+s:avr+or+s:soi+or+s:emn+or+s:mid)')\r\n  local z=p[#p]:gsub('r:%S+',rarity(8,1))\r\n  table.insert(p,z)\r\n  p[11]=p[12]\r\n  for i,s in pairs(p)do\r\n    if i==6 or i==#p or i==#p-2 then\r\n      p[i]=p[i]..'+is:transform'\r\n    else p[i]=p[i]..'+-is:transform'end end\r\n  return p end\r\nBooster.ravnica=function(qTbl)--wubrgLmmmCCUUURL\r\n  local l,p='t:land+-t:basic',Booster('(s:rav+or+s:gpt+or+s:dis+or+s:rtr+or+s:gtc+or+s:dgm+or+s:grn+or+s:rna)')\r\n  table.insert(p,p[#p])\r\n  for i=7,9 do p[i]=p[6]..'+id>=2'end\r\n  for i,s in pairs(p)do\r\n    if i==6 or i==#p then\r\n      p[i]=p[i]:gsub('r:%S+',rarity(9,6,3))..'+'..l\r\n    else p[i]=p[i]..'+-'..l end end\r\n  return p end\r\n\r\nfunction getScryfallQueryTable()\r\n  urlTable=Booster(setCode:lower())\r\n  return urlTable\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n-- when a booster is taken out from the box, start scryfall query and replace booster contents\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n  if container ~= self then return end\r\n\r\n  leave_object.setName(cardStackName)\r\n\r\n  nBooster=nBooster+1\r\n  local boosterN=nBooster\r\n\r\n  urlTable=getScryfallQueryTable()\r\n  getDeckDat(urlTable,boosterN)\r\n\r\n  leave_object.createButton({\r\n    click_function='null',\r\n    function_owner=self,\r\n    label='generating\\ncards',\r\n    position={0,0.5,0},\r\n    rotation={0,90,0},\r\n    scale={0.5,0.5,0.5},\r\n    width=0,\r\n    height=0,\r\n    font_size=1000,\r\n    color={0,0,0,0},\r\n    font_color={1,1,1,100},\r\n  })\r\n\r\n  Wait.condition(function()\r\n    leave_object.clearButtons()\r\n    Wait.condition(function()\r\n      bDat = leave_object.getData()\r\n      bDat.ContainedObjects={boosterDats[boosterN]}\r\n      leave_object.destruct()\r\n      spawnObjectData({data=bDat})\r\n    end,\r\n    function()\r\n      -- print('obj resting')\r\n      return leave_object.resting\r\n    end)\r\n  end,function()\r\n    -- print('nil data')\r\n    return boosterDats[boosterN]~=nil\r\n  end)\r\nend\r\n\r\n\r\n-- takes in a table of scryfall query url's\r\n-- queries scryfall for the data\r\n-- generates TTS deckData object with the cards (saved to boosterDats[boosterN])\r\nfunction getDeckDat(urlTable,boosterN)\r\n\r\n  deckDat={\r\n    Transform={posX=0,posY=0,posZ=0,rotX=0,rotY=180,rotZ=180,scaleX=1,scaleY=1,scaleZ=1},\r\n    Name=\"Deck\",\r\n    Nickname=cardStackName,\r\n    Description=cardStackDescription,\r\n    DeckIDs={},\r\n    CustomDeck={},\r\n    ContainedObjects={},\r\n  }\r\n\r\n  local nLoading=0\r\n  local nLoaded=0\r\n\r\n  for n,url in ipairs(urlTable) do\r\n    nLoading=nLoading+1\r\n\r\n    WebRequest.get(url,function(wr)\r\n      cardDat=getCardDatFromJSON(wr.text,n)\r\n      deckDat.ContainedObjects[n]=cardDat\r\n      deckDat.DeckIDs[n]=cardDat.CardID      -- add card info into deckDat\r\n      deckDat.CustomDeck[n]=cardDat.CustomDeck[n]\r\n      nLoaded=nLoaded+1\r\n    end)\r\n\r\n  end\r\n\r\n  Wait.condition(function()   -- once all the queries come back from scryfall\r\n\r\n    -- check for doubles\r\n    local doubles=false\r\n    local names={}\r\n    for _,card in pairs(deckDat.ContainedObjects) do\r\n      for _,prevName in pairs(names) do\r\n        if card.Nickname==prevName then\r\n          doubles=true\r\n        end\r\n      end\r\n      table.insert(names,card.Nickname)\r\n    end\r\n\r\n    if doubles then   -- just redo the search\r\n      getDeckDat(urlTable,boosterN)\r\n    else              -- update the boosterDats\r\n      boosterDats[boosterN]=deckDat\r\n    end\r\n  end,\r\n  function() return nLoading==nLoaded end)\r\n\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n\r\nfunction getCardDatFromJSON(json,n)\r\n\r\n  local c=JSONdecode(json)\r\n\r\n  c.face=''\r\n  c.oracle=''\r\n  local qual='large'\r\n\r\n  local imagesuffix=''\r\n  if c.image_status~='highres_scan' then      -- cache buster for low quality images\r\n    imagesuffix='?'..tostring(os.date(\"%x\")):gsub('/', '')\r\n  end\r\n\r\n  --Check for card's spoiler image quality\r\n  --Oracle text Handling for Split then DFC then Normal\r\n  if c.card_faces and c.image_uris then\r\n    for i,f in ipairs(c.card_faces) do\r\n      if c.cmc then\r\n        f.name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..c.cmc..'CMC'\r\n      else\r\n        f.name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..f.cmc..'CMC'\r\n      end\r\n      if i==1 then cardName=f.name end\r\n      c.oracle=c.oracle..f.name..'\\n'..setOracle(f)..(i==#c.card_faces and''or'\\n')\r\n    end\r\n  elseif c.card_faces then\r\n    local f=c.card_faces[1]\r\n    if c.cmc then\r\n      cardName=f.name:gsub('\"','')..'\\n'..f.type_line..' '..c.cmc..'CMC DFC'\r\n    else\r\n      cardName=f.name:gsub('\"','')..'\\n'..f.type_line..' '..f.cmc..'CMC DFC'\r\n    end\r\n    c.oracle=setOracle(f)\r\n  else\r\n    cardName=c.name:gsub('\"','')..'\\n'..c.type_line..' '..c.cmc..'CMC'\r\n    c.oracle=setOracle(c)\r\n  end\r\n  local backDat=nil\r\n  --Image Handling\r\n  if c.card_faces and not c.image_uris then --DFC REWORKED for STATES!\r\n    local faceAddress=c.card_faces[1].image_uris.normal:gsub('%?.*',''):gsub('normal',qual)..imagesuffix\r\n    local backAddress=c.card_faces[2].image_uris.normal:gsub('%?.*',''):gsub('normal',qual)..imagesuffix\r\n    if faceAddress:find('/back/') and backAddress:find('/front/') then\r\n      local temp=faceAddress;faceAddress=backAddress;backAddress=temp\r\n    end\r\n    c.face=faceAddress\r\n    local f=c.card_faces[2]\r\n    local name\r\n    if c.cmc then\r\n      name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..c.cmc..'CMC DFC'\r\n    else\r\n      name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..f.cmc..'CMC DFC'\r\n    end\r\n    local oracle=setOracle(f)\r\n    local b=n+100\r\n    backDat={\r\n      Transform={posX=0,posY=0,posZ=0,rotX=0,rotY=0,rotZ=0,scaleX=1,scaleY=1,scaleZ=1},\r\n      Name=\"Card\",\r\n      Nickname=name,\r\n      Description=oracle,\r\n      Memo=c.oracle_id,\r\n      CardID=b*100,\r\n      CustomDeck={[b]={FaceURL=backAddress,BackURL=backURL,NumWidth=1,NumHeight=1,Type=0,BackIsHidden=true,UniqueBack=false}},\r\n    }\r\n  elseif c.image_uris then\r\n    c.face=c.image_uris.normal:gsub('%?.*',''):gsub('normal',qual)..imagesuffix\r\n    if cardName:lower():match('geralf') then\r\n      c.face=c.image_uris.normal:gsub('%?.*',''):gsub('normal','png'):gsub('jpg','png')..imagesuffix\r\n    end\r\n  end\r\n\r\n  local cardDat={\r\n    Transform={posX=0,posY=0,posZ=0,rotX=0,rotY=0,rotZ=0,scaleX=1,scaleY=1,scaleZ=1},\r\n    Name=\"Card\",\r\n    Nickname=cardName,\r\n    Description=c.oracle,\r\n    Memo=c.oracle_id,\r\n    CardID=n*100,\r\n    CustomDeck={[n]={FaceURL=c.face,BackURL=backURL,NumWidth=1,NumHeight=1,Type=0,BackIsHidden=true,UniqueBack=false}},\r\n  }\r\n\r\n  if backDat then\r\n    cardDat.States={[2]=backDat}\r\n  end\r\n  return cardDat\r\nend\r\n\r\n\r\nfunction setOracle(c)local n='\\n[b]'\r\n  if c.power then\r\n    n=n..c.power..'/'..c.toughness\r\n  elseif c.loyalty then\r\n    n=n..tostring(c.loyalty)\r\n  else\r\n    n=false\r\n  end\r\n  return c.oracle_text..(n and n..'[/b]'or'')\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n-- pie's manual \"JSONdecode\" for scryfall's \"object\":\"card\"\r\n--------------------------------------------------------------------------------\r\n\r\nnormal_card_keys={\r\n  'object',\r\n  'id',\r\n  'oracle_id',\r\n  'name',\r\n  'lang',\r\n  'layout',\r\n  'image_status',\r\n  'image_uris',\r\n  'mana_cost',\r\n  'cmc',\r\n  'type_line',\r\n  'oracle_text',\r\n  'loyalty',\r\n  'power',\r\n  'toughness',\r\n  'loyalty',\r\n  'legalities',\r\n  'set',\r\n  'rulings_uri',\r\n  'prints_search_uri',\r\n  'collector_number'\r\n}\r\n\r\nimage_uris_keys={    -- \"image_uris\":{\r\n  'small',\r\n  'normal',\r\n  'large',\r\n  'png',\r\n  'art_crop',\r\n  'border_crop',\r\n}\r\n\r\nlegalities_keys={    -- \"legalities\":{\r\n  'standard',\r\n  'future',\r\n  'historic',\r\n  'gladiator',\r\n  'pioneer',\r\n  'modern',\r\n  'legacy',\r\n  'pauper',\r\n  'vintage',\r\n  'penny',\r\n  'commander',\r\n  'brawl',\r\n  'duel',\r\n  'oldschool',\r\n  'premodern',\r\n}\r\n\r\nrelated_card_keys={     -- \"all_parts\":[{\"object\":\"related_card\",\r\n  'id',\r\n  'component',\r\n  'name',\r\n  'type_line',\r\n  'uri',\r\n}\r\n\r\ncard_face_keys={        -- \"card_faces\":[{\"object\":\"card_face\",\r\n  'name',\r\n  'mana_cost',\r\n  'cmc',\r\n  'type_line',\r\n  'oracle_text',\r\n  'power',\r\n  'toughness',\r\n  'loyalty',\r\n  'image_uris',\r\n}\r\n\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\nfunction JSONdecode(txt)\r\n  local txtBeginning = txt:sub(1,16)\r\n  local jsonType = txtBeginning:match('{\"object\":\"(%w+)\"')\r\n\r\n  -- not scryfall? use normal JSON.decode\r\n  if not(jsonType=='card' or jsonType=='list') then\r\n    return JSON.decode(txt)\r\n  end\r\n\r\n  ------------------------------------------------------------------------------\r\n  -- parse list: extract each card, and parse it separately\r\n  -- used when one wants to decode a whole list\r\n  if jsonType=='list' then\r\n    local txtBeginning = txt:sub(1,80)\r\n    local nCards=txtBeginning:match('\"total_cards\":(%d+)')\r\n    if nCards==nil then\r\n      return JSON.decode(txt)\r\n    end\r\n    local cardStart=0\r\n    local cardEnd=0\r\n    local cardDats = {}\r\n    for i=1,nCards do     -- could insert max number cards to parse here\r\n      cardStart=string.find(txt,'{\"object\":\"card\"',cardEnd+1)\r\n      cardEnd = findClosingBracket(txt,cardStart)\r\n      local cardDat = JSONdecode(txt:sub(cardStart,cardEnd))\r\n      table.insert(cardDats,cardDat)\r\n    end\r\n    local dat = {object=\"list\",total_cards=nCards,data=cardDats}    --ignoring has_more...\r\n    return dat\r\n  end\r\n\r\n  ------------------------------------------------------------------------------\r\n  -- parse card\r\n\r\n  txt=txt:gsub('}',',}')    -- comma helps parsing last element in an array\r\n\r\n  local cardDat={}\r\n  local all_parts_i=string.find(txt,'\"all_parts\":')\r\n  local card_faces_i=string.find(txt,'\"card_faces\":')\r\n\r\n  -- if all_parts exist\r\n  if all_parts_i~=nil then\r\n    local st=string.find(txt,'%[',all_parts_i)\r\n    local en=findClosingBracket(txt,st)\r\n    local all_parts_txt = txt:sub(all_parts_i,en)\r\n    local all_parts={}\r\n    -- remove all_parts snip from the main text\r\n    txt=txt:sub(1,all_parts_i-1)..txt:sub(en+2,-1)\r\n    -- parse all_parts_txt for each related_card\r\n    st=1\r\n    local cardN=0\r\n    while st~=nil do\r\n      st=string.find(all_parts_txt,'{\"object\":\"related_card\"',st)\r\n      if st~=nil then\r\n        cardN=cardN+1\r\n        en=findClosingBracket(all_parts_txt,st)\r\n        local related_card_txt=all_parts_txt:sub(st,en)\r\n        st=en\r\n        local s,e=1,1\r\n        local related_card={}\r\n        for i,key in ipairs(related_card_keys) do\r\n          val,s=getKeyValue(related_card_txt,key,s)\r\n          related_card[key]=val\r\n        end\r\n        table.insert(all_parts,related_card)\r\n        if cardN>100 then break end   -- avoid inf loop if something goes strange\r\n      end\r\n      cardDat.all_parts=all_parts\r\n    end\r\n  end\r\n\r\n  -- if card_faces exist\r\n  if card_faces_i~=nil then\r\n    local st=string.find(txt,'%[',card_faces_i)\r\n    local en=findClosingBracket(txt,st)\r\n    local card_faces_txt = txt:sub(card_faces_i,en)\r\n    local card_faces={}\r\n    -- remove card_faces snip from the main text\r\n    txt=txt:sub(1,card_faces_i-1)..txt:sub(en+2,-1)\r\n\r\n    -- parse card_faces_txt for each card_face\r\n    st=1\r\n    local cardN=0\r\n    while st~=nil do\r\n      st=string.find(card_faces_txt,'{\"object\":\"card_face\"',st)\r\n      if st~=nil then\r\n        cardN=cardN+1\r\n        en=findClosingBracket(card_faces_txt,st)\r\n        local card_face_txt=card_faces_txt:sub(st,en)\r\n        st=en\r\n        local s,e=1,1\r\n        local card_face={}\r\n        for i,key in ipairs(card_face_keys) do\r\n          val,s=getKeyValue(card_face_txt,key,s)\r\n          card_face[key]=val\r\n        end\r\n        table.insert(card_faces,card_face)\r\n        if cardN>4 then break end   -- avoid inf loop if something goes strange\r\n      end\r\n      cardDat.card_faces=card_faces\r\n    end\r\n  end\r\n\r\n  -- normal card (or what's left of it after removing card_faces and all_parts)\r\n  st=1\r\n  for i,key in ipairs(normal_card_keys) do\r\n    val,st=getKeyValue(txt,key,st)\r\n    cardDat[key]=val\r\n  end\r\n\r\n  return cardDat\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n-- returns data for one card at a time from a scryfall's \"object\":\"list\"\r\nfunction getNextCardDatFromList(txt,startHere)\r\n\r\n  if startHere==nil then\r\n    startHere=1\r\n  end\r\n\r\n  local cardStart=string.find(txt,'{\"object\":\"card\"',startHere)\r\n  if cardStart==nil then\r\n    -- print('error: no more cards in list')\r\n    startHere=nil\r\n    return nil,nil,nil\r\n  end\r\n\r\n  local cardEnd = findClosingBracket(txt,cardStart)\r\n  if cardEnd==nil then\r\n    -- print('error: no more cards in list')\r\n    startHere=nil\r\n    return nil,nil,nil\r\n  end\r\n\r\n  -- startHere is not a local variable, so it's possible to just do:\r\n  -- getNextCardFromList(txt) and it will keep giving the next card or nil if there's no more\r\n  startHere=cardEnd+1\r\n\r\n  local cardDat = JSONdecode(txt:sub(cardStart,cardEnd))\r\n\r\n  return cardDat,cardStart,cardEnd\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\nfunction findClosingBracket(txt,st)   -- find paired {} or []\r\n  if st==nil then return nil end\r\n  local ob,cb='{','}'\r\n  local pattern='[{}]'\r\n  if txt:sub(st,st)=='[' then\r\n    ob,cb='[',']'\r\n    pattern='[%[%]]'\r\n  end\r\n  local txti=st\r\n  local nopen=1\r\n  while nopen>0 do\r\n    txti=string.find(txt,pattern,txti+1)\r\n    if txt:sub(txti,txti)==ob then\r\n      nopen=nopen+1\r\n    elseif txt:sub(txti,txti)==cb then\r\n      nopen=nopen-1\r\n    end\r\n  end\r\n  return txti\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\nfunction getKeyValue(txt,key,st)\r\n  local str='\"'..key..'\":'\r\n  local st=string.find(txt,str,st)\r\n  local en=nil\r\n  local value=nil\r\n  if st~=nil then\r\n    if key=='image_uris' then     -- special case for scryfall's image_uris table\r\n      value={}\r\n      local s=st\r\n      for i,k in ipairs(image_uris_keys) do\r\n        local val,s=getKeyValue(txt,k,s)\r\n        value[k]=val\r\n      end\r\n      en=s\r\n    elseif txt:sub(st+#str,st+#str)~='\"' then      -- not a string\r\n      en=string.find(txt,',\"',st+#str+1)\r\n      value=tonumber(txt:sub(st+#str,en-1))\r\n    else                                           -- a string\r\n      en=string.find(txt,'\",',st+#str+1)\r\n      value=txt:sub(st+#str+1,en-1):gsub('\\\\\"','\"'):gsub('\\\\n','\\n'):gsub(\"\\\\u(%x%x%x%x)\",function (x) return string.char(tonumber(x,16)) end)\r\n    end\r\n  end\r\n  if type(value)=='string' then\r\n    value=value:gsub(',}','}')    -- get rid of the previously inserted comma\r\n  end\r\n  return value,en\r\nend",
          "LuaScriptState": "",
          "XmlUI": "",
          "ContainedObjects": [
            {
              "GUID": "36dc1f",
              "Name": "Custom_Model_Bag",
              "Transform": {
                "posX": -2.96532932E-08,
                "posY": 3.1172986,
                "posZ": 6.101597E-07,
                "rotX": 0.00148047716,
                "rotY": 0.034782324,
                "rotZ": -0.0022447498,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Mystery Booster",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "CustomMesh": {
                "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/9779110528988615269/E9A65CD25256BFDB28AE4140FCB1D27BC71A5A8D/",
                "DiffuseURL": "https://steamusercontent-a.akamaihd.net/ugc/12555777445170015064/1F22F21DA19B1C5D668D761C2CA447889AE98A2A/",
                "NormalURL": "",
                "ColliderURL": "",
                "Convex": true,
                "MaterialIndex": 3,
                "TypeIndex": 6,
                "CustomShader": {
                  "SpecularColor": {
                    "r": 1.0,
                    "g": 1.0,
                    "b": 1.0
                  },
                  "SpecularIntensity": 0.0,
                  "SpecularSharpness": 2.0,
                  "FresnelStrength": 0.0
                },
                "CastShadows": true
              },
              "Bag": {
                "Order": 0
              },
              "LuaScript": "function tryObjectEnter(obj)\r\n  if obj.type=='Card' or obj.type=='Deck' then\r\n    return true\r\n  else\r\n    return false\r\n  end\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, object)\r\n  if container~=self then return end\r\n  if container.getQuantity()==0 then\r\n    Wait.time(function()\r\n      if container~=nil then\r\n        container.destruct()\r\n      end\r\n    end,2)\r\n  end\r\nend\r\n",
              "LuaScriptState": "",
              "XmlUI": "",
              "ContainedObjects": [
                {
                  "GUID": "",
                  "Name": "Deck",
                  "Transform": {
                    "posX": 0.0,
                    "posY": 0.0,
                    "posZ": 0.0,
                    "rotX": 0.0,
                    "rotY": 180.0,
                    "rotZ": 180.0,
                    "scaleX": 1.0,
                    "scaleY": 1.0,
                    "scaleZ": 1.0
                  },
                  "Nickname": "Mystery Booster",
                  "Description": "",
                  "GMNotes": "",
                  "AltLookAngle": {
                    "x": 0.0,
                    "y": 0.0,
                    "z": 0.0
                  },
                  "LayoutGroupSortIndex": 0,
                  "Value": 0,
                  "Locked": false,
                  "Grid": true,
                  "Snap": true,
                  "IgnoreFoW": false,
                  "MeasureMovement": false,
                  "DragSelectable": true,
                  "Autoraise": true,
                  "Sticky": true,
                  "Tooltip": true,
                  "GridProjection": false,
                  "DeckIDs": [
                    100,
                    200,
                    300,
                    400,
                    500,
                    600,
                    700,
                    800,
                    900,
                    1000,
                    1100,
                    1200,
                    1300,
                    1400,
                    1500
                  ],
                  "CustomDeck": {
                    "4": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/7/c7a6e64e-4a9d-4fab-b85c-e9c4e88bca2f.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "13": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/6/e6bc963e-042f-4cdc-be38-de8e386c00b3.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "1": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/2/c2ece04a-e6b3-4496-b5e2-1fe8875f1982.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "14": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/c/6c89c1fd-4717-4249-a74f-d9d4935c5753.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "9": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/d/3d26ba20-baa7-4258-9424-89660d11d41d.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "7": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/b/c/bc1db7d4-7955-43c7-95c4-69d64493693d.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "6": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/0/9/0972aad9-c7a1-42e2-8d2f-aecbb5fd33b5.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "8": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/6/6615d7f1-1ed6-43af-a916-6caa4bd35ca3.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "5": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/8/e/8ed90da8-2642-4253-9cd6-f26465ce5ad2.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "15": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/0/60909727-0e87-4f58-a0e6-424eb81fff4f.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "12": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/9/e95756ee-e76b-44e9-a13f-6125ee097ce7.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "3": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/d/1/d1f0d34b-ab98-4bb4-8795-58688bcf02b5.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "2": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/a/3ab2938e-a68f-4eb4-ae05-42f051677f15.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "10": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/7/9/79298a0f-50ca-4bf5-b863-a60f07846970.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "11": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/2/8/28671684-b338-4d6c-8481-72ee8e59a320.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    }
                  },
                  "LuaScript": "",
                  "LuaScriptState": "",
                  "XmlUI": "",
                  "ContainedObjects": [
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Hyena Umbra\nEnchantment  Aura 1CMC",
                      "Description": "Enchant creature\nEnchanted creature gets +1/+1 and has first strike.\nTotem armor (If enchanted creature would be destroyed, instead remove all damage from it and destroy this Aura.)",
                      "GMNotes": "",
                      "Memo": "354affb3-1be7-4a9e-91da-2989eb54f62d",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 100,
                      "CustomDeck": {
                        "1": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/2/c2ece04a-e6b3-4496-b5e2-1fe8875f1982.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Faithbearer Paladin\nCreature  Human Knight 5CMC",
                      "Description": "Lifelink (Damage dealt by this creature also causes you to gain that much life.)\n[b]3/4[/b]",
                      "GMNotes": "",
                      "Memo": "725dc451-cae4-4345-9741-6c58e5a1a1dc",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 200,
                      "CustomDeck": {
                        "2": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/a/3ab2938e-a68f-4eb4-ae05-42f051677f15.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Mistform Shrieker\nCreature  Illusion 5CMC",
                      "Description": "Flying\n{1}: Mistform Shrieker becomes the creature type of your choice until end of turn.\nMorph {3}{U}{U} (You may cast this card face down as a 2/2 creature for {3}. Turn it face up any time for its morph cost.)\n[b]3/3[/b]",
                      "GMNotes": "",
                      "Memo": "50fe31e9-473e-4d2f-b1b5-3eef3c7bb0e6",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 300,
                      "CustomDeck": {
                        "3": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/d/1/d1f0d34b-ab98-4bb4-8795-58688bcf02b5.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Ior Ruin Expedition\nEnchantment 2CMC",
                      "Description": "Landfall  Whenever a land enters the battlefield under your control, you may put a quest counter on Ior Ruin Expedition.\nRemove three quest counters from Ior Ruin Expedition and sacrifice it: Draw two cards.",
                      "GMNotes": "",
                      "Memo": "fc338ba2-c3a4-45d6-895f-af7f72bf7a94",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 400,
                      "CustomDeck": {
                        "4": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/7/c7a6e64e-4a9d-4fab-b85c-e9c4e88bca2f.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Seal of Doom\nEnchantment 3CMC",
                      "Description": "Sacrifice Seal of Doom: Destroy target nonblack creature. It can't be regenerated.",
                      "GMNotes": "",
                      "Memo": "71d54ba3-91fe-4a14-8b99-c284b4c75013",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 500,
                      "CustomDeck": {
                        "5": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/8/e/8ed90da8-2642-4253-9cd6-f26465ce5ad2.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Plaguecrafter\nCreature  Human Shaman 3CMC",
                      "Description": "When Plaguecrafter enters the battlefield, each player sacrifices a creature or planeswalker. Each player who can't discards a card.\n[b]3/2[/b]",
                      "GMNotes": "",
                      "Memo": "2e3ee458-fa3f-4452-ab95-5a7fb5a0483b",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 600,
                      "CustomDeck": {
                        "6": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/0/9/0972aad9-c7a1-42e2-8d2f-aecbb5fd33b5.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Blood Ogre\nCreature  Ogre Warrior 3CMC",
                      "Description": "Bloodthirst 1 (If an opponent was dealt damage this turn, this creature enters the battlefield with a +1/+1 counter on it.)\nFirst strike (This creature deals combat damage before creatures without first strike.)\n[b]2/2[/b]",
                      "GMNotes": "",
                      "Memo": "8bbe3f0d-41d0-4c58-ad65-6675a234cad3",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 700,
                      "CustomDeck": {
                        "7": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/b/c/bc1db7d4-7955-43c7-95c4-69d64493693d.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Curse of Opulence\nEnchantment  Aura Curse 1CMC",
                      "Description": "Enchant player\nWhenever enchanted player is attacked, create a Gold token. Each opponent attacking that player does the same. (A Gold token is an artifact with \"Sacrifice this artifact: Add one mana of any color.\")",
                      "GMNotes": "",
                      "Memo": "ba0d3df2-3acf-46d7-8d64-8d67d1579adc",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 800,
                      "CustomDeck": {
                        "8": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/6/6615d7f1-1ed6-43af-a916-6caa4bd35ca3.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Natural Connection\nInstant 3CMC",
                      "Description": "Search your library for a basic land card, put it onto the battlefield tapped, then shuffle.",
                      "GMNotes": "",
                      "Memo": "dc85c659-f2ed-4b13-807c-d853f74de410",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 900,
                      "CustomDeck": {
                        "9": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/d/3d26ba20-baa7-4258-9424-89660d11d41d.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Zendikar's Roil\nEnchantment 5CMC",
                      "Description": "Landfall  Whenever a land enters the battlefield under your control, create a 2/2 green Elemental creature token.",
                      "GMNotes": "",
                      "Memo": "a842cc2b-52eb-4dc5-86c6-6575c2ed913d",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1000,
                      "CustomDeck": {
                        "10": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/7/9/79298a0f-50ca-4bf5-b863-a60f07846970.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Hammer Dropper\nCreature  Giant Soldier 4CMC",
                      "Description": "Mentor (Whenever this creature attacks, put a +1/+1 counter on target attacking creature with lesser power.)\n[b]5/2[/b]",
                      "GMNotes": "",
                      "Memo": "088c9fa7-65ec-48c6-90cc-9087bc9df43e",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1100,
                      "CustomDeck": {
                        "11": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/2/8/28671684-b338-4d6c-8481-72ee8e59a320.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Rhonas's Monument\nLegendary Artifact 3CMC",
                      "Description": "Green creature spells you cast cost {1} less to cast.\nWhenever you cast a creature spell, target creature you control gets +2/+2 and gains trample until end of turn.",
                      "GMNotes": "",
                      "Memo": "b9a7c722-6b24-4383-ac6e-2a30f7834269",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1200,
                      "CustomDeck": {
                        "12": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/9/e95756ee-e76b-44e9-a13f-6125ee097ce7.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Birds of Paradise\nCreature  Bird 1CMC",
                      "Description": "Flying\n{T}: Add one mana of any color.\n[b]0/1[/b]",
                      "GMNotes": "",
                      "Memo": "d3a0b660-358c-41bd-9cd2-41fbf3491b1a",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1300,
                      "CustomDeck": {
                        "13": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/6/e6bc963e-042f-4cdc-be38-de8e386c00b3.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Bloom Tender\nCreature  Elf Druid 2CMC",
                      "Description": "{T}: For each color among permanents you control, add one mana of that color.\n[b]1/1[/b]",
                      "GMNotes": "",
                      "Memo": "0c23fefe-9891-4dd8-9bb1-eebdb3274e31",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1400,
                      "CustomDeck": {
                        "14": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/c/6c89c1fd-4717-4249-a74f-d9d4935c5753.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Krosan Adaptation\nEnchantment  Aura 1CMC",
                      "Description": "Enchant creature\nStorm (When you cast this spell, copy it for each spell cast before it this turn. You may choose new targets for the copies. The copies enter the battlefield as tokens.)\nEnchanted creature gets +1/+0 and has vigilance.",
                      "GMNotes": "",
                      "Memo": "6121d856-2dc9-4a43-b2b3-16af889eaa1f",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1500,
                      "CustomDeck": {
                        "15": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/0/60909727-0e87-4f58-a0e6-424eb81fff4f.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    }
                  ]
                }
              ]
            }
          ],
          "ChildObjects": [
            {
              "GUID": "c5ba3d",
              "Name": "Custom_Token",
              "Transform": {
                "posX": 0.009415796,
                "posY": 11.2064829,
                "posZ": -15.0850725,
                "rotX": 359.993225,
                "rotY": 0.0027701715,
                "rotZ": 0.000118303746,
                "scaleX": 6.53746653,
                "scaleY": 7.01005173,
                "scaleZ": 3.32304454
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "https://steamusercontent-a.akamaihd.net/ugc/10749807467837113954/1C4182B66F9B199F1F756D7EC2364993ED87C859/",
                "ImageSecondaryURL": "",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomToken": {
                  "Thickness": 0.2,
                  "MergeDistancePixels": 15.0,
                  "StandUp": true,
                  "Stackable": false
                }
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            }
          ]
        }
      ]
    },
    {
      "GUID": "7571b8",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -3.875,
        "posY": 2.587818,
        "posZ": 8.525,
        "rotX": 3.20165213E-06,
        "rotY": 179.998032,
        "rotZ": 6.027046E-08,
        "scaleX": 8.048128,
        "scaleY": 3.25563526,
        "scaleZ": 5.16360474
      },
      "Nickname": "[FFDA00]ANY[ffffff] MTG Booster Box",
      "Description": "SET: FIN",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/1666858152071990826/9AD455F2CBAEC01B2CBCDDB8B6DC4CE48D14B545/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 0,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "--- Global Configuration ---\r\nlocal config = {\r\n    backURL = 'https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/',\r\n    apiBaseURL = 'http://api.scryfall.com/cards/random?q='\r\n}\r\n\r\n--- Script State ---\r\nlocal boosterCount = 0\r\nlocal boosterDataCache = {}\r\nlocal cardStackDescription = \"\"\r\nlocal lastDescription = \"\"\r\nlocal pollInterval = 0.15  -- seconds, limit scryfall API requests to <10/sec\r\nlocal timePassed = 0\r\n\r\n--- Function Hooks ---\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n\r\n    local setCode = getSetCode()\r\n\r\n    leave_object.setName(setCode .. \" Booster\")\r\n    boosterCount = boosterCount + 1\r\n    local currentBoosterID = boosterCount\r\n\r\n    local queryTable = getScryfallQueryTable()\r\n    fetchDeckData(queryTable, currentBoosterID)\r\n\r\n    leave_object.createButton(makeBoosterLabelParams(\"generating \" .. setCode))\r\n\r\n    Wait.condition(\r\n            function()\r\n                Wait.condition(\r\n                        function()\r\n                            local objectData = leave_object.getData()\r\n                            objectData.ContainedObjects = { boosterDataCache[currentBoosterID] }\r\n                            leave_object.destruct()\r\n                            local generatedBooster = spawnObjectData({ data = objectData })\r\n\r\n                            generatedBooster.createButton(makeBoosterLabelParams(setCode .. \" Booster\"))\r\n                        end,\r\n                        function()\r\n                            return leave_object.resting\r\n                        end\r\n                )\r\n            end,\r\n            function()\r\n                return boosterDataCache[currentBoosterID] ~= nil\r\n            end\r\n    )\r\nend\r\n\r\nfunction onLoad()\r\n    local setCode = getSetCode()\r\n\r\n    self.createButton({\r\n        click_function = \"null\",\r\n        function_owner = self,\r\n        label = setCode .. \" Boosters\",\r\n        position = { 0.025, -0.22, 0.355 },\r\n        rotation = { 270, 0, 0 },\r\n        color = { 0.1, 0.1, 0.1, 1 },\r\n        font_color = { 0.8, 0.8, 0.8, 0.8 },\r\n        scale = { 0.25, 0.25, 0.7 },\r\n        width = 0,\r\n        height = 0,\r\n        font_size = 220,\r\n    })\r\n\r\n    self.createButton({\r\n        click_function = \"null\",\r\n        function_owner = self,\r\n        label = setCode,\r\n        position = { 0.025, 0.5, -0.5 },\r\n        rotation = { 270, 0, 0 },\r\n        color = { 0.1, 0.1, 0.1, 1 },\r\n        font_color = { 0.8, 0.8, 0.8, 0.8 },\r\n        scale = { 0.25, 0.25, 0.7 },\r\n        width = 0,\r\n        height = 0,\r\n        font_size = 500,\r\n    })\r\n\r\n    if #setCode > 3 then\r\n        self.editButton({ index = 0, font_size = 160 })\r\n        self.editButton({ index = 1, font_size = 250 })\r\n    end\r\nend\r\n\r\nfunction onUpdate()\r\n    timePassed = timePassed + Time.delta_time\r\n    if timePassed >= pollInterval then\r\n        timePassed = 0\r\n        checkDescription()\r\n        processRequestQueue()\r\n    end\r\nend\r\n\r\nfunction checkDescription()\r\n    local description = self.getDescription()\r\n\r\n    if description ~= lastDescription then\r\n        local setCode = getSetCode()\r\n        lastDescription = description\r\n        self.editButton({ index = 0, label = setCode .. \" Boosters\" })\r\n        self.editButton({ index = 1, label = setCode })\r\n\r\n        if #setCode > 3 then\r\n            self.editButton({ index = 0, font_size = 160 })\r\n            self.editButton({ index = 1, font_size = 250 })\r\n        else\r\n            self.editButton({ index = 0, font_size = 220 })\r\n            self.editButton({ index = 1, font_size = 500 })\r\n        end\r\n    end\r\nend\r\n\r\n--- Booster Generation Logic ---\r\nfunction makeBoosterLabelParams(label)\r\n    return {\r\n        label = label,\r\n        click_function = 'null',\r\n        function_owner = self,\r\n        position = { 0, 0.2, -1.7 },\r\n        rotation = { 0, 0, 0 },\r\n        width = 0,\r\n        height = 0,\r\n        font_size = 100,\r\n        color = { 0, 0, 0, 0 },\r\n        font_color = { 0, 0, 0, 95 },\r\n    }\r\nend\r\n\r\nfunction getSetCode()\r\n    local setCode = \"mystery\"\r\n\r\n    -- Trim leading/trailing whitespace from the captured text\r\n    -- This makes sure \" SET: M15 \" becomes \"M15\"\r\n    local captured_text = self.getDescription():match(\"SET:%s*([^\\n]+)\")\r\n    if captured_text then\r\n        setCode = captured_text:match(\"^%s*(.-)%s*$\")\r\n    end\r\n\r\n    if #setCode > 3 then\r\n        setCode = string.lower(setCode):gsub(\"^%l\", string.upper)\r\n    else\r\n        setCode = string.upper(setCode)\r\n    end\r\n\r\n    return setCode\r\nend\r\n\r\nlocal BoosterPacks = {}\r\nlocal apiSetPrefix = config.apiBaseURL .. 'is:booster+s:'\r\n\r\nlocal function getRandomRarity(mythicChance, rareChance, uncommonChance)\r\n    if math.random(1, mythicChance or 36) == 1 then\r\n        return 'r:mythic'\r\n    elseif math.random(1, rareChance or 8) == 1 then\r\n        return 'r:rare'\r\n    elseif math.random(1, uncommonChance or 4) == 1 then\r\n        return 'r:uncommon'\r\n    else\r\n        return 'r:common'\r\n    end\r\nend\r\n\r\nlocal function addCardTypeToPack(pack, cardType)\r\n    local randomIndex = math.random(#pack - 1, #pack)\r\n    for i = 13, #pack do\r\n        if randomIndex == i then\r\n            pack[i] = pack[i] .. '+' .. cardType\r\n        else\r\n            pack[i] = pack[i] .. '+-(' .. cardType .. ')'\r\n        end\r\n    end\r\n    return pack\r\nend\r\n\r\nlocal MasterpieceSets = {\r\n    bfz = 'exp', ogw = 'exp', kld = 'mps', aer = 'mps',\r\n    akh = 'mp2', hou = 'mp2', stx = 'sta',\r\n    tsp = 'tsb', mb1 = 'fmb1', mh2 = 'h1r'\r\n}\r\n\r\nfunction BoosterPacks.default(set)\r\n    local pack = {}\r\n    local url = apiSetPrefix .. set .. '+'\r\n    url = url:gsub('%+s:%(', '+(')\r\n\r\n    for c in ('wubrg'):gmatch('.') do\r\n        table.insert(pack, url .. 'r:common+c>=' .. c)\r\n    end\r\n    for i = 1, 6 do\r\n        table.insert(pack, url .. 'r:common+-t:basic')\r\n    end\r\n    for i = 1, 3 do\r\n        table.insert(pack, url .. 'r:uncommon')\r\n    end\r\n\r\n    table.insert(pack, url .. getRandomRarity(8, 1))\r\n\r\n    if MasterpieceSets[set] and math.random(1, 144) == 1 then\r\n        pack[#pack] = config.apiBaseURL .. 's:' .. MasterpieceSets[set]\r\n    end\r\n\r\n    return pack\r\nend\r\n\r\nfunction BoosterPacks.dom(set)\r\n    return addCardTypeToPack(BoosterPacks.default(set), 't:legendary')\r\nend\r\nfunction BoosterPacks.war(set)\r\n    return addCardTypeToPack(BoosterPacks.default(set), 't:planeswalker')\r\nend\r\nfunction BoosterPacks.znr(set)\r\n    return addCardTypeToPack(BoosterPacks.default(set), 't:land+(is:spell+or+pathway)')\r\nend\r\n\r\n-- Changed function name to be a valid Lua identifier for clarity.\r\nfunction BoosterPacks.twoxm(set)\r\n    local pack = BoosterPacks.default(set)\r\n    pack[11] = pack[#pack]\r\n    for i = 9, 10 do\r\n        pack[i] = apiSetPrefix .. '2xm' .. '+' .. getRandomRarity()\r\n    end\r\n    return pack\r\nend\r\n\r\nlocal function createReplacementSlotPack(pack, set, removeQuery, addQuery)\r\n    for i, v in pairs(pack) do\r\n        if i ~= 6 then\r\n            pack[i] = v .. removeQuery\r\n        else\r\n            pack[i] = apiSetPrefix .. set .. '+' .. getRandomRarity() .. addQuery\r\n        end\r\n    end\r\n    return pack\r\nend\r\n\r\nfor _, s in ipairs({ 'isd', 'dka', 'soi', 'emn' }) do\r\n    BoosterPacks[s] = function(set)\r\n        return createReplacementSlotPack(BoosterPacks.default(set), set, '+-is:transform', '+is:transform')\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'mid' }) do\r\n    BoosterPacks[s] = function(set)\r\n        local pack = BoosterPacks.default(set)\r\n        local transformIndex = math.random(#pack - 1, #pack)\r\n        for i, v in pairs(pack) do\r\n            if i == 6 or i == transformIndex then\r\n                pack[i] = v .. '+is:transform'\r\n            else\r\n                pack[i] = v .. '+-is:transform'\r\n            end\r\n        end\r\n        return pack\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'cns', 'cn2' }) do\r\n    BoosterPacks[s] = function(set)\r\n        return createReplacementSlotPack(BoosterPacks.default(set), set, '+-wm:conspiracy', '+wm:conspiracy')\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'rav', 'gpt', 'dis', 'rtr', 'gtc', 'dgm', 'grn', 'rna' }) do\r\n    BoosterPacks[s] = function(set)\r\n        return createReplacementSlotPack(BoosterPacks.default(set), set, '+-t:land', '+t:land+-t:basic')\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'ice', 'all', 'csp', 'mh1', 'khm' }) do\r\n    BoosterPacks[s] = function(set)\r\n        local pack = BoosterPacks.default(set)\r\n        pack[6] = apiSetPrefix .. set .. '+t:basic+t:snow'\r\n        return pack\r\n    end\r\nend\r\n\r\nBoosterPacks.mystery = function()\r\n    local urlTable = {}\r\n    local urlPrefix = config.apiBaseURL .. 'set:mb1+'\r\n    for _, c in ipairs({ 'w', 'u', 'b', 'r', 'g' }) do\r\n        table.insert(urlTable, urlPrefix .. 'r<rare+c=' .. c)\r\n        table.insert(urlTable, urlPrefix .. 'r<rare+c=' .. c)\r\n    end\r\n    table.insert(urlTable, urlPrefix .. 'c:m+r<rare')\r\n    table.insert(urlTable, urlPrefix .. 'c:c+r<rare')\r\n    table.insert(urlTable, urlPrefix .. 'r>=rare+frame:2015')\r\n    table.insert(urlTable, urlPrefix .. 'r>=rare+-frame:2015')\r\n    table.insert(urlTable, config.apiBaseURL .. 'set:cmb1')\r\n    return urlTable\r\nend\r\n\r\nBoosterPacks.spm = function()\r\n    local urlTable = {}\r\n    local urlPrefix = config.apiBaseURL .. 's:spm+'\r\n\r\n    for i = 1, math.random(6, 9) do\r\n        table.insert(urlTable, urlPrefix .. 'r:common')\r\n    end\r\n    for i = 1, math.random(3, 5) do\r\n        table.insert(urlTable, urlPrefix .. 'r:uncommon')\r\n    end\r\n    table.insert(urlTable, urlPrefix .. 't:land')\r\n\r\n    local numRares = 1\r\n    local rareRoll = math.random(1, 200)\r\n    if rareRoll == 1 then\r\n        numRares = 4\r\n    elseif rareRoll <= 7 then\r\n        numRares = 3\r\n    elseif rareRoll <= 70 then\r\n        numRares = 2\r\n    end\r\n    for i = 1, numRares do\r\n        table.insert(urlTable, urlPrefix .. getRandomRarity(8, 1))\r\n    end\r\n\r\n    table.insert(urlTable, urlPrefix .. getRandomRarity(nil, nil, 4))\r\n    return urlTable\r\nend\r\n\r\nBoosterPacks.stx = function()\r\n    local pack = {}\r\n    local url = apiSetPrefix .. 'stx+'\r\n    local archiveURL = config.apiBaseURL .. 'set:sta+r>common+'\r\n    table.insert(pack, archiveURL .. (math.random(2) == 1 and 'lang:en' or 'lang:ja'))\r\n    table.insert(pack, url .. 't:lesson+-r:u')\r\n    table.insert(pack, url .. getRandomRarity(8, 1))\r\n    for i = 1, 3 do\r\n        table.insert(pack, url .. 'r:u')\r\n    end\r\n    for _, c in ipairs({ 'w', 'u', 'b', 'r', 'g' }) do\r\n        table.insert(pack, url .. 'r:c+c:' .. c)\r\n    end\r\n    for i = 1, 3 do\r\n        table.insert(pack, url .. 'r:c+-t:basic')\r\n    end\r\n\r\n    if math.random(3) == 1 then\r\n        table.insert(pack, url)\r\n    else\r\n        table.insert(pack, url .. 'r:c+-t:basic')\r\n    end\r\n    return pack\r\nend\r\n\r\nlocal function createCustomBooster(setQuery, packStructure)\r\n    return function()\r\n        local pack = BoosterPacks.default(setQuery)\r\n        return packStructure(pack)\r\n    end\r\nend\r\n\r\nBoosterPacks.standard = createCustomBooster('f:standard', function(pack)\r\n    local url = config.apiBaseURL .. 'f:standard+'\r\n    local artSets = '(set:tafr+or+set:tstx+or+set:tkhm+or+set:tznr+or+set:sznr+or+set:tm21+or+set:tiko+or+set:tthb+or+set:teld)'\r\n    local artQuery = '(border:borderless+or+frame:showcase+or+frame:extendedart+or+set:plist+or+set:sta)'\r\n    table.insert(pack, url .. 't:basic')\r\n    table.insert(pack, config.apiBaseURL .. artSets)\r\n    if math.random(2) == 1 then\r\n        pack[#pack - 1] = url .. artQuery\r\n    end\r\n    if math.random(2) == 1 then\r\n        pack[#pack] = url .. artQuery\r\n    end\r\n    return pack\r\nend)\r\n\r\nBoosterPacks.conspiracy = createCustomBooster('(s:cns+or+s:cn2)', function(pack)\r\n    table.insert(pack, pack[#pack]:gsub('r:%S+', getRandomRarity(9, 6, 3)))\r\n    pack[6] = pack[math.random(11, 12)]\r\n    for i, _ in pairs(pack) do\r\n        local query = (i == 6 or i == #pack) and '+wm:conspiracy' or '+-wm:conspiracy'\r\n        pack[i] = pack[i] .. query\r\n    end\r\n    return pack\r\nend)\r\n\r\nBoosterPacks.innistrad = createCustomBooster('(s:isd+or+s:dka+or+s:avr+or+s:soi+or+s:emn+or+s:mid)', function(pack)\r\n    table.insert(pack, pack[#pack]:gsub('r:%S+', getRandomRarity(8, 1)))\r\n    pack[11] = pack[12]\r\n    for i, _ in pairs(pack) do\r\n        local query = (i == 6 or i == #pack or i == #pack - 2) and '+is:transform' or '+-is:transform'\r\n        pack[i] = pack[i] .. query\r\n    end\r\n    return pack\r\nend)\r\n\r\nBoosterPacks.ravnica = createCustomBooster('(s:rav+or+s:gpt+or+s:dis+or+s:rtr+or+s:gtc+or+s:dgm+or+s:grn+or+s:rna)', function(pack)\r\n    local landQuery = 't:land+-t:basic'\r\n    table.insert(pack, pack[#pack])\r\n    for i = 7, 9 do\r\n        pack[i] = pack[6] .. '+id>=2'\r\n    end\r\n    for i, _ in pairs(pack) do\r\n        if i == 6 or i == #pack then\r\n            pack[i] = pack[i]:gsub('r:%S+', getRandomRarity(9, 6, 3)) .. '+' .. landQuery\r\n        else\r\n            pack[i] = pack[i] .. '+-' .. landQuery\r\n        end\r\n    end\r\n    return pack\r\nend)\r\n\r\n-- Maps set codes that are not valid Lua identifiers to valid function names.\r\nlocal setCodeMapping = {\r\n    ['2xm'] = 'twoxm'\r\n}\r\n\r\n--- Rate Limiting State ---\r\nlocal requestQueue = {}\r\nlocal requestsThisMinute = 0\r\nlocal resetTime = os.time()\r\n\r\n-- enqueue requests instead of calling WebRequest.get directly\r\nfunction enqueueRequest(url, callback)\r\n    table.insert(requestQueue, { url = url, callback = callback })\r\nend\r\n\r\n-- process up to 5 requests per minute\r\nfunction processRequestQueue()\r\n    if #requestQueue == 0 then\r\n        return\r\n    end\r\n    local req = table.remove(requestQueue, 1)\r\n    WebRequest.get(req.url, req.callback)\r\nend\r\n\r\n--- Scryfall API and Deck Handling ---\r\nfunction getScryfallQueryTable()\r\n    local setCode = string.lower(getSetCode())\r\n    local mappedSetCode = setCodeMapping[setCode] or setCode\r\n    local packGenerator = BoosterPacks[mappedSetCode] or BoosterPacks.default\r\n    return packGenerator(setCode)\r\nend\r\n\r\nfunction fetchDeckData(urlTable, boosterID)\r\n    local deck = {\r\n        Transform = { posX = 0, posY = 0, posZ = 0, rotX = 0, rotY = 180, rotZ = 180, scaleX = 1, scaleY = 1, scaleZ = 1 },\r\n        Name = \"Deck\",\r\n        Nickname = getSetCode() .. \" Booster\",\r\n        Description = cardStackDescription,\r\n        DeckIDs = {},\r\n        CustomDeck = {},\r\n        ContainedObjects = {},\r\n    }\r\n\r\n    local requestsPending = #urlTable\r\n    local requestsCompleted = 0\r\n\r\n    for i, url in ipairs(urlTable) do\r\n        enqueueRequest(url, function(request)\r\n            if request.response_code ~= 200 then\r\n                local errorInfo = JSON.decode(request.text)\r\n                local message = errorInfo and errorInfo.details or (request.error .. \": \" .. request.text)\r\n                broadcastToAll(message, \"Red\")\r\n                print(message)\r\n            else\r\n                local cardData = createCardDataFromJSON(request.text, i)\r\n                if cardData then\r\n                    deck.ContainedObjects[i] = cardData\r\n                    deck.DeckIDs[i] = cardData.CardID\r\n                    deck.CustomDeck[i] = cardData.CustomDeck[i]\r\n                end\r\n            end\r\n            requestsCompleted = requestsCompleted + 1\r\n        end)\r\n    end\r\n\r\n    Wait.condition(\r\n            function()\r\n                if #deck.ContainedObjects ~= #urlTable then\r\n                    return\r\n                end\r\n\r\n                local cardNames = {}\r\n                local hasDuplicates = false\r\n                for _, card in ipairs(deck.ContainedObjects) do\r\n                    if cardNames[card.Nickname] then\r\n                        hasDuplicates = true\r\n                        break\r\n                    end\r\n                    cardNames[card.Nickname] = true\r\n                end\r\n\r\n                if hasDuplicates then\r\n                    fetchDeckData(urlTable, boosterID)\r\n                else\r\n                    boosterDataCache[boosterID] = deck\r\n                end\r\n            end,\r\n            function()\r\n                return requestsPending == requestsCompleted\r\n            end\r\n    )\r\nend\r\n\r\nfunction getCardOracleText(cardFace)\r\n    local powerToughness = \"\"\r\n    if cardFace.power then\r\n        powerToughness = '\\n[b]' .. cardFace.power .. '/' .. cardFace.toughness .. '[b]'\r\n    elseif cardFace.loyalty then\r\n        powerToughness = '\\n[b]' .. tostring(cardFace.loyalty) .. '[/b]'\r\n    end\r\n    return (cardFace.oracle_text or \"\") .. powerToughness\r\nend\r\n\r\nfunction createCardDataFromJSON(jsonString, cardIndex)\r\n    local card = JSON.decode(jsonString)\r\n    if not card or not card.name then\r\n        error(\"Failed to decode JSON: \" .. jsonString)\r\n        return\r\n    end\r\n\r\n    local cardName = \"\"\r\n    local cardOracle = \"\"\r\n    local faceURL = \"\"\r\n    local backData = nil\r\n    local imageQuality = 'large'\r\n    local cacheBuster = (card.image_status ~= 'highres_scan') and ('?' .. os.date(\"%Y%m%d\")) or \"\"\r\n\r\n    local function getFormattedName(face, typeSuffix)\r\n        return string.format('%s\\n%s %s CMC %s', face.name:gsub('\"', ''), face.type_line, tostring(card.cmc or face.cmc or 0), typeSuffix or \"\"):gsub('%s$', '')\r\n    end\r\n\r\n    if card.card_faces then\r\n        if card.image_uris then\r\n            -- Split cards like Adventure\r\n            cardName = getFormattedName(card.card_faces[1])\r\n            for i, face in ipairs(card.card_faces) do\r\n                cardOracle = cardOracle .. getFormattedName(face) .. '\\n' .. getCardOracleText(face)\r\n                if i < #card.card_faces then\r\n                    cardOracle = cardOracle .. '\\n'\r\n                end\r\n            end\r\n            faceURL = card.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n        else\r\n            -- Transform / DFC\r\n            local face = card.card_faces[1]\r\n            local back = card.card_faces[2]\r\n            cardName = getFormattedName(face, 'DFC')\r\n            cardOracle = getCardOracleText(face)\r\n            faceURL = face.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n            local backURL = back.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n\r\n            local backCardIndex = cardIndex + 100\r\n            backData = {\r\n                Transform = { posX = 0, posY = 0, posZ = 0, rotX = 0, rotY = 0, rotZ = 0, scaleX = 1, scaleY = 1, scaleZ = 1 },\r\n                Name = \"Card\",\r\n                Nickname = getFormattedName(back, 'DFC'),\r\n                Description = getCardOracleText(back),\r\n                Memo = card.oracle_id,\r\n                CardID = backCardIndex * 100,\r\n                CustomDeck = {\r\n                    [backCardIndex] = {\r\n                        FaceURL = backURL, BackURL = config.backURL, NumWidth = 1, NumHeight = 1,\r\n                        Type = 0, BackIsHidden = true, UniqueBack = false\r\n                    }\r\n                },\r\n            }\r\n        end\r\n    else\r\n        -- Normal card\r\n        cardName = getFormattedName(card)\r\n        cardOracle = getCardOracleText(card)\r\n        faceURL = card.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n    end\r\n\r\n    local cardData = {\r\n        Transform = { posX = 0, posY = 0, posZ = 0, rotX = 0, rotY = 0, rotZ = 0, scaleX = 1, scaleY = 1, scaleZ = 1 },\r\n        Name = \"Card\",\r\n        Nickname = cardName,\r\n        Description = cardOracle,\r\n        Memo = card.oracle_id,\r\n        CardID = cardIndex * 100,\r\n        CustomDeck = {\r\n            [cardIndex] = {\r\n                FaceURL = faceURL, BackURL = config.backURL, NumWidth = 1, NumHeight = 1,\r\n                Type = 0, BackIsHidden = true, UniqueBack = false\r\n            }\r\n        },\r\n    }\r\n\r\n    if backData then\r\n        cardData.States = { [2] = backData }\r\n    end\r\n\r\n    return cardData\r\nend\r\n\r\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "3482bf",
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -12.191412,
            "posY": 4.42412567,
            "posZ": 9.041547,
            "rotX": 1.33040712E-05,
            "rotY": 359.976929,
            "rotZ": 2.27627E-05,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Empty Booster",
          "Description": "",
          "GMNotes": "",
          "AltLookAngle": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          },
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/9779110528988615269/E9A65CD25256BFDB28AE4140FCB1D27BC71A5A8D/",
            "DiffuseURL": "https://steamusercontent-a.akamaihd.net/ugc/12555777445170015064/1F22F21DA19B1C5D668D761C2CA447889AE98A2A/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "Bag": {
            "Order": 0
          },
          "LuaScript": "function tryObjectEnter()\r\n    return false\r\nend\r\n\r\nfunction onObjectLeaveContainer(container)\r\n    if container ~= self then\r\n        return\r\n    end\r\n\r\n    -- wait one second, then destroy the container when it's empty\r\n    Wait.time(function()\r\n        Wait.condition(\r\n                function()\r\n                    if container ~= nil then\r\n                        container.destruct()\r\n                    end\r\n                end,\r\n                function()\r\n                    return container ~= nil and container.getQuantity() == 0\r\n                end\r\n        )\r\n    end, 1)\r\nend\r\n",
          "LuaScriptState": "",
          "XmlUI": "",
          "ContainedObjects": [
            {
              "GUID": "8cd2f5",
              "Name": "CardCustom",
              "Transform": {
                "posX": -8.525,
                "posY": 1.38543224,
                "posZ": -2.32499981,
                "rotX": 0.0001361478,
                "rotY": 180.01059,
                "rotZ": 179.9995,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 0.713235259,
                "g": 0.713235259,
                "b": 0.713235259
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": true,
              "Hands": true,
              "CardID": 24700,
              "SidewaysCard": false,
              "CustomDeck": {
                "247": {
                  "FaceURL": "https://steamusercontent-a.akamaihd.net/ugc/1869555422032369755/F9BD705BCF967068A85CC525B6879147EDB76E71/",
                  "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1869555872447018243/605ECC61FD27EE474845AA7CC2AAC1AB2984DECB/",
                  "NumWidth": 1,
                  "NumHeight": 1,
                  "BackIsHidden": true,
                  "UniqueBack": false,
                  "Type": 0
                }
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            }
          ]
        }
      ],
      "ChildObjects": [
        {
          "GUID": "f39cf0",
          "Name": "Custom_Model_Infinite_Bag",
          "Transform": {
            "posX": -1.37481074E-05,
            "posY": -0.50000006,
            "posZ": -0.07334592,
            "rotX": -5.5286984E-16,
            "rotY": -5.502838E-08,
            "rotZ": 2.654954E-25,
            "scaleX": 0.0338982977,
            "scaleY": 0.08542431,
            "scaleZ": 0.0289256871
          },
          "Nickname": "Booster Box",
          "Description": "Set: M14",
          "GMNotes": "",
          "AltLookAngle": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          },
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/12983479995982417794/E62DB17C9EF924DD8561E483368697A5C396D16F/",
            "DiffuseURL": "https://steamusercontent-a.akamaihd.net/ugc/17688090535400173324/590A8D3033394EA170B56B22C333819A1DD29CD1/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 7,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "LuaScript": "function onLoad()\r\n  --customize card-back image\r\n  backURL='https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/'\r\n\r\n  setCode='Mystery'\r\n  -- setCode='KLM'\r\n  -- setCode='STX'\r\n  -- setCode='ZNR'\r\n\r\n  cardStackName=setCode..\" Booster\"\r\n  cardStackDescription=\"\"\r\n\r\n  -------------- don't change these\r\n  nBooster=0\r\n  boosterDats={}\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n---- Booster Set Lookup Function\r\n---- should be correct for all sets?\r\n---- if not add special cases e.g. using the set:lower()=='mystery' example\r\n--------------------------------------------------------------------------------\r\nlocal apiSet='http://api.scryfall.com/cards/random?q=is:booster+s:'\r\nfunction rarity(m,r,u)\r\n  if math.random(1,m or 36)==1 then return'r:mythic'\r\n  elseif math.random(1,r or 8)==1 then return'r:rare'\r\n  elseif math.random(1,u or 4)==1 then return'r:uncommon'\r\n  else return'r:common'end end\r\nfunction typeCo(p,t)local n=math.random(#p-1,#p)for i=13,#p do if n==i then p[i]=p[i]..'+'..t else p[i]=p[i]..'+-('..t..')'end end return p end\r\n\r\nlocal Booster=setmetatable({\r\n  dom=function(p)return typeCo(p,'t:legendary')end,\r\n  war=function(p)return typeCo(p,'t:planeswalker')end,\r\n  znr=function(p)return typeCo(p,'t:land+(is:spell+or+pathway)')end,\r\n  tsp='tsb',mb1='fmb1',mh2='h1r',bfz='exp',ogw='exp',kld='mps',aer='mps',akh='mp2',hou='mp2',stx='sta'\r\n},{__call=function(t,set,n)\r\n  local pack,u={},apiSet..set..'+'\r\n  u=u:gsub('%+s:%(','+(')\r\n  if not n and t[set]and type(t[set])=='function'then\r\n    return t[set](t(set,true))\r\n  else\r\n    for c in('wubrg'):gmatch('.')do table.insert(pack,u..'r:common+c>='..c)end\r\n    for i=1,6 do table.insert(pack,u..'r:common+-t:basic')end\r\n    --masterpiece math\r\n    if not n and((t[set]and math.random(1,144)==1)or('tsp mb1 mh2'):find(set))then\r\n      pack[#pack]=apiSet..t[set]end\r\n    for i=1,3 do table.insert(pack,u..'r:uncommon')end\r\n    table.insert(pack,u..rarity(8,1))\r\n    return pack\r\n  end\r\nend})\r\n\r\n--ReplacementSlot\r\nfunction rSlot(p,s,a,b)for i,v in pairs(p)do if i~=6 then p[i]=v..a else p[i]=apiSet..s..'+'..rarity()..b end end return p end\r\n\r\n--Weird Boosters\r\nBooster['mystery']=function()\r\n  urlTable={}\r\n  -- MYSTERY BOOSTER (set mb1)\r\n  urlPrefix='http://api.scryfall.com/cards/random?q=set:mb1+'\r\n  -- slot 1-10: each Convention pack has 2 commons/uncommons of each color\r\n  for _,c in pairs({'w','u','b','r','g'}) do\r\n    table.insert(urlTable,urlPrefix..'r<rare+c='..c)\r\n    table.insert(urlTable,urlPrefix..'r<rare+c='..c)\r\n  end\r\n  -- slot 11: 1 multicolored common/uncommon\r\n  table.insert(urlTable,urlPrefix..'c:m+r<rare')\r\n  -- slot 12: 1 common/uncommon artifact/land\r\n  table.insert(urlTable,urlPrefix..'c:c+r<rare')\r\n  -- slot 13: 1 rare/mythic rare with the M15 card frame\r\n  table.insert(urlTable,urlPrefix..'r>=rare+frame:2015')\r\n  -- slot 14: one pre-M15 card in its original frame\r\n  table.insert(urlTable,urlPrefix..'r>=rare+-frame:2015')\r\n  -- slot 15: a pretend \"playtest card\" in the special slot that seems more like part of an Un-set\r\n  table.insert(urlTable,'http://api.scryfall.com/cards/random?q=set:cmb1')\r\n  return urlTable\r\nend\r\n\r\nBooster['stx']=function()\r\n  local pack,u={},apiSet..'stx+'\r\n  -- 1 mystical archive card  (Uncommon, Rare, or Mythic Rare, 50% chance japanese)\r\n  if math.random(2)==1 then table.insert(pack,'http://api.scryfall.com/cards/random?q=set:sta+r>common+lang:en')\r\n  else table.insert(pack,'http://api.scryfall.com/cards/random?q=set:sta+r>common+lang:ja') end\r\n  table.insert(pack,u..'t:lesson+-r:u')             -- 1 lesson card (Common, Rare, or Mythic Rare)\r\n  table.insert(pack,u..rarity(8,1))                 -- 1 rare (7/8 chance) or mythic rare (1/8 chance)\r\n  for i=1,3 do table.insert(pack,u..'r:u') end      -- 3 uncommons\r\n  for _,c in pairs({'w','u','b','r','g'}) do table.insert(pack,u..'r:c+c:'..c) end              -- 8 commons\r\n  for i=1,3 do table.insert(pack,u..'r:c+-t:basic') end\r\n  if math.random(3)==1 then table.insert(pack,u) else table.insert(pack,u..'r:c+-t:basic') end  -- 33% chance foil of any rarity (66% chance another common)\r\n  return pack\r\nend\r\n\r\nBooster['2xm']=function(p)p[11]=p[#p]for i=9,10 do p[i]=apiSet..'2xm'..'+'..rarity()end return p end\r\nfor s in('isd dka soi emn'):gmatch('%S+')do\r\n  Booster[s]=function(p)return rSlot(p,s,'+-is:transform','+is:transform')end end\r\nfor s in('mid'):gmatch('%S+')do--Crimson Moon\r\n  Booster[s]=function(p)local n=math.random(#p-1,#p)for i,v in pairs(p)do if i==6 or i==n then p[i]=p[i]..'+is:transform'else p[i]=p[i]..'+-is:transform'end end return p end end\r\nfor s in('cns cn2'):gmatch('%S+')do\r\n  Booster[s]=function(p)return rSlot(p,s,'+-wm:conspiracy','+wm:conspiracy')end end\r\nfor s in('rav gpt dis rtr gtc dgm grn rna'):gmatch('%S+')do\r\n  Booster[s]=function(p)return rSlot(p,s,'+-t:land','+t:land+-t:basic')end end\r\nfor s in('ice all csp mh1 khm'):gmatch('%S+')do\r\n  Booster[s]=function(p)p[6]=apiSet..s..'+t:basic+t:snow'return p end end\r\n\r\n--Custom Booster Packs\r\nBooster.standard=function(qTbl)\r\n  local pack,u={},'http://api.scryfall.com/cards/random?q=f:standard+'\r\n  for c in ('wubrg'):gmatch('.')do\r\n    table.insert(pack,u..'r:common+c:'..c)end\r\n  for i=1,5 do table.insert(pack,u..'r:common+-t:basic')end\r\n  for i=1,3 do table.insert(pack,u..'r:uncommon')end\r\n  table.insert(pack,u..rarity(8,1))\r\n  table.insert(pack,u..'t:basic')\r\n  table.insert(pack,u:sub(1,39)..'(set:tafr+or+set:tstx+or+set:tkhm+or+set:tznr+or+set:sznr+or+set:tm21+or+set:tiko+or+set:tthb+or+set:teld)')\r\n  for i=#pack-1,#pack do\r\n    if math.random(1,2)==1 then\r\n      pack[i]=u..'(border:borderless+or+frame:showcase+or+frame:extendedart+or+set:plist+or+set:sta)'\r\n    end end\r\n  return pack end\r\nBooster.conspiracy=function(qTbl)--wubrgCCCCCTUUURT\r\n  local p=Booster('(s:cns+or+s:cn2)')\r\n  local z=p[#p]:gsub('r:%S+',rarity(9,6,3))\r\n  table.insert(p,z)\r\n  p[6]=p[math.random(11,12)]\r\n  for i,s in pairs(p)do\r\n    if i==6 or i==#p then\r\n      p[i]=p[i]..'+wm:conspiracy'\r\n    else p[i]=p[i]..'+-wm:conspiracy'end end\r\n  return p end\r\nBooster.innistrad=function(qTbl)--wubrgDCCCCUUUDRD\r\n  local p=Booster('(s:isd+or+s:dka+or+s:avr+or+s:soi+or+s:emn+or+s:mid)')\r\n  local z=p[#p]:gsub('r:%S+',rarity(8,1))\r\n  table.insert(p,z)\r\n  p[11]=p[12]\r\n  for i,s in pairs(p)do\r\n    if i==6 or i==#p or i==#p-2 then\r\n      p[i]=p[i]..'+is:transform'\r\n    else p[i]=p[i]..'+-is:transform'end end\r\n  return p end\r\nBooster.ravnica=function(qTbl)--wubrgLmmmCCUUURL\r\n  local l,p='t:land+-t:basic',Booster('(s:rav+or+s:gpt+or+s:dis+or+s:rtr+or+s:gtc+or+s:dgm+or+s:grn+or+s:rna)')\r\n  table.insert(p,p[#p])\r\n  for i=7,9 do p[i]=p[6]..'+id>=2'end\r\n  for i,s in pairs(p)do\r\n    if i==6 or i==#p then\r\n      p[i]=p[i]:gsub('r:%S+',rarity(9,6,3))..'+'..l\r\n    else p[i]=p[i]..'+-'..l end end\r\n  return p end\r\n\r\nfunction getScryfallQueryTable()\r\n  urlTable=Booster(setCode:lower())\r\n  return urlTable\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n-- when a booster is taken out from the box, start scryfall query and replace booster contents\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n  if container ~= self then return end\r\n\r\n  leave_object.setName(cardStackName)\r\n\r\n  nBooster=nBooster+1\r\n  local boosterN=nBooster\r\n\r\n  urlTable=getScryfallQueryTable()\r\n  getDeckDat(urlTable,boosterN)\r\n\r\n  leave_object.createButton({\r\n    click_function='null',\r\n    function_owner=self,\r\n    label='generating\\ncards',\r\n    position={0,0.5,0},\r\n    rotation={0,90,0},\r\n    scale={0.5,0.5,0.5},\r\n    width=0,\r\n    height=0,\r\n    font_size=1000,\r\n    color={0,0,0,0},\r\n    font_color={1,1,1,100},\r\n  })\r\n\r\n  Wait.condition(function()\r\n    leave_object.clearButtons()\r\n    Wait.condition(function()\r\n      bDat = leave_object.getData()\r\n      bDat.ContainedObjects={boosterDats[boosterN]}\r\n      leave_object.destruct()\r\n      spawnObjectData({data=bDat})\r\n    end,\r\n    function()\r\n      -- print('obj resting')\r\n      return leave_object.resting\r\n    end)\r\n  end,function()\r\n    -- print('nil data')\r\n    return boosterDats[boosterN]~=nil\r\n  end)\r\nend\r\n\r\n\r\n-- takes in a table of scryfall query url's\r\n-- queries scryfall for the data\r\n-- generates TTS deckData object with the cards (saved to boosterDats[boosterN])\r\nfunction getDeckDat(urlTable,boosterN)\r\n\r\n  deckDat={\r\n    Transform={posX=0,posY=0,posZ=0,rotX=0,rotY=180,rotZ=180,scaleX=1,scaleY=1,scaleZ=1},\r\n    Name=\"Deck\",\r\n    Nickname=cardStackName,\r\n    Description=cardStackDescription,\r\n    DeckIDs={},\r\n    CustomDeck={},\r\n    ContainedObjects={},\r\n  }\r\n\r\n  local nLoading=0\r\n  local nLoaded=0\r\n\r\n  for n,url in ipairs(urlTable) do\r\n    nLoading=nLoading+1\r\n\r\n    WebRequest.get(url,function(wr)\r\n      cardDat=getCardDatFromJSON(wr.text,n)\r\n      deckDat.ContainedObjects[n]=cardDat\r\n      deckDat.DeckIDs[n]=cardDat.CardID      -- add card info into deckDat\r\n      deckDat.CustomDeck[n]=cardDat.CustomDeck[n]\r\n      nLoaded=nLoaded+1\r\n    end)\r\n\r\n  end\r\n\r\n  Wait.condition(function()   -- once all the queries come back from scryfall\r\n\r\n    -- check for doubles\r\n    local doubles=false\r\n    local names={}\r\n    for _,card in pairs(deckDat.ContainedObjects) do\r\n      for _,prevName in pairs(names) do\r\n        if card.Nickname==prevName then\r\n          doubles=true\r\n        end\r\n      end\r\n      table.insert(names,card.Nickname)\r\n    end\r\n\r\n    if doubles then   -- just redo the search\r\n      getDeckDat(urlTable,boosterN)\r\n    else              -- update the boosterDats\r\n      boosterDats[boosterN]=deckDat\r\n    end\r\n  end,\r\n  function() return nLoading==nLoaded end)\r\n\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n\r\nfunction getCardDatFromJSON(json,n)\r\n\r\n  local c=JSONdecode(json)\r\n\r\n  c.face=''\r\n  c.oracle=''\r\n  local qual='large'\r\n\r\n  local imagesuffix=''\r\n  if c.image_status~='highres_scan' then      -- cache buster for low quality images\r\n    imagesuffix='?'..tostring(os.date(\"%x\")):gsub('/', '')\r\n  end\r\n\r\n  --Check for card's spoiler image quality\r\n  --Oracle text Handling for Split then DFC then Normal\r\n  if c.card_faces and c.image_uris then\r\n    for i,f in ipairs(c.card_faces) do\r\n      if c.cmc then\r\n        f.name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..c.cmc..'CMC'\r\n      else\r\n        f.name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..f.cmc..'CMC'\r\n      end\r\n      if i==1 then cardName=f.name end\r\n      c.oracle=c.oracle..f.name..'\\n'..setOracle(f)..(i==#c.card_faces and''or'\\n')\r\n    end\r\n  elseif c.card_faces then\r\n    local f=c.card_faces[1]\r\n    if c.cmc then\r\n      cardName=f.name:gsub('\"','')..'\\n'..f.type_line..' '..c.cmc..'CMC DFC'\r\n    else\r\n      cardName=f.name:gsub('\"','')..'\\n'..f.type_line..' '..f.cmc..'CMC DFC'\r\n    end\r\n    c.oracle=setOracle(f)\r\n  else\r\n    cardName=c.name:gsub('\"','')..'\\n'..c.type_line..' '..c.cmc..'CMC'\r\n    c.oracle=setOracle(c)\r\n  end\r\n  local backDat=nil\r\n  --Image Handling\r\n  if c.card_faces and not c.image_uris then --DFC REWORKED for STATES!\r\n    local faceAddress=c.card_faces[1].image_uris.normal:gsub('%?.*',''):gsub('normal',qual)..imagesuffix\r\n    local backAddress=c.card_faces[2].image_uris.normal:gsub('%?.*',''):gsub('normal',qual)..imagesuffix\r\n    if faceAddress:find('/back/') and backAddress:find('/front/') then\r\n      local temp=faceAddress;faceAddress=backAddress;backAddress=temp\r\n    end\r\n    c.face=faceAddress\r\n    local f=c.card_faces[2]\r\n    local name\r\n    if c.cmc then\r\n      name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..c.cmc..'CMC DFC'\r\n    else\r\n      name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..f.cmc..'CMC DFC'\r\n    end\r\n    local oracle=setOracle(f)\r\n    local b=n+100\r\n    backDat={\r\n      Transform={posX=0,posY=0,posZ=0,rotX=0,rotY=0,rotZ=0,scaleX=1,scaleY=1,scaleZ=1},\r\n      Name=\"Card\",\r\n      Nickname=name,\r\n      Description=oracle,\r\n      Memo=c.oracle_id,\r\n      CardID=b*100,\r\n      CustomDeck={[b]={FaceURL=backAddress,BackURL=backURL,NumWidth=1,NumHeight=1,Type=0,BackIsHidden=true,UniqueBack=false}},\r\n    }\r\n  elseif c.image_uris then\r\n    c.face=c.image_uris.normal:gsub('%?.*',''):gsub('normal',qual)..imagesuffix\r\n    if cardName:lower():match('geralf') then\r\n      c.face=c.image_uris.normal:gsub('%?.*',''):gsub('normal','png'):gsub('jpg','png')..imagesuffix\r\n    end\r\n  end\r\n\r\n  local cardDat={\r\n    Transform={posX=0,posY=0,posZ=0,rotX=0,rotY=0,rotZ=0,scaleX=1,scaleY=1,scaleZ=1},\r\n    Name=\"Card\",\r\n    Nickname=cardName,\r\n    Description=c.oracle,\r\n    Memo=c.oracle_id,\r\n    CardID=n*100,\r\n    CustomDeck={[n]={FaceURL=c.face,BackURL=backURL,NumWidth=1,NumHeight=1,Type=0,BackIsHidden=true,UniqueBack=false}},\r\n  }\r\n\r\n  if backDat then\r\n    cardDat.States={[2]=backDat}\r\n  end\r\n  return cardDat\r\nend\r\n\r\n\r\nfunction setOracle(c)local n='\\n[b]'\r\n  if c.power then\r\n    n=n..c.power..'/'..c.toughness\r\n  elseif c.loyalty then\r\n    n=n..tostring(c.loyalty)\r\n  else\r\n    n=false\r\n  end\r\n  return c.oracle_text..(n and n..'[/b]'or'')\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n-- pie's manual \"JSONdecode\" for scryfall's \"object\":\"card\"\r\n--------------------------------------------------------------------------------\r\n\r\nnormal_card_keys={\r\n  'object',\r\n  'id',\r\n  'oracle_id',\r\n  'name',\r\n  'lang',\r\n  'layout',\r\n  'image_status',\r\n  'image_uris',\r\n  'mana_cost',\r\n  'cmc',\r\n  'type_line',\r\n  'oracle_text',\r\n  'loyalty',\r\n  'power',\r\n  'toughness',\r\n  'loyalty',\r\n  'legalities',\r\n  'set',\r\n  'rulings_uri',\r\n  'prints_search_uri',\r\n  'collector_number'\r\n}\r\n\r\nimage_uris_keys={    -- \"image_uris\":{\r\n  'small',\r\n  'normal',\r\n  'large',\r\n  'png',\r\n  'art_crop',\r\n  'border_crop',\r\n}\r\n\r\nlegalities_keys={    -- \"legalities\":{\r\n  'standard',\r\n  'future',\r\n  'historic',\r\n  'gladiator',\r\n  'pioneer',\r\n  'modern',\r\n  'legacy',\r\n  'pauper',\r\n  'vintage',\r\n  'penny',\r\n  'commander',\r\n  'brawl',\r\n  'duel',\r\n  'oldschool',\r\n  'premodern',\r\n}\r\n\r\nrelated_card_keys={     -- \"all_parts\":[{\"object\":\"related_card\",\r\n  'id',\r\n  'component',\r\n  'name',\r\n  'type_line',\r\n  'uri',\r\n}\r\n\r\ncard_face_keys={        -- \"card_faces\":[{\"object\":\"card_face\",\r\n  'name',\r\n  'mana_cost',\r\n  'cmc',\r\n  'type_line',\r\n  'oracle_text',\r\n  'power',\r\n  'toughness',\r\n  'loyalty',\r\n  'image_uris',\r\n}\r\n\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\nfunction JSONdecode(txt)\r\n  local txtBeginning = txt:sub(1,16)\r\n  local jsonType = txtBeginning:match('{\"object\":\"(%w+)\"')\r\n\r\n  -- not scryfall? use normal JSON.decode\r\n  if not(jsonType=='card' or jsonType=='list') then\r\n    return JSON.decode(txt)\r\n  end\r\n\r\n  ------------------------------------------------------------------------------\r\n  -- parse list: extract each card, and parse it separately\r\n  -- used when one wants to decode a whole list\r\n  if jsonType=='list' then\r\n    local txtBeginning = txt:sub(1,80)\r\n    local nCards=txtBeginning:match('\"total_cards\":(%d+)')\r\n    if nCards==nil then\r\n      return JSON.decode(txt)\r\n    end\r\n    local cardStart=0\r\n    local cardEnd=0\r\n    local cardDats = {}\r\n    for i=1,nCards do     -- could insert max number cards to parse here\r\n      cardStart=string.find(txt,'{\"object\":\"card\"',cardEnd+1)\r\n      cardEnd = findClosingBracket(txt,cardStart)\r\n      local cardDat = JSONdecode(txt:sub(cardStart,cardEnd))\r\n      table.insert(cardDats,cardDat)\r\n    end\r\n    local dat = {object=\"list\",total_cards=nCards,data=cardDats}    --ignoring has_more...\r\n    return dat\r\n  end\r\n\r\n  ------------------------------------------------------------------------------\r\n  -- parse card\r\n\r\n  txt=txt:gsub('}',',}')    -- comma helps parsing last element in an array\r\n\r\n  local cardDat={}\r\n  local all_parts_i=string.find(txt,'\"all_parts\":')\r\n  local card_faces_i=string.find(txt,'\"card_faces\":')\r\n\r\n  -- if all_parts exist\r\n  if all_parts_i~=nil then\r\n    local st=string.find(txt,'%[',all_parts_i)\r\n    local en=findClosingBracket(txt,st)\r\n    local all_parts_txt = txt:sub(all_parts_i,en)\r\n    local all_parts={}\r\n    -- remove all_parts snip from the main text\r\n    txt=txt:sub(1,all_parts_i-1)..txt:sub(en+2,-1)\r\n    -- parse all_parts_txt for each related_card\r\n    st=1\r\n    local cardN=0\r\n    while st~=nil do\r\n      st=string.find(all_parts_txt,'{\"object\":\"related_card\"',st)\r\n      if st~=nil then\r\n        cardN=cardN+1\r\n        en=findClosingBracket(all_parts_txt,st)\r\n        local related_card_txt=all_parts_txt:sub(st,en)\r\n        st=en\r\n        local s,e=1,1\r\n        local related_card={}\r\n        for i,key in ipairs(related_card_keys) do\r\n          val,s=getKeyValue(related_card_txt,key,s)\r\n          related_card[key]=val\r\n        end\r\n        table.insert(all_parts,related_card)\r\n        if cardN>100 then break end   -- avoid inf loop if something goes strange\r\n      end\r\n      cardDat.all_parts=all_parts\r\n    end\r\n  end\r\n\r\n  -- if card_faces exist\r\n  if card_faces_i~=nil then\r\n    local st=string.find(txt,'%[',card_faces_i)\r\n    local en=findClosingBracket(txt,st)\r\n    local card_faces_txt = txt:sub(card_faces_i,en)\r\n    local card_faces={}\r\n    -- remove card_faces snip from the main text\r\n    txt=txt:sub(1,card_faces_i-1)..txt:sub(en+2,-1)\r\n\r\n    -- parse card_faces_txt for each card_face\r\n    st=1\r\n    local cardN=0\r\n    while st~=nil do\r\n      st=string.find(card_faces_txt,'{\"object\":\"card_face\"',st)\r\n      if st~=nil then\r\n        cardN=cardN+1\r\n        en=findClosingBracket(card_faces_txt,st)\r\n        local card_face_txt=card_faces_txt:sub(st,en)\r\n        st=en\r\n        local s,e=1,1\r\n        local card_face={}\r\n        for i,key in ipairs(card_face_keys) do\r\n          val,s=getKeyValue(card_face_txt,key,s)\r\n          card_face[key]=val\r\n        end\r\n        table.insert(card_faces,card_face)\r\n        if cardN>4 then break end   -- avoid inf loop if something goes strange\r\n      end\r\n      cardDat.card_faces=card_faces\r\n    end\r\n  end\r\n\r\n  -- normal card (or what's left of it after removing card_faces and all_parts)\r\n  st=1\r\n  for i,key in ipairs(normal_card_keys) do\r\n    val,st=getKeyValue(txt,key,st)\r\n    cardDat[key]=val\r\n  end\r\n\r\n  return cardDat\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n-- returns data for one card at a time from a scryfall's \"object\":\"list\"\r\nfunction getNextCardDatFromList(txt,startHere)\r\n\r\n  if startHere==nil then\r\n    startHere=1\r\n  end\r\n\r\n  local cardStart=string.find(txt,'{\"object\":\"card\"',startHere)\r\n  if cardStart==nil then\r\n    -- print('error: no more cards in list')\r\n    startHere=nil\r\n    return nil,nil,nil\r\n  end\r\n\r\n  local cardEnd = findClosingBracket(txt,cardStart)\r\n  if cardEnd==nil then\r\n    -- print('error: no more cards in list')\r\n    startHere=nil\r\n    return nil,nil,nil\r\n  end\r\n\r\n  -- startHere is not a local variable, so it's possible to just do:\r\n  -- getNextCardFromList(txt) and it will keep giving the next card or nil if there's no more\r\n  startHere=cardEnd+1\r\n\r\n  local cardDat = JSONdecode(txt:sub(cardStart,cardEnd))\r\n\r\n  return cardDat,cardStart,cardEnd\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\nfunction findClosingBracket(txt,st)   -- find paired {} or []\r\n  if st==nil then return nil end\r\n  local ob,cb='{','}'\r\n  local pattern='[{}]'\r\n  if txt:sub(st,st)=='[' then\r\n    ob,cb='[',']'\r\n    pattern='[%[%]]'\r\n  end\r\n  local txti=st\r\n  local nopen=1\r\n  while nopen>0 do\r\n    txti=string.find(txt,pattern,txti+1)\r\n    if txt:sub(txti,txti)==ob then\r\n      nopen=nopen+1\r\n    elseif txt:sub(txti,txti)==cb then\r\n      nopen=nopen-1\r\n    end\r\n  end\r\n  return txti\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\nfunction getKeyValue(txt,key,st)\r\n  local str='\"'..key..'\":'\r\n  local st=string.find(txt,str,st)\r\n  local en=nil\r\n  local value=nil\r\n  if st~=nil then\r\n    if key=='image_uris' then     -- special case for scryfall's image_uris table\r\n      value={}\r\n      local s=st\r\n      for i,k in ipairs(image_uris_keys) do\r\n        local val,s=getKeyValue(txt,k,s)\r\n        value[k]=val\r\n      end\r\n      en=s\r\n    elseif txt:sub(st+#str,st+#str)~='\"' then      -- not a string\r\n      en=string.find(txt,',\"',st+#str+1)\r\n      value=tonumber(txt:sub(st+#str,en-1))\r\n    else                                           -- a string\r\n      en=string.find(txt,'\",',st+#str+1)\r\n      value=txt:sub(st+#str+1,en-1):gsub('\\\\\"','\"'):gsub('\\\\n','\\n'):gsub(\"\\\\u(%x%x%x%x)\",function (x) return string.char(tonumber(x,16)) end)\r\n    end\r\n  end\r\n  if type(value)=='string' then\r\n    value=value:gsub(',}','}')    -- get rid of the previously inserted comma\r\n  end\r\n  return value,en\r\nend",
          "LuaScriptState": "",
          "XmlUI": "",
          "ContainedObjects": [
            {
              "GUID": "36dc1f",
              "Name": "Custom_Model_Bag",
              "Transform": {
                "posX": -2.96532932E-08,
                "posY": 3.1172986,
                "posZ": 6.101597E-07,
                "rotX": 0.00148047716,
                "rotY": 0.034782324,
                "rotZ": -0.0022447498,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Mystery Booster",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "CustomMesh": {
                "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/9779110528988615269/E9A65CD25256BFDB28AE4140FCB1D27BC71A5A8D/",
                "DiffuseURL": "https://steamusercontent-a.akamaihd.net/ugc/12555777445170015064/1F22F21DA19B1C5D668D761C2CA447889AE98A2A/",
                "NormalURL": "",
                "ColliderURL": "",
                "Convex": true,
                "MaterialIndex": 3,
                "TypeIndex": 6,
                "CustomShader": {
                  "SpecularColor": {
                    "r": 1.0,
                    "g": 1.0,
                    "b": 1.0
                  },
                  "SpecularIntensity": 0.0,
                  "SpecularSharpness": 2.0,
                  "FresnelStrength": 0.0
                },
                "CastShadows": true
              },
              "Bag": {
                "Order": 0
              },
              "LuaScript": "function tryObjectEnter(obj)\r\n  if obj.type=='Card' or obj.type=='Deck' then\r\n    return true\r\n  else\r\n    return false\r\n  end\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, object)\r\n  if container~=self then return end\r\n  if container.getQuantity()==0 then\r\n    Wait.time(function()\r\n      if container~=nil then\r\n        container.destruct()\r\n      end\r\n    end,2)\r\n  end\r\nend\r\n",
              "LuaScriptState": "",
              "XmlUI": "",
              "ContainedObjects": [
                {
                  "GUID": "",
                  "Name": "Deck",
                  "Transform": {
                    "posX": 0.0,
                    "posY": 0.0,
                    "posZ": 0.0,
                    "rotX": 0.0,
                    "rotY": 180.0,
                    "rotZ": 180.0,
                    "scaleX": 1.0,
                    "scaleY": 1.0,
                    "scaleZ": 1.0
                  },
                  "Nickname": "Mystery Booster",
                  "Description": "",
                  "GMNotes": "",
                  "AltLookAngle": {
                    "x": 0.0,
                    "y": 0.0,
                    "z": 0.0
                  },
                  "LayoutGroupSortIndex": 0,
                  "Value": 0,
                  "Locked": false,
                  "Grid": true,
                  "Snap": true,
                  "IgnoreFoW": false,
                  "MeasureMovement": false,
                  "DragSelectable": true,
                  "Autoraise": true,
                  "Sticky": true,
                  "Tooltip": true,
                  "GridProjection": false,
                  "DeckIDs": [
                    100,
                    200,
                    300,
                    400,
                    500,
                    600,
                    700,
                    800,
                    900,
                    1000,
                    1100,
                    1200,
                    1300,
                    1400,
                    1500
                  ],
                  "CustomDeck": {
                    "4": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/7/c7a6e64e-4a9d-4fab-b85c-e9c4e88bca2f.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "13": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/6/e6bc963e-042f-4cdc-be38-de8e386c00b3.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "1": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/2/c2ece04a-e6b3-4496-b5e2-1fe8875f1982.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "14": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/c/6c89c1fd-4717-4249-a74f-d9d4935c5753.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "9": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/d/3d26ba20-baa7-4258-9424-89660d11d41d.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "7": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/b/c/bc1db7d4-7955-43c7-95c4-69d64493693d.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "6": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/0/9/0972aad9-c7a1-42e2-8d2f-aecbb5fd33b5.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "8": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/6/6615d7f1-1ed6-43af-a916-6caa4bd35ca3.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "5": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/8/e/8ed90da8-2642-4253-9cd6-f26465ce5ad2.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "15": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/0/60909727-0e87-4f58-a0e6-424eb81fff4f.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "12": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/9/e95756ee-e76b-44e9-a13f-6125ee097ce7.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "3": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/d/1/d1f0d34b-ab98-4bb4-8795-58688bcf02b5.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "2": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/a/3ab2938e-a68f-4eb4-ae05-42f051677f15.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "10": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/7/9/79298a0f-50ca-4bf5-b863-a60f07846970.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "11": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/2/8/28671684-b338-4d6c-8481-72ee8e59a320.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    }
                  },
                  "LuaScript": "",
                  "LuaScriptState": "",
                  "XmlUI": "",
                  "ContainedObjects": [
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Hyena Umbra\nEnchantment  Aura 1CMC",
                      "Description": "Enchant creature\nEnchanted creature gets +1/+1 and has first strike.\nTotem armor (If enchanted creature would be destroyed, instead remove all damage from it and destroy this Aura.)",
                      "GMNotes": "",
                      "Memo": "354affb3-1be7-4a9e-91da-2989eb54f62d",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 100,
                      "CustomDeck": {
                        "1": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/2/c2ece04a-e6b3-4496-b5e2-1fe8875f1982.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Faithbearer Paladin\nCreature  Human Knight 5CMC",
                      "Description": "Lifelink (Damage dealt by this creature also causes you to gain that much life.)\n[b]3/4[/b]",
                      "GMNotes": "",
                      "Memo": "725dc451-cae4-4345-9741-6c58e5a1a1dc",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 200,
                      "CustomDeck": {
                        "2": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/a/3ab2938e-a68f-4eb4-ae05-42f051677f15.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Mistform Shrieker\nCreature  Illusion 5CMC",
                      "Description": "Flying\n{1}: Mistform Shrieker becomes the creature type of your choice until end of turn.\nMorph {3}{U}{U} (You may cast this card face down as a 2/2 creature for {3}. Turn it face up any time for its morph cost.)\n[b]3/3[/b]",
                      "GMNotes": "",
                      "Memo": "50fe31e9-473e-4d2f-b1b5-3eef3c7bb0e6",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 300,
                      "CustomDeck": {
                        "3": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/d/1/d1f0d34b-ab98-4bb4-8795-58688bcf02b5.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Ior Ruin Expedition\nEnchantment 2CMC",
                      "Description": "Landfall  Whenever a land enters the battlefield under your control, you may put a quest counter on Ior Ruin Expedition.\nRemove three quest counters from Ior Ruin Expedition and sacrifice it: Draw two cards.",
                      "GMNotes": "",
                      "Memo": "fc338ba2-c3a4-45d6-895f-af7f72bf7a94",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 400,
                      "CustomDeck": {
                        "4": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/7/c7a6e64e-4a9d-4fab-b85c-e9c4e88bca2f.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Seal of Doom\nEnchantment 3CMC",
                      "Description": "Sacrifice Seal of Doom: Destroy target nonblack creature. It can't be regenerated.",
                      "GMNotes": "",
                      "Memo": "71d54ba3-91fe-4a14-8b99-c284b4c75013",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 500,
                      "CustomDeck": {
                        "5": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/8/e/8ed90da8-2642-4253-9cd6-f26465ce5ad2.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Plaguecrafter\nCreature  Human Shaman 3CMC",
                      "Description": "When Plaguecrafter enters the battlefield, each player sacrifices a creature or planeswalker. Each player who can't discards a card.\n[b]3/2[/b]",
                      "GMNotes": "",
                      "Memo": "2e3ee458-fa3f-4452-ab95-5a7fb5a0483b",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 600,
                      "CustomDeck": {
                        "6": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/0/9/0972aad9-c7a1-42e2-8d2f-aecbb5fd33b5.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Blood Ogre\nCreature  Ogre Warrior 3CMC",
                      "Description": "Bloodthirst 1 (If an opponent was dealt damage this turn, this creature enters the battlefield with a +1/+1 counter on it.)\nFirst strike (This creature deals combat damage before creatures without first strike.)\n[b]2/2[/b]",
                      "GMNotes": "",
                      "Memo": "8bbe3f0d-41d0-4c58-ad65-6675a234cad3",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 700,
                      "CustomDeck": {
                        "7": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/b/c/bc1db7d4-7955-43c7-95c4-69d64493693d.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Curse of Opulence\nEnchantment  Aura Curse 1CMC",
                      "Description": "Enchant player\nWhenever enchanted player is attacked, create a Gold token. Each opponent attacking that player does the same. (A Gold token is an artifact with \"Sacrifice this artifact: Add one mana of any color.\")",
                      "GMNotes": "",
                      "Memo": "ba0d3df2-3acf-46d7-8d64-8d67d1579adc",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 800,
                      "CustomDeck": {
                        "8": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/6/6615d7f1-1ed6-43af-a916-6caa4bd35ca3.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Natural Connection\nInstant 3CMC",
                      "Description": "Search your library for a basic land card, put it onto the battlefield tapped, then shuffle.",
                      "GMNotes": "",
                      "Memo": "dc85c659-f2ed-4b13-807c-d853f74de410",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 900,
                      "CustomDeck": {
                        "9": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/d/3d26ba20-baa7-4258-9424-89660d11d41d.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Zendikar's Roil\nEnchantment 5CMC",
                      "Description": "Landfall  Whenever a land enters the battlefield under your control, create a 2/2 green Elemental creature token.",
                      "GMNotes": "",
                      "Memo": "a842cc2b-52eb-4dc5-86c6-6575c2ed913d",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1000,
                      "CustomDeck": {
                        "10": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/7/9/79298a0f-50ca-4bf5-b863-a60f07846970.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Hammer Dropper\nCreature  Giant Soldier 4CMC",
                      "Description": "Mentor (Whenever this creature attacks, put a +1/+1 counter on target attacking creature with lesser power.)\n[b]5/2[/b]",
                      "GMNotes": "",
                      "Memo": "088c9fa7-65ec-48c6-90cc-9087bc9df43e",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1100,
                      "CustomDeck": {
                        "11": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/2/8/28671684-b338-4d6c-8481-72ee8e59a320.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Rhonas's Monument\nLegendary Artifact 3CMC",
                      "Description": "Green creature spells you cast cost {1} less to cast.\nWhenever you cast a creature spell, target creature you control gets +2/+2 and gains trample until end of turn.",
                      "GMNotes": "",
                      "Memo": "b9a7c722-6b24-4383-ac6e-2a30f7834269",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1200,
                      "CustomDeck": {
                        "12": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/9/e95756ee-e76b-44e9-a13f-6125ee097ce7.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Birds of Paradise\nCreature  Bird 1CMC",
                      "Description": "Flying\n{T}: Add one mana of any color.\n[b]0/1[/b]",
                      "GMNotes": "",
                      "Memo": "d3a0b660-358c-41bd-9cd2-41fbf3491b1a",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1300,
                      "CustomDeck": {
                        "13": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/6/e6bc963e-042f-4cdc-be38-de8e386c00b3.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Bloom Tender\nCreature  Elf Druid 2CMC",
                      "Description": "{T}: For each color among permanents you control, add one mana of that color.\n[b]1/1[/b]",
                      "GMNotes": "",
                      "Memo": "0c23fefe-9891-4dd8-9bb1-eebdb3274e31",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1400,
                      "CustomDeck": {
                        "14": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/c/6c89c1fd-4717-4249-a74f-d9d4935c5753.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Krosan Adaptation\nEnchantment  Aura 1CMC",
                      "Description": "Enchant creature\nStorm (When you cast this spell, copy it for each spell cast before it this turn. You may choose new targets for the copies. The copies enter the battlefield as tokens.)\nEnchanted creature gets +1/+0 and has vigilance.",
                      "GMNotes": "",
                      "Memo": "6121d856-2dc9-4a43-b2b3-16af889eaa1f",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1500,
                      "CustomDeck": {
                        "15": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/0/60909727-0e87-4f58-a0e6-424eb81fff4f.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    }
                  ]
                }
              ]
            }
          ],
          "ChildObjects": [
            {
              "GUID": "c5ba3d",
              "Name": "Custom_Token",
              "Transform": {
                "posX": 0.009415796,
                "posY": 11.2064829,
                "posZ": -15.0850725,
                "rotX": 359.993225,
                "rotY": 0.0027701715,
                "rotZ": 0.000118303746,
                "scaleX": 6.53746653,
                "scaleY": 7.01005173,
                "scaleZ": 3.32304454
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "https://steamusercontent-a.akamaihd.net/ugc/10749807467837113954/1C4182B66F9B199F1F756D7EC2364993ED87C859/",
                "ImageSecondaryURL": "",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomToken": {
                  "Thickness": 0.2,
                  "MergeDistancePixels": 15.0,
                  "StandUp": true,
                  "Stackable": false
                }
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            }
          ]
        }
      ]
    },
    {
      "GUID": "7af7f5",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 5.42499971,
        "posY": 2.58781767,
        "posZ": 8.525,
        "rotX": -2.561367E-06,
        "rotY": 179.998016,
        "rotZ": -2.6459802E-06,
        "scaleX": 8.048128,
        "scaleY": 3.25563526,
        "scaleZ": 5.16360474
      },
      "Nickname": "[FFDA00]ANY[ffffff] MTG Booster Box",
      "Description": "SET: EOE",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/1666858152071990826/9AD455F2CBAEC01B2CBCDDB8B6DC4CE48D14B545/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 0,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "--- Global Configuration ---\r\nlocal config = {\r\n    backURL = 'https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/',\r\n    apiBaseURL = 'http://api.scryfall.com/cards/random?q='\r\n}\r\n\r\n--- Script State ---\r\nlocal boosterCount = 0\r\nlocal boosterDataCache = {}\r\nlocal cardStackDescription = \"\"\r\nlocal lastDescription = \"\"\r\nlocal pollInterval = 0.15  -- seconds, limit scryfall API requests to <10/sec\r\nlocal timePassed = 0\r\n\r\n--- Function Hooks ---\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n\r\n    local setCode = getSetCode()\r\n\r\n    leave_object.setName(setCode .. \" Booster\")\r\n    boosterCount = boosterCount + 1\r\n    local currentBoosterID = boosterCount\r\n\r\n    local queryTable = getScryfallQueryTable()\r\n    fetchDeckData(queryTable, currentBoosterID)\r\n\r\n    leave_object.createButton(makeBoosterLabelParams(\"generating \" .. setCode))\r\n\r\n    Wait.condition(\r\n            function()\r\n                Wait.condition(\r\n                        function()\r\n                            local objectData = leave_object.getData()\r\n                            objectData.ContainedObjects = { boosterDataCache[currentBoosterID] }\r\n                            leave_object.destruct()\r\n                            local generatedBooster = spawnObjectData({ data = objectData })\r\n\r\n                            generatedBooster.createButton(makeBoosterLabelParams(setCode .. \" Booster\"))\r\n                        end,\r\n                        function()\r\n                            return leave_object.resting\r\n                        end\r\n                )\r\n            end,\r\n            function()\r\n                return boosterDataCache[currentBoosterID] ~= nil\r\n            end\r\n    )\r\nend\r\n\r\nfunction onLoad()\r\n    local setCode = getSetCode()\r\n\r\n    self.createButton({\r\n        click_function = \"null\",\r\n        function_owner = self,\r\n        label = setCode .. \" Boosters\",\r\n        position = { 0.025, -0.22, 0.355 },\r\n        rotation = { 270, 0, 0 },\r\n        color = { 0.1, 0.1, 0.1, 1 },\r\n        font_color = { 0.8, 0.8, 0.8, 0.8 },\r\n        scale = { 0.25, 0.25, 0.7 },\r\n        width = 0,\r\n        height = 0,\r\n        font_size = 220,\r\n    })\r\n\r\n    self.createButton({\r\n        click_function = \"null\",\r\n        function_owner = self,\r\n        label = setCode,\r\n        position = { 0.025, 0.5, -0.5 },\r\n        rotation = { 270, 0, 0 },\r\n        color = { 0.1, 0.1, 0.1, 1 },\r\n        font_color = { 0.8, 0.8, 0.8, 0.8 },\r\n        scale = { 0.25, 0.25, 0.7 },\r\n        width = 0,\r\n        height = 0,\r\n        font_size = 500,\r\n    })\r\n\r\n    if #setCode > 3 then\r\n        self.editButton({ index = 0, font_size = 160 })\r\n        self.editButton({ index = 1, font_size = 250 })\r\n    end\r\nend\r\n\r\nfunction onUpdate()\r\n    timePassed = timePassed + Time.delta_time\r\n    if timePassed >= pollInterval then\r\n        timePassed = 0\r\n        checkDescription()\r\n        processRequestQueue()\r\n    end\r\nend\r\n\r\nfunction checkDescription()\r\n    local description = self.getDescription()\r\n\r\n    if description ~= lastDescription then\r\n        local setCode = getSetCode()\r\n        lastDescription = description\r\n        self.editButton({ index = 0, label = setCode .. \" Boosters\" })\r\n        self.editButton({ index = 1, label = setCode })\r\n\r\n        if #setCode > 3 then\r\n            self.editButton({ index = 0, font_size = 160 })\r\n            self.editButton({ index = 1, font_size = 250 })\r\n        else\r\n            self.editButton({ index = 0, font_size = 220 })\r\n            self.editButton({ index = 1, font_size = 500 })\r\n        end\r\n    end\r\nend\r\n\r\n--- Booster Generation Logic ---\r\nfunction makeBoosterLabelParams(label)\r\n    return {\r\n        label = label,\r\n        click_function = 'null',\r\n        function_owner = self,\r\n        position = { 0, 0.2, -1.7 },\r\n        rotation = { 0, 0, 0 },\r\n        width = 0,\r\n        height = 0,\r\n        font_size = 100,\r\n        color = { 0, 0, 0, 0 },\r\n        font_color = { 0, 0, 0, 95 },\r\n    }\r\nend\r\n\r\nfunction getSetCode()\r\n    local setCode = \"mystery\"\r\n\r\n    -- Trim leading/trailing whitespace from the captured text\r\n    -- This makes sure \" SET: M15 \" becomes \"M15\"\r\n    local captured_text = self.getDescription():match(\"SET:%s*([^\\n]+)\")\r\n    if captured_text then\r\n        setCode = captured_text:match(\"^%s*(.-)%s*$\")\r\n    end\r\n\r\n    if #setCode > 3 then\r\n        setCode = string.lower(setCode):gsub(\"^%l\", string.upper)\r\n    else\r\n        setCode = string.upper(setCode)\r\n    end\r\n\r\n    return setCode\r\nend\r\n\r\nlocal BoosterPacks = {}\r\nlocal apiSetPrefix = config.apiBaseURL .. 'is:booster+s:'\r\n\r\nlocal function getRandomRarity(mythicChance, rareChance, uncommonChance)\r\n    if math.random(1, mythicChance or 36) == 1 then\r\n        return 'r:mythic'\r\n    elseif math.random(1, rareChance or 8) == 1 then\r\n        return 'r:rare'\r\n    elseif math.random(1, uncommonChance or 4) == 1 then\r\n        return 'r:uncommon'\r\n    else\r\n        return 'r:common'\r\n    end\r\nend\r\n\r\nlocal function addCardTypeToPack(pack, cardType)\r\n    local randomIndex = math.random(#pack - 1, #pack)\r\n    for i = 13, #pack do\r\n        if randomIndex == i then\r\n            pack[i] = pack[i] .. '+' .. cardType\r\n        else\r\n            pack[i] = pack[i] .. '+-(' .. cardType .. ')'\r\n        end\r\n    end\r\n    return pack\r\nend\r\n\r\nlocal MasterpieceSets = {\r\n    bfz = 'exp', ogw = 'exp', kld = 'mps', aer = 'mps',\r\n    akh = 'mp2', hou = 'mp2', stx = 'sta',\r\n    tsp = 'tsb', mb1 = 'fmb1', mh2 = 'h1r'\r\n}\r\n\r\nfunction BoosterPacks.default(set)\r\n    local pack = {}\r\n    local url = apiSetPrefix .. set .. '+'\r\n    url = url:gsub('%+s:%(', '+(')\r\n\r\n    for c in ('wubrg'):gmatch('.') do\r\n        table.insert(pack, url .. 'r:common+c>=' .. c)\r\n    end\r\n    for i = 1, 6 do\r\n        table.insert(pack, url .. 'r:common+-t:basic')\r\n    end\r\n    for i = 1, 3 do\r\n        table.insert(pack, url .. 'r:uncommon')\r\n    end\r\n\r\n    table.insert(pack, url .. getRandomRarity(8, 1))\r\n\r\n    if MasterpieceSets[set] and math.random(1, 144) == 1 then\r\n        pack[#pack] = config.apiBaseURL .. 's:' .. MasterpieceSets[set]\r\n    end\r\n\r\n    return pack\r\nend\r\n\r\nfunction BoosterPacks.dom(set)\r\n    return addCardTypeToPack(BoosterPacks.default(set), 't:legendary')\r\nend\r\nfunction BoosterPacks.war(set)\r\n    return addCardTypeToPack(BoosterPacks.default(set), 't:planeswalker')\r\nend\r\nfunction BoosterPacks.znr(set)\r\n    return addCardTypeToPack(BoosterPacks.default(set), 't:land+(is:spell+or+pathway)')\r\nend\r\n\r\n-- Changed function name to be a valid Lua identifier for clarity.\r\nfunction BoosterPacks.twoxm(set)\r\n    local pack = BoosterPacks.default(set)\r\n    pack[11] = pack[#pack]\r\n    for i = 9, 10 do\r\n        pack[i] = apiSetPrefix .. '2xm' .. '+' .. getRandomRarity()\r\n    end\r\n    return pack\r\nend\r\n\r\nlocal function createReplacementSlotPack(pack, set, removeQuery, addQuery)\r\n    for i, v in pairs(pack) do\r\n        if i ~= 6 then\r\n            pack[i] = v .. removeQuery\r\n        else\r\n            pack[i] = apiSetPrefix .. set .. '+' .. getRandomRarity() .. addQuery\r\n        end\r\n    end\r\n    return pack\r\nend\r\n\r\nfor _, s in ipairs({ 'isd', 'dka', 'soi', 'emn' }) do\r\n    BoosterPacks[s] = function(set)\r\n        return createReplacementSlotPack(BoosterPacks.default(set), set, '+-is:transform', '+is:transform')\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'mid' }) do\r\n    BoosterPacks[s] = function(set)\r\n        local pack = BoosterPacks.default(set)\r\n        local transformIndex = math.random(#pack - 1, #pack)\r\n        for i, v in pairs(pack) do\r\n            if i == 6 or i == transformIndex then\r\n                pack[i] = v .. '+is:transform'\r\n            else\r\n                pack[i] = v .. '+-is:transform'\r\n            end\r\n        end\r\n        return pack\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'cns', 'cn2' }) do\r\n    BoosterPacks[s] = function(set)\r\n        return createReplacementSlotPack(BoosterPacks.default(set), set, '+-wm:conspiracy', '+wm:conspiracy')\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'rav', 'gpt', 'dis', 'rtr', 'gtc', 'dgm', 'grn', 'rna' }) do\r\n    BoosterPacks[s] = function(set)\r\n        return createReplacementSlotPack(BoosterPacks.default(set), set, '+-t:land', '+t:land+-t:basic')\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'ice', 'all', 'csp', 'mh1', 'khm' }) do\r\n    BoosterPacks[s] = function(set)\r\n        local pack = BoosterPacks.default(set)\r\n        pack[6] = apiSetPrefix .. set .. '+t:basic+t:snow'\r\n        return pack\r\n    end\r\nend\r\n\r\nBoosterPacks.mystery = function()\r\n    local urlTable = {}\r\n    local urlPrefix = config.apiBaseURL .. 'set:mb1+'\r\n    for _, c in ipairs({ 'w', 'u', 'b', 'r', 'g' }) do\r\n        table.insert(urlTable, urlPrefix .. 'r<rare+c=' .. c)\r\n        table.insert(urlTable, urlPrefix .. 'r<rare+c=' .. c)\r\n    end\r\n    table.insert(urlTable, urlPrefix .. 'c:m+r<rare')\r\n    table.insert(urlTable, urlPrefix .. 'c:c+r<rare')\r\n    table.insert(urlTable, urlPrefix .. 'r>=rare+frame:2015')\r\n    table.insert(urlTable, urlPrefix .. 'r>=rare+-frame:2015')\r\n    table.insert(urlTable, config.apiBaseURL .. 'set:cmb1')\r\n    return urlTable\r\nend\r\n\r\nBoosterPacks.spm = function()\r\n    local urlTable = {}\r\n    local urlPrefix = config.apiBaseURL .. 's:spm+'\r\n\r\n    for i = 1, math.random(6, 9) do\r\n        table.insert(urlTable, urlPrefix .. 'r:common')\r\n    end\r\n    for i = 1, math.random(3, 5) do\r\n        table.insert(urlTable, urlPrefix .. 'r:uncommon')\r\n    end\r\n    table.insert(urlTable, urlPrefix .. 't:land')\r\n\r\n    local numRares = 1\r\n    local rareRoll = math.random(1, 200)\r\n    if rareRoll == 1 then\r\n        numRares = 4\r\n    elseif rareRoll <= 7 then\r\n        numRares = 3\r\n    elseif rareRoll <= 70 then\r\n        numRares = 2\r\n    end\r\n    for i = 1, numRares do\r\n        table.insert(urlTable, urlPrefix .. getRandomRarity(8, 1))\r\n    end\r\n\r\n    table.insert(urlTable, urlPrefix .. getRandomRarity(nil, nil, 4))\r\n    return urlTable\r\nend\r\n\r\nBoosterPacks.stx = function()\r\n    local pack = {}\r\n    local url = apiSetPrefix .. 'stx+'\r\n    local archiveURL = config.apiBaseURL .. 'set:sta+r>common+'\r\n    table.insert(pack, archiveURL .. (math.random(2) == 1 and 'lang:en' or 'lang:ja'))\r\n    table.insert(pack, url .. 't:lesson+-r:u')\r\n    table.insert(pack, url .. getRandomRarity(8, 1))\r\n    for i = 1, 3 do\r\n        table.insert(pack, url .. 'r:u')\r\n    end\r\n    for _, c in ipairs({ 'w', 'u', 'b', 'r', 'g' }) do\r\n        table.insert(pack, url .. 'r:c+c:' .. c)\r\n    end\r\n    for i = 1, 3 do\r\n        table.insert(pack, url .. 'r:c+-t:basic')\r\n    end\r\n\r\n    if math.random(3) == 1 then\r\n        table.insert(pack, url)\r\n    else\r\n        table.insert(pack, url .. 'r:c+-t:basic')\r\n    end\r\n    return pack\r\nend\r\n\r\nlocal function createCustomBooster(setQuery, packStructure)\r\n    return function()\r\n        local pack = BoosterPacks.default(setQuery)\r\n        return packStructure(pack)\r\n    end\r\nend\r\n\r\nBoosterPacks.standard = createCustomBooster('f:standard', function(pack)\r\n    local url = config.apiBaseURL .. 'f:standard+'\r\n    local artSets = '(set:tafr+or+set:tstx+or+set:tkhm+or+set:tznr+or+set:sznr+or+set:tm21+or+set:tiko+or+set:tthb+or+set:teld)'\r\n    local artQuery = '(border:borderless+or+frame:showcase+or+frame:extendedart+or+set:plist+or+set:sta)'\r\n    table.insert(pack, url .. 't:basic')\r\n    table.insert(pack, config.apiBaseURL .. artSets)\r\n    if math.random(2) == 1 then\r\n        pack[#pack - 1] = url .. artQuery\r\n    end\r\n    if math.random(2) == 1 then\r\n        pack[#pack] = url .. artQuery\r\n    end\r\n    return pack\r\nend)\r\n\r\nBoosterPacks.conspiracy = createCustomBooster('(s:cns+or+s:cn2)', function(pack)\r\n    table.insert(pack, pack[#pack]:gsub('r:%S+', getRandomRarity(9, 6, 3)))\r\n    pack[6] = pack[math.random(11, 12)]\r\n    for i, _ in pairs(pack) do\r\n        local query = (i == 6 or i == #pack) and '+wm:conspiracy' or '+-wm:conspiracy'\r\n        pack[i] = pack[i] .. query\r\n    end\r\n    return pack\r\nend)\r\n\r\nBoosterPacks.innistrad = createCustomBooster('(s:isd+or+s:dka+or+s:avr+or+s:soi+or+s:emn+or+s:mid)', function(pack)\r\n    table.insert(pack, pack[#pack]:gsub('r:%S+', getRandomRarity(8, 1)))\r\n    pack[11] = pack[12]\r\n    for i, _ in pairs(pack) do\r\n        local query = (i == 6 or i == #pack or i == #pack - 2) and '+is:transform' or '+-is:transform'\r\n        pack[i] = pack[i] .. query\r\n    end\r\n    return pack\r\nend)\r\n\r\nBoosterPacks.ravnica = createCustomBooster('(s:rav+or+s:gpt+or+s:dis+or+s:rtr+or+s:gtc+or+s:dgm+or+s:grn+or+s:rna)', function(pack)\r\n    local landQuery = 't:land+-t:basic'\r\n    table.insert(pack, pack[#pack])\r\n    for i = 7, 9 do\r\n        pack[i] = pack[6] .. '+id>=2'\r\n    end\r\n    for i, _ in pairs(pack) do\r\n        if i == 6 or i == #pack then\r\n            pack[i] = pack[i]:gsub('r:%S+', getRandomRarity(9, 6, 3)) .. '+' .. landQuery\r\n        else\r\n            pack[i] = pack[i] .. '+-' .. landQuery\r\n        end\r\n    end\r\n    return pack\r\nend)\r\n\r\n-- Maps set codes that are not valid Lua identifiers to valid function names.\r\nlocal setCodeMapping = {\r\n    ['2xm'] = 'twoxm'\r\n}\r\n\r\n--- Rate Limiting State ---\r\nlocal requestQueue = {}\r\nlocal requestsThisMinute = 0\r\nlocal resetTime = os.time()\r\n\r\n-- enqueue requests instead of calling WebRequest.get directly\r\nfunction enqueueRequest(url, callback)\r\n    table.insert(requestQueue, { url = url, callback = callback })\r\nend\r\n\r\n-- process up to 5 requests per minute\r\nfunction processRequestQueue()\r\n    if #requestQueue == 0 then\r\n        return\r\n    end\r\n    local req = table.remove(requestQueue, 1)\r\n    WebRequest.get(req.url, req.callback)\r\nend\r\n\r\n--- Scryfall API and Deck Handling ---\r\nfunction getScryfallQueryTable()\r\n    local setCode = string.lower(getSetCode())\r\n    local mappedSetCode = setCodeMapping[setCode] or setCode\r\n    local packGenerator = BoosterPacks[mappedSetCode] or BoosterPacks.default\r\n    return packGenerator(setCode)\r\nend\r\n\r\nfunction fetchDeckData(urlTable, boosterID)\r\n    local deck = {\r\n        Transform = { posX = 0, posY = 0, posZ = 0, rotX = 0, rotY = 180, rotZ = 180, scaleX = 1, scaleY = 1, scaleZ = 1 },\r\n        Name = \"Deck\",\r\n        Nickname = getSetCode() .. \" Booster\",\r\n        Description = cardStackDescription,\r\n        DeckIDs = {},\r\n        CustomDeck = {},\r\n        ContainedObjects = {},\r\n    }\r\n\r\n    local requestsPending = #urlTable\r\n    local requestsCompleted = 0\r\n\r\n    for i, url in ipairs(urlTable) do\r\n        enqueueRequest(url, function(request)\r\n            if request.response_code ~= 200 then\r\n                local errorInfo = JSON.decode(request.text)\r\n                local message = errorInfo and errorInfo.details or (request.error .. \": \" .. request.text)\r\n                broadcastToAll(message, \"Red\")\r\n                print(message)\r\n            else\r\n                local cardData = createCardDataFromJSON(request.text, i)\r\n                if cardData then\r\n                    deck.ContainedObjects[i] = cardData\r\n                    deck.DeckIDs[i] = cardData.CardID\r\n                    deck.CustomDeck[i] = cardData.CustomDeck[i]\r\n                end\r\n            end\r\n            requestsCompleted = requestsCompleted + 1\r\n        end)\r\n    end\r\n\r\n    Wait.condition(\r\n            function()\r\n                if #deck.ContainedObjects ~= #urlTable then\r\n                    return\r\n                end\r\n\r\n                local cardNames = {}\r\n                local hasDuplicates = false\r\n                for _, card in ipairs(deck.ContainedObjects) do\r\n                    if cardNames[card.Nickname] then\r\n                        hasDuplicates = true\r\n                        break\r\n                    end\r\n                    cardNames[card.Nickname] = true\r\n                end\r\n\r\n                if hasDuplicates then\r\n                    fetchDeckData(urlTable, boosterID)\r\n                else\r\n                    boosterDataCache[boosterID] = deck\r\n                end\r\n            end,\r\n            function()\r\n                return requestsPending == requestsCompleted\r\n            end\r\n    )\r\nend\r\n\r\nfunction getCardOracleText(cardFace)\r\n    local powerToughness = \"\"\r\n    if cardFace.power then\r\n        powerToughness = '\\n[b]' .. cardFace.power .. '/' .. cardFace.toughness .. '[b]'\r\n    elseif cardFace.loyalty then\r\n        powerToughness = '\\n[b]' .. tostring(cardFace.loyalty) .. '[/b]'\r\n    end\r\n    return (cardFace.oracle_text or \"\") .. powerToughness\r\nend\r\n\r\nfunction createCardDataFromJSON(jsonString, cardIndex)\r\n    local card = JSON.decode(jsonString)\r\n    if not card or not card.name then\r\n        error(\"Failed to decode JSON: \" .. jsonString)\r\n        return\r\n    end\r\n\r\n    local cardName = \"\"\r\n    local cardOracle = \"\"\r\n    local faceURL = \"\"\r\n    local backData = nil\r\n    local imageQuality = 'large'\r\n    local cacheBuster = (card.image_status ~= 'highres_scan') and ('?' .. os.date(\"%Y%m%d\")) or \"\"\r\n\r\n    local function getFormattedName(face, typeSuffix)\r\n        return string.format('%s\\n%s %s CMC %s', face.name:gsub('\"', ''), face.type_line, tostring(card.cmc or face.cmc or 0), typeSuffix or \"\"):gsub('%s$', '')\r\n    end\r\n\r\n    if card.card_faces then\r\n        if card.image_uris then\r\n            -- Split cards like Adventure\r\n            cardName = getFormattedName(card.card_faces[1])\r\n            for i, face in ipairs(card.card_faces) do\r\n                cardOracle = cardOracle .. getFormattedName(face) .. '\\n' .. getCardOracleText(face)\r\n                if i < #card.card_faces then\r\n                    cardOracle = cardOracle .. '\\n'\r\n                end\r\n            end\r\n            faceURL = card.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n        else\r\n            -- Transform / DFC\r\n            local face = card.card_faces[1]\r\n            local back = card.card_faces[2]\r\n            cardName = getFormattedName(face, 'DFC')\r\n            cardOracle = getCardOracleText(face)\r\n            faceURL = face.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n            local backURL = back.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n\r\n            local backCardIndex = cardIndex + 100\r\n            backData = {\r\n                Transform = { posX = 0, posY = 0, posZ = 0, rotX = 0, rotY = 0, rotZ = 0, scaleX = 1, scaleY = 1, scaleZ = 1 },\r\n                Name = \"Card\",\r\n                Nickname = getFormattedName(back, 'DFC'),\r\n                Description = getCardOracleText(back),\r\n                Memo = card.oracle_id,\r\n                CardID = backCardIndex * 100,\r\n                CustomDeck = {\r\n                    [backCardIndex] = {\r\n                        FaceURL = backURL, BackURL = config.backURL, NumWidth = 1, NumHeight = 1,\r\n                        Type = 0, BackIsHidden = true, UniqueBack = false\r\n                    }\r\n                },\r\n            }\r\n        end\r\n    else\r\n        -- Normal card\r\n        cardName = getFormattedName(card)\r\n        cardOracle = getCardOracleText(card)\r\n        faceURL = card.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n    end\r\n\r\n    local cardData = {\r\n        Transform = { posX = 0, posY = 0, posZ = 0, rotX = 0, rotY = 0, rotZ = 0, scaleX = 1, scaleY = 1, scaleZ = 1 },\r\n        Name = \"Card\",\r\n        Nickname = cardName,\r\n        Description = cardOracle,\r\n        Memo = card.oracle_id,\r\n        CardID = cardIndex * 100,\r\n        CustomDeck = {\r\n            [cardIndex] = {\r\n                FaceURL = faceURL, BackURL = config.backURL, NumWidth = 1, NumHeight = 1,\r\n                Type = 0, BackIsHidden = true, UniqueBack = false\r\n            }\r\n        },\r\n    }\r\n\r\n    if backData then\r\n        cardData.States = { [2] = backData }\r\n    end\r\n\r\n    return cardData\r\nend\r\n\r\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "3482bf",
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -12.191412,
            "posY": 4.42412567,
            "posZ": 9.041547,
            "rotX": 1.33040712E-05,
            "rotY": 359.976929,
            "rotZ": 2.27627E-05,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Empty Booster",
          "Description": "",
          "GMNotes": "",
          "AltLookAngle": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          },
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/9779110528988615269/E9A65CD25256BFDB28AE4140FCB1D27BC71A5A8D/",
            "DiffuseURL": "https://steamusercontent-a.akamaihd.net/ugc/12555777445170015064/1F22F21DA19B1C5D668D761C2CA447889AE98A2A/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "Bag": {
            "Order": 0
          },
          "LuaScript": "function tryObjectEnter()\r\n    return false\r\nend\r\n\r\nfunction onObjectLeaveContainer(container)\r\n    if container ~= self then\r\n        return\r\n    end\r\n\r\n    -- wait one second, then destroy the container when it's empty\r\n    Wait.time(function()\r\n        Wait.condition(\r\n                function()\r\n                    if container ~= nil then\r\n                        container.destruct()\r\n                    end\r\n                end,\r\n                function()\r\n                    return container ~= nil and container.getQuantity() == 0\r\n                end\r\n        )\r\n    end, 1)\r\nend\r\n",
          "LuaScriptState": "",
          "XmlUI": "",
          "ContainedObjects": [
            {
              "GUID": "8cd2f5",
              "Name": "CardCustom",
              "Transform": {
                "posX": -8.525,
                "posY": 1.38543224,
                "posZ": -2.32499981,
                "rotX": 0.0001361478,
                "rotY": 180.01059,
                "rotZ": 179.9995,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 0.713235259,
                "g": 0.713235259,
                "b": 0.713235259
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": true,
              "Hands": true,
              "CardID": 24700,
              "SidewaysCard": false,
              "CustomDeck": {
                "247": {
                  "FaceURL": "https://steamusercontent-a.akamaihd.net/ugc/1869555422032369755/F9BD705BCF967068A85CC525B6879147EDB76E71/",
                  "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1869555872447018243/605ECC61FD27EE474845AA7CC2AAC1AB2984DECB/",
                  "NumWidth": 1,
                  "NumHeight": 1,
                  "BackIsHidden": true,
                  "UniqueBack": false,
                  "Type": 0
                }
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            }
          ]
        }
      ],
      "ChildObjects": [
        {
          "GUID": "f39cf0",
          "Name": "Custom_Model_Infinite_Bag",
          "Transform": {
            "posX": -1.37481074E-05,
            "posY": -0.50000006,
            "posZ": -0.07334592,
            "rotX": -5.5286984E-16,
            "rotY": -5.502838E-08,
            "rotZ": 2.654954E-25,
            "scaleX": 0.0338982977,
            "scaleY": 0.08542431,
            "scaleZ": 0.0289256871
          },
          "Nickname": "Booster Box",
          "Description": "Set: M14",
          "GMNotes": "",
          "AltLookAngle": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          },
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/12983479995982417794/E62DB17C9EF924DD8561E483368697A5C396D16F/",
            "DiffuseURL": "https://steamusercontent-a.akamaihd.net/ugc/17688090535400173324/590A8D3033394EA170B56B22C333819A1DD29CD1/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 7,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "LuaScript": "function onLoad()\r\n  --customize card-back image\r\n  backURL='https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/'\r\n\r\n  setCode='Mystery'\r\n  -- setCode='KLM'\r\n  -- setCode='STX'\r\n  -- setCode='ZNR'\r\n\r\n  cardStackName=setCode..\" Booster\"\r\n  cardStackDescription=\"\"\r\n\r\n  -------------- don't change these\r\n  nBooster=0\r\n  boosterDats={}\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n---- Booster Set Lookup Function\r\n---- should be correct for all sets?\r\n---- if not add special cases e.g. using the set:lower()=='mystery' example\r\n--------------------------------------------------------------------------------\r\nlocal apiSet='http://api.scryfall.com/cards/random?q=is:booster+s:'\r\nfunction rarity(m,r,u)\r\n  if math.random(1,m or 36)==1 then return'r:mythic'\r\n  elseif math.random(1,r or 8)==1 then return'r:rare'\r\n  elseif math.random(1,u or 4)==1 then return'r:uncommon'\r\n  else return'r:common'end end\r\nfunction typeCo(p,t)local n=math.random(#p-1,#p)for i=13,#p do if n==i then p[i]=p[i]..'+'..t else p[i]=p[i]..'+-('..t..')'end end return p end\r\n\r\nlocal Booster=setmetatable({\r\n  dom=function(p)return typeCo(p,'t:legendary')end,\r\n  war=function(p)return typeCo(p,'t:planeswalker')end,\r\n  znr=function(p)return typeCo(p,'t:land+(is:spell+or+pathway)')end,\r\n  tsp='tsb',mb1='fmb1',mh2='h1r',bfz='exp',ogw='exp',kld='mps',aer='mps',akh='mp2',hou='mp2',stx='sta'\r\n},{__call=function(t,set,n)\r\n  local pack,u={},apiSet..set..'+'\r\n  u=u:gsub('%+s:%(','+(')\r\n  if not n and t[set]and type(t[set])=='function'then\r\n    return t[set](t(set,true))\r\n  else\r\n    for c in('wubrg'):gmatch('.')do table.insert(pack,u..'r:common+c>='..c)end\r\n    for i=1,6 do table.insert(pack,u..'r:common+-t:basic')end\r\n    --masterpiece math\r\n    if not n and((t[set]and math.random(1,144)==1)or('tsp mb1 mh2'):find(set))then\r\n      pack[#pack]=apiSet..t[set]end\r\n    for i=1,3 do table.insert(pack,u..'r:uncommon')end\r\n    table.insert(pack,u..rarity(8,1))\r\n    return pack\r\n  end\r\nend})\r\n\r\n--ReplacementSlot\r\nfunction rSlot(p,s,a,b)for i,v in pairs(p)do if i~=6 then p[i]=v..a else p[i]=apiSet..s..'+'..rarity()..b end end return p end\r\n\r\n--Weird Boosters\r\nBooster['mystery']=function()\r\n  urlTable={}\r\n  -- MYSTERY BOOSTER (set mb1)\r\n  urlPrefix='http://api.scryfall.com/cards/random?q=set:mb1+'\r\n  -- slot 1-10: each Convention pack has 2 commons/uncommons of each color\r\n  for _,c in pairs({'w','u','b','r','g'}) do\r\n    table.insert(urlTable,urlPrefix..'r<rare+c='..c)\r\n    table.insert(urlTable,urlPrefix..'r<rare+c='..c)\r\n  end\r\n  -- slot 11: 1 multicolored common/uncommon\r\n  table.insert(urlTable,urlPrefix..'c:m+r<rare')\r\n  -- slot 12: 1 common/uncommon artifact/land\r\n  table.insert(urlTable,urlPrefix..'c:c+r<rare')\r\n  -- slot 13: 1 rare/mythic rare with the M15 card frame\r\n  table.insert(urlTable,urlPrefix..'r>=rare+frame:2015')\r\n  -- slot 14: one pre-M15 card in its original frame\r\n  table.insert(urlTable,urlPrefix..'r>=rare+-frame:2015')\r\n  -- slot 15: a pretend \"playtest card\" in the special slot that seems more like part of an Un-set\r\n  table.insert(urlTable,'http://api.scryfall.com/cards/random?q=set:cmb1')\r\n  return urlTable\r\nend\r\n\r\nBooster['stx']=function()\r\n  local pack,u={},apiSet..'stx+'\r\n  -- 1 mystical archive card  (Uncommon, Rare, or Mythic Rare, 50% chance japanese)\r\n  if math.random(2)==1 then table.insert(pack,'http://api.scryfall.com/cards/random?q=set:sta+r>common+lang:en')\r\n  else table.insert(pack,'http://api.scryfall.com/cards/random?q=set:sta+r>common+lang:ja') end\r\n  table.insert(pack,u..'t:lesson+-r:u')             -- 1 lesson card (Common, Rare, or Mythic Rare)\r\n  table.insert(pack,u..rarity(8,1))                 -- 1 rare (7/8 chance) or mythic rare (1/8 chance)\r\n  for i=1,3 do table.insert(pack,u..'r:u') end      -- 3 uncommons\r\n  for _,c in pairs({'w','u','b','r','g'}) do table.insert(pack,u..'r:c+c:'..c) end              -- 8 commons\r\n  for i=1,3 do table.insert(pack,u..'r:c+-t:basic') end\r\n  if math.random(3)==1 then table.insert(pack,u) else table.insert(pack,u..'r:c+-t:basic') end  -- 33% chance foil of any rarity (66% chance another common)\r\n  return pack\r\nend\r\n\r\nBooster['2xm']=function(p)p[11]=p[#p]for i=9,10 do p[i]=apiSet..'2xm'..'+'..rarity()end return p end\r\nfor s in('isd dka soi emn'):gmatch('%S+')do\r\n  Booster[s]=function(p)return rSlot(p,s,'+-is:transform','+is:transform')end end\r\nfor s in('mid'):gmatch('%S+')do--Crimson Moon\r\n  Booster[s]=function(p)local n=math.random(#p-1,#p)for i,v in pairs(p)do if i==6 or i==n then p[i]=p[i]..'+is:transform'else p[i]=p[i]..'+-is:transform'end end return p end end\r\nfor s in('cns cn2'):gmatch('%S+')do\r\n  Booster[s]=function(p)return rSlot(p,s,'+-wm:conspiracy','+wm:conspiracy')end end\r\nfor s in('rav gpt dis rtr gtc dgm grn rna'):gmatch('%S+')do\r\n  Booster[s]=function(p)return rSlot(p,s,'+-t:land','+t:land+-t:basic')end end\r\nfor s in('ice all csp mh1 khm'):gmatch('%S+')do\r\n  Booster[s]=function(p)p[6]=apiSet..s..'+t:basic+t:snow'return p end end\r\n\r\n--Custom Booster Packs\r\nBooster.standard=function(qTbl)\r\n  local pack,u={},'http://api.scryfall.com/cards/random?q=f:standard+'\r\n  for c in ('wubrg'):gmatch('.')do\r\n    table.insert(pack,u..'r:common+c:'..c)end\r\n  for i=1,5 do table.insert(pack,u..'r:common+-t:basic')end\r\n  for i=1,3 do table.insert(pack,u..'r:uncommon')end\r\n  table.insert(pack,u..rarity(8,1))\r\n  table.insert(pack,u..'t:basic')\r\n  table.insert(pack,u:sub(1,39)..'(set:tafr+or+set:tstx+or+set:tkhm+or+set:tznr+or+set:sznr+or+set:tm21+or+set:tiko+or+set:tthb+or+set:teld)')\r\n  for i=#pack-1,#pack do\r\n    if math.random(1,2)==1 then\r\n      pack[i]=u..'(border:borderless+or+frame:showcase+or+frame:extendedart+or+set:plist+or+set:sta)'\r\n    end end\r\n  return pack end\r\nBooster.conspiracy=function(qTbl)--wubrgCCCCCTUUURT\r\n  local p=Booster('(s:cns+or+s:cn2)')\r\n  local z=p[#p]:gsub('r:%S+',rarity(9,6,3))\r\n  table.insert(p,z)\r\n  p[6]=p[math.random(11,12)]\r\n  for i,s in pairs(p)do\r\n    if i==6 or i==#p then\r\n      p[i]=p[i]..'+wm:conspiracy'\r\n    else p[i]=p[i]..'+-wm:conspiracy'end end\r\n  return p end\r\nBooster.innistrad=function(qTbl)--wubrgDCCCCUUUDRD\r\n  local p=Booster('(s:isd+or+s:dka+or+s:avr+or+s:soi+or+s:emn+or+s:mid)')\r\n  local z=p[#p]:gsub('r:%S+',rarity(8,1))\r\n  table.insert(p,z)\r\n  p[11]=p[12]\r\n  for i,s in pairs(p)do\r\n    if i==6 or i==#p or i==#p-2 then\r\n      p[i]=p[i]..'+is:transform'\r\n    else p[i]=p[i]..'+-is:transform'end end\r\n  return p end\r\nBooster.ravnica=function(qTbl)--wubrgLmmmCCUUURL\r\n  local l,p='t:land+-t:basic',Booster('(s:rav+or+s:gpt+or+s:dis+or+s:rtr+or+s:gtc+or+s:dgm+or+s:grn+or+s:rna)')\r\n  table.insert(p,p[#p])\r\n  for i=7,9 do p[i]=p[6]..'+id>=2'end\r\n  for i,s in pairs(p)do\r\n    if i==6 or i==#p then\r\n      p[i]=p[i]:gsub('r:%S+',rarity(9,6,3))..'+'..l\r\n    else p[i]=p[i]..'+-'..l end end\r\n  return p end\r\n\r\nfunction getScryfallQueryTable()\r\n  urlTable=Booster(setCode:lower())\r\n  return urlTable\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n-- when a booster is taken out from the box, start scryfall query and replace booster contents\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n  if container ~= self then return end\r\n\r\n  leave_object.setName(cardStackName)\r\n\r\n  nBooster=nBooster+1\r\n  local boosterN=nBooster\r\n\r\n  urlTable=getScryfallQueryTable()\r\n  getDeckDat(urlTable,boosterN)\r\n\r\n  leave_object.createButton({\r\n    click_function='null',\r\n    function_owner=self,\r\n    label='generating\\ncards',\r\n    position={0,0.5,0},\r\n    rotation={0,90,0},\r\n    scale={0.5,0.5,0.5},\r\n    width=0,\r\n    height=0,\r\n    font_size=1000,\r\n    color={0,0,0,0},\r\n    font_color={1,1,1,100},\r\n  })\r\n\r\n  Wait.condition(function()\r\n    leave_object.clearButtons()\r\n    Wait.condition(function()\r\n      bDat = leave_object.getData()\r\n      bDat.ContainedObjects={boosterDats[boosterN]}\r\n      leave_object.destruct()\r\n      spawnObjectData({data=bDat})\r\n    end,\r\n    function()\r\n      -- print('obj resting')\r\n      return leave_object.resting\r\n    end)\r\n  end,function()\r\n    -- print('nil data')\r\n    return boosterDats[boosterN]~=nil\r\n  end)\r\nend\r\n\r\n\r\n-- takes in a table of scryfall query url's\r\n-- queries scryfall for the data\r\n-- generates TTS deckData object with the cards (saved to boosterDats[boosterN])\r\nfunction getDeckDat(urlTable,boosterN)\r\n\r\n  deckDat={\r\n    Transform={posX=0,posY=0,posZ=0,rotX=0,rotY=180,rotZ=180,scaleX=1,scaleY=1,scaleZ=1},\r\n    Name=\"Deck\",\r\n    Nickname=cardStackName,\r\n    Description=cardStackDescription,\r\n    DeckIDs={},\r\n    CustomDeck={},\r\n    ContainedObjects={},\r\n  }\r\n\r\n  local nLoading=0\r\n  local nLoaded=0\r\n\r\n  for n,url in ipairs(urlTable) do\r\n    nLoading=nLoading+1\r\n\r\n    WebRequest.get(url,function(wr)\r\n      cardDat=getCardDatFromJSON(wr.text,n)\r\n      deckDat.ContainedObjects[n]=cardDat\r\n      deckDat.DeckIDs[n]=cardDat.CardID      -- add card info into deckDat\r\n      deckDat.CustomDeck[n]=cardDat.CustomDeck[n]\r\n      nLoaded=nLoaded+1\r\n    end)\r\n\r\n  end\r\n\r\n  Wait.condition(function()   -- once all the queries come back from scryfall\r\n\r\n    -- check for doubles\r\n    local doubles=false\r\n    local names={}\r\n    for _,card in pairs(deckDat.ContainedObjects) do\r\n      for _,prevName in pairs(names) do\r\n        if card.Nickname==prevName then\r\n          doubles=true\r\n        end\r\n      end\r\n      table.insert(names,card.Nickname)\r\n    end\r\n\r\n    if doubles then   -- just redo the search\r\n      getDeckDat(urlTable,boosterN)\r\n    else              -- update the boosterDats\r\n      boosterDats[boosterN]=deckDat\r\n    end\r\n  end,\r\n  function() return nLoading==nLoaded end)\r\n\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n\r\nfunction getCardDatFromJSON(json,n)\r\n\r\n  local c=JSONdecode(json)\r\n\r\n  c.face=''\r\n  c.oracle=''\r\n  local qual='large'\r\n\r\n  local imagesuffix=''\r\n  if c.image_status~='highres_scan' then      -- cache buster for low quality images\r\n    imagesuffix='?'..tostring(os.date(\"%x\")):gsub('/', '')\r\n  end\r\n\r\n  --Check for card's spoiler image quality\r\n  --Oracle text Handling for Split then DFC then Normal\r\n  if c.card_faces and c.image_uris then\r\n    for i,f in ipairs(c.card_faces) do\r\n      if c.cmc then\r\n        f.name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..c.cmc..'CMC'\r\n      else\r\n        f.name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..f.cmc..'CMC'\r\n      end\r\n      if i==1 then cardName=f.name end\r\n      c.oracle=c.oracle..f.name..'\\n'..setOracle(f)..(i==#c.card_faces and''or'\\n')\r\n    end\r\n  elseif c.card_faces then\r\n    local f=c.card_faces[1]\r\n    if c.cmc then\r\n      cardName=f.name:gsub('\"','')..'\\n'..f.type_line..' '..c.cmc..'CMC DFC'\r\n    else\r\n      cardName=f.name:gsub('\"','')..'\\n'..f.type_line..' '..f.cmc..'CMC DFC'\r\n    end\r\n    c.oracle=setOracle(f)\r\n  else\r\n    cardName=c.name:gsub('\"','')..'\\n'..c.type_line..' '..c.cmc..'CMC'\r\n    c.oracle=setOracle(c)\r\n  end\r\n  local backDat=nil\r\n  --Image Handling\r\n  if c.card_faces and not c.image_uris then --DFC REWORKED for STATES!\r\n    local faceAddress=c.card_faces[1].image_uris.normal:gsub('%?.*',''):gsub('normal',qual)..imagesuffix\r\n    local backAddress=c.card_faces[2].image_uris.normal:gsub('%?.*',''):gsub('normal',qual)..imagesuffix\r\n    if faceAddress:find('/back/') and backAddress:find('/front/') then\r\n      local temp=faceAddress;faceAddress=backAddress;backAddress=temp\r\n    end\r\n    c.face=faceAddress\r\n    local f=c.card_faces[2]\r\n    local name\r\n    if c.cmc then\r\n      name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..c.cmc..'CMC DFC'\r\n    else\r\n      name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..f.cmc..'CMC DFC'\r\n    end\r\n    local oracle=setOracle(f)\r\n    local b=n+100\r\n    backDat={\r\n      Transform={posX=0,posY=0,posZ=0,rotX=0,rotY=0,rotZ=0,scaleX=1,scaleY=1,scaleZ=1},\r\n      Name=\"Card\",\r\n      Nickname=name,\r\n      Description=oracle,\r\n      Memo=c.oracle_id,\r\n      CardID=b*100,\r\n      CustomDeck={[b]={FaceURL=backAddress,BackURL=backURL,NumWidth=1,NumHeight=1,Type=0,BackIsHidden=true,UniqueBack=false}},\r\n    }\r\n  elseif c.image_uris then\r\n    c.face=c.image_uris.normal:gsub('%?.*',''):gsub('normal',qual)..imagesuffix\r\n    if cardName:lower():match('geralf') then\r\n      c.face=c.image_uris.normal:gsub('%?.*',''):gsub('normal','png'):gsub('jpg','png')..imagesuffix\r\n    end\r\n  end\r\n\r\n  local cardDat={\r\n    Transform={posX=0,posY=0,posZ=0,rotX=0,rotY=0,rotZ=0,scaleX=1,scaleY=1,scaleZ=1},\r\n    Name=\"Card\",\r\n    Nickname=cardName,\r\n    Description=c.oracle,\r\n    Memo=c.oracle_id,\r\n    CardID=n*100,\r\n    CustomDeck={[n]={FaceURL=c.face,BackURL=backURL,NumWidth=1,NumHeight=1,Type=0,BackIsHidden=true,UniqueBack=false}},\r\n  }\r\n\r\n  if backDat then\r\n    cardDat.States={[2]=backDat}\r\n  end\r\n  return cardDat\r\nend\r\n\r\n\r\nfunction setOracle(c)local n='\\n[b]'\r\n  if c.power then\r\n    n=n..c.power..'/'..c.toughness\r\n  elseif c.loyalty then\r\n    n=n..tostring(c.loyalty)\r\n  else\r\n    n=false\r\n  end\r\n  return c.oracle_text..(n and n..'[/b]'or'')\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n-- pie's manual \"JSONdecode\" for scryfall's \"object\":\"card\"\r\n--------------------------------------------------------------------------------\r\n\r\nnormal_card_keys={\r\n  'object',\r\n  'id',\r\n  'oracle_id',\r\n  'name',\r\n  'lang',\r\n  'layout',\r\n  'image_status',\r\n  'image_uris',\r\n  'mana_cost',\r\n  'cmc',\r\n  'type_line',\r\n  'oracle_text',\r\n  'loyalty',\r\n  'power',\r\n  'toughness',\r\n  'loyalty',\r\n  'legalities',\r\n  'set',\r\n  'rulings_uri',\r\n  'prints_search_uri',\r\n  'collector_number'\r\n}\r\n\r\nimage_uris_keys={    -- \"image_uris\":{\r\n  'small',\r\n  'normal',\r\n  'large',\r\n  'png',\r\n  'art_crop',\r\n  'border_crop',\r\n}\r\n\r\nlegalities_keys={    -- \"legalities\":{\r\n  'standard',\r\n  'future',\r\n  'historic',\r\n  'gladiator',\r\n  'pioneer',\r\n  'modern',\r\n  'legacy',\r\n  'pauper',\r\n  'vintage',\r\n  'penny',\r\n  'commander',\r\n  'brawl',\r\n  'duel',\r\n  'oldschool',\r\n  'premodern',\r\n}\r\n\r\nrelated_card_keys={     -- \"all_parts\":[{\"object\":\"related_card\",\r\n  'id',\r\n  'component',\r\n  'name',\r\n  'type_line',\r\n  'uri',\r\n}\r\n\r\ncard_face_keys={        -- \"card_faces\":[{\"object\":\"card_face\",\r\n  'name',\r\n  'mana_cost',\r\n  'cmc',\r\n  'type_line',\r\n  'oracle_text',\r\n  'power',\r\n  'toughness',\r\n  'loyalty',\r\n  'image_uris',\r\n}\r\n\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\nfunction JSONdecode(txt)\r\n  local txtBeginning = txt:sub(1,16)\r\n  local jsonType = txtBeginning:match('{\"object\":\"(%w+)\"')\r\n\r\n  -- not scryfall? use normal JSON.decode\r\n  if not(jsonType=='card' or jsonType=='list') then\r\n    return JSON.decode(txt)\r\n  end\r\n\r\n  ------------------------------------------------------------------------------\r\n  -- parse list: extract each card, and parse it separately\r\n  -- used when one wants to decode a whole list\r\n  if jsonType=='list' then\r\n    local txtBeginning = txt:sub(1,80)\r\n    local nCards=txtBeginning:match('\"total_cards\":(%d+)')\r\n    if nCards==nil then\r\n      return JSON.decode(txt)\r\n    end\r\n    local cardStart=0\r\n    local cardEnd=0\r\n    local cardDats = {}\r\n    for i=1,nCards do     -- could insert max number cards to parse here\r\n      cardStart=string.find(txt,'{\"object\":\"card\"',cardEnd+1)\r\n      cardEnd = findClosingBracket(txt,cardStart)\r\n      local cardDat = JSONdecode(txt:sub(cardStart,cardEnd))\r\n      table.insert(cardDats,cardDat)\r\n    end\r\n    local dat = {object=\"list\",total_cards=nCards,data=cardDats}    --ignoring has_more...\r\n    return dat\r\n  end\r\n\r\n  ------------------------------------------------------------------------------\r\n  -- parse card\r\n\r\n  txt=txt:gsub('}',',}')    -- comma helps parsing last element in an array\r\n\r\n  local cardDat={}\r\n  local all_parts_i=string.find(txt,'\"all_parts\":')\r\n  local card_faces_i=string.find(txt,'\"card_faces\":')\r\n\r\n  -- if all_parts exist\r\n  if all_parts_i~=nil then\r\n    local st=string.find(txt,'%[',all_parts_i)\r\n    local en=findClosingBracket(txt,st)\r\n    local all_parts_txt = txt:sub(all_parts_i,en)\r\n    local all_parts={}\r\n    -- remove all_parts snip from the main text\r\n    txt=txt:sub(1,all_parts_i-1)..txt:sub(en+2,-1)\r\n    -- parse all_parts_txt for each related_card\r\n    st=1\r\n    local cardN=0\r\n    while st~=nil do\r\n      st=string.find(all_parts_txt,'{\"object\":\"related_card\"',st)\r\n      if st~=nil then\r\n        cardN=cardN+1\r\n        en=findClosingBracket(all_parts_txt,st)\r\n        local related_card_txt=all_parts_txt:sub(st,en)\r\n        st=en\r\n        local s,e=1,1\r\n        local related_card={}\r\n        for i,key in ipairs(related_card_keys) do\r\n          val,s=getKeyValue(related_card_txt,key,s)\r\n          related_card[key]=val\r\n        end\r\n        table.insert(all_parts,related_card)\r\n        if cardN>100 then break end   -- avoid inf loop if something goes strange\r\n      end\r\n      cardDat.all_parts=all_parts\r\n    end\r\n  end\r\n\r\n  -- if card_faces exist\r\n  if card_faces_i~=nil then\r\n    local st=string.find(txt,'%[',card_faces_i)\r\n    local en=findClosingBracket(txt,st)\r\n    local card_faces_txt = txt:sub(card_faces_i,en)\r\n    local card_faces={}\r\n    -- remove card_faces snip from the main text\r\n    txt=txt:sub(1,card_faces_i-1)..txt:sub(en+2,-1)\r\n\r\n    -- parse card_faces_txt for each card_face\r\n    st=1\r\n    local cardN=0\r\n    while st~=nil do\r\n      st=string.find(card_faces_txt,'{\"object\":\"card_face\"',st)\r\n      if st~=nil then\r\n        cardN=cardN+1\r\n        en=findClosingBracket(card_faces_txt,st)\r\n        local card_face_txt=card_faces_txt:sub(st,en)\r\n        st=en\r\n        local s,e=1,1\r\n        local card_face={}\r\n        for i,key in ipairs(card_face_keys) do\r\n          val,s=getKeyValue(card_face_txt,key,s)\r\n          card_face[key]=val\r\n        end\r\n        table.insert(card_faces,card_face)\r\n        if cardN>4 then break end   -- avoid inf loop if something goes strange\r\n      end\r\n      cardDat.card_faces=card_faces\r\n    end\r\n  end\r\n\r\n  -- normal card (or what's left of it after removing card_faces and all_parts)\r\n  st=1\r\n  for i,key in ipairs(normal_card_keys) do\r\n    val,st=getKeyValue(txt,key,st)\r\n    cardDat[key]=val\r\n  end\r\n\r\n  return cardDat\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n-- returns data for one card at a time from a scryfall's \"object\":\"list\"\r\nfunction getNextCardDatFromList(txt,startHere)\r\n\r\n  if startHere==nil then\r\n    startHere=1\r\n  end\r\n\r\n  local cardStart=string.find(txt,'{\"object\":\"card\"',startHere)\r\n  if cardStart==nil then\r\n    -- print('error: no more cards in list')\r\n    startHere=nil\r\n    return nil,nil,nil\r\n  end\r\n\r\n  local cardEnd = findClosingBracket(txt,cardStart)\r\n  if cardEnd==nil then\r\n    -- print('error: no more cards in list')\r\n    startHere=nil\r\n    return nil,nil,nil\r\n  end\r\n\r\n  -- startHere is not a local variable, so it's possible to just do:\r\n  -- getNextCardFromList(txt) and it will keep giving the next card or nil if there's no more\r\n  startHere=cardEnd+1\r\n\r\n  local cardDat = JSONdecode(txt:sub(cardStart,cardEnd))\r\n\r\n  return cardDat,cardStart,cardEnd\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\nfunction findClosingBracket(txt,st)   -- find paired {} or []\r\n  if st==nil then return nil end\r\n  local ob,cb='{','}'\r\n  local pattern='[{}]'\r\n  if txt:sub(st,st)=='[' then\r\n    ob,cb='[',']'\r\n    pattern='[%[%]]'\r\n  end\r\n  local txti=st\r\n  local nopen=1\r\n  while nopen>0 do\r\n    txti=string.find(txt,pattern,txti+1)\r\n    if txt:sub(txti,txti)==ob then\r\n      nopen=nopen+1\r\n    elseif txt:sub(txti,txti)==cb then\r\n      nopen=nopen-1\r\n    end\r\n  end\r\n  return txti\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\nfunction getKeyValue(txt,key,st)\r\n  local str='\"'..key..'\":'\r\n  local st=string.find(txt,str,st)\r\n  local en=nil\r\n  local value=nil\r\n  if st~=nil then\r\n    if key=='image_uris' then     -- special case for scryfall's image_uris table\r\n      value={}\r\n      local s=st\r\n      for i,k in ipairs(image_uris_keys) do\r\n        local val,s=getKeyValue(txt,k,s)\r\n        value[k]=val\r\n      end\r\n      en=s\r\n    elseif txt:sub(st+#str,st+#str)~='\"' then      -- not a string\r\n      en=string.find(txt,',\"',st+#str+1)\r\n      value=tonumber(txt:sub(st+#str,en-1))\r\n    else                                           -- a string\r\n      en=string.find(txt,'\",',st+#str+1)\r\n      value=txt:sub(st+#str+1,en-1):gsub('\\\\\"','\"'):gsub('\\\\n','\\n'):gsub(\"\\\\u(%x%x%x%x)\",function (x) return string.char(tonumber(x,16)) end)\r\n    end\r\n  end\r\n  if type(value)=='string' then\r\n    value=value:gsub(',}','}')    -- get rid of the previously inserted comma\r\n  end\r\n  return value,en\r\nend",
          "LuaScriptState": "",
          "XmlUI": "",
          "ContainedObjects": [
            {
              "GUID": "36dc1f",
              "Name": "Custom_Model_Bag",
              "Transform": {
                "posX": -2.96532932E-08,
                "posY": 3.1172986,
                "posZ": 6.101597E-07,
                "rotX": 0.00148047716,
                "rotY": 0.034782324,
                "rotZ": -0.0022447498,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Mystery Booster",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "CustomMesh": {
                "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/9779110528988615269/E9A65CD25256BFDB28AE4140FCB1D27BC71A5A8D/",
                "DiffuseURL": "https://steamusercontent-a.akamaihd.net/ugc/12555777445170015064/1F22F21DA19B1C5D668D761C2CA447889AE98A2A/",
                "NormalURL": "",
                "ColliderURL": "",
                "Convex": true,
                "MaterialIndex": 3,
                "TypeIndex": 6,
                "CustomShader": {
                  "SpecularColor": {
                    "r": 1.0,
                    "g": 1.0,
                    "b": 1.0
                  },
                  "SpecularIntensity": 0.0,
                  "SpecularSharpness": 2.0,
                  "FresnelStrength": 0.0
                },
                "CastShadows": true
              },
              "Bag": {
                "Order": 0
              },
              "LuaScript": "function tryObjectEnter(obj)\r\n  if obj.type=='Card' or obj.type=='Deck' then\r\n    return true\r\n  else\r\n    return false\r\n  end\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, object)\r\n  if container~=self then return end\r\n  if container.getQuantity()==0 then\r\n    Wait.time(function()\r\n      if container~=nil then\r\n        container.destruct()\r\n      end\r\n    end,2)\r\n  end\r\nend\r\n",
              "LuaScriptState": "",
              "XmlUI": "",
              "ContainedObjects": [
                {
                  "GUID": "",
                  "Name": "Deck",
                  "Transform": {
                    "posX": 0.0,
                    "posY": 0.0,
                    "posZ": 0.0,
                    "rotX": 0.0,
                    "rotY": 180.0,
                    "rotZ": 180.0,
                    "scaleX": 1.0,
                    "scaleY": 1.0,
                    "scaleZ": 1.0
                  },
                  "Nickname": "Mystery Booster",
                  "Description": "",
                  "GMNotes": "",
                  "AltLookAngle": {
                    "x": 0.0,
                    "y": 0.0,
                    "z": 0.0
                  },
                  "LayoutGroupSortIndex": 0,
                  "Value": 0,
                  "Locked": false,
                  "Grid": true,
                  "Snap": true,
                  "IgnoreFoW": false,
                  "MeasureMovement": false,
                  "DragSelectable": true,
                  "Autoraise": true,
                  "Sticky": true,
                  "Tooltip": true,
                  "GridProjection": false,
                  "DeckIDs": [
                    100,
                    200,
                    300,
                    400,
                    500,
                    600,
                    700,
                    800,
                    900,
                    1000,
                    1100,
                    1200,
                    1300,
                    1400,
                    1500
                  ],
                  "CustomDeck": {
                    "4": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/7/c7a6e64e-4a9d-4fab-b85c-e9c4e88bca2f.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "13": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/6/e6bc963e-042f-4cdc-be38-de8e386c00b3.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "1": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/2/c2ece04a-e6b3-4496-b5e2-1fe8875f1982.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "14": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/c/6c89c1fd-4717-4249-a74f-d9d4935c5753.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "9": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/d/3d26ba20-baa7-4258-9424-89660d11d41d.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "7": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/b/c/bc1db7d4-7955-43c7-95c4-69d64493693d.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "6": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/0/9/0972aad9-c7a1-42e2-8d2f-aecbb5fd33b5.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "8": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/6/6615d7f1-1ed6-43af-a916-6caa4bd35ca3.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "5": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/8/e/8ed90da8-2642-4253-9cd6-f26465ce5ad2.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "15": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/0/60909727-0e87-4f58-a0e6-424eb81fff4f.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "12": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/9/e95756ee-e76b-44e9-a13f-6125ee097ce7.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "3": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/d/1/d1f0d34b-ab98-4bb4-8795-58688bcf02b5.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "2": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/a/3ab2938e-a68f-4eb4-ae05-42f051677f15.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "10": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/7/9/79298a0f-50ca-4bf5-b863-a60f07846970.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "11": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/2/8/28671684-b338-4d6c-8481-72ee8e59a320.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    }
                  },
                  "LuaScript": "",
                  "LuaScriptState": "",
                  "XmlUI": "",
                  "ContainedObjects": [
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Hyena Umbra\nEnchantment  Aura 1CMC",
                      "Description": "Enchant creature\nEnchanted creature gets +1/+1 and has first strike.\nTotem armor (If enchanted creature would be destroyed, instead remove all damage from it and destroy this Aura.)",
                      "GMNotes": "",
                      "Memo": "354affb3-1be7-4a9e-91da-2989eb54f62d",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 100,
                      "CustomDeck": {
                        "1": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/2/c2ece04a-e6b3-4496-b5e2-1fe8875f1982.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Faithbearer Paladin\nCreature  Human Knight 5CMC",
                      "Description": "Lifelink (Damage dealt by this creature also causes you to gain that much life.)\n[b]3/4[/b]",
                      "GMNotes": "",
                      "Memo": "725dc451-cae4-4345-9741-6c58e5a1a1dc",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 200,
                      "CustomDeck": {
                        "2": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/a/3ab2938e-a68f-4eb4-ae05-42f051677f15.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Mistform Shrieker\nCreature  Illusion 5CMC",
                      "Description": "Flying\n{1}: Mistform Shrieker becomes the creature type of your choice until end of turn.\nMorph {3}{U}{U} (You may cast this card face down as a 2/2 creature for {3}. Turn it face up any time for its morph cost.)\n[b]3/3[/b]",
                      "GMNotes": "",
                      "Memo": "50fe31e9-473e-4d2f-b1b5-3eef3c7bb0e6",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 300,
                      "CustomDeck": {
                        "3": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/d/1/d1f0d34b-ab98-4bb4-8795-58688bcf02b5.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Ior Ruin Expedition\nEnchantment 2CMC",
                      "Description": "Landfall  Whenever a land enters the battlefield under your control, you may put a quest counter on Ior Ruin Expedition.\nRemove three quest counters from Ior Ruin Expedition and sacrifice it: Draw two cards.",
                      "GMNotes": "",
                      "Memo": "fc338ba2-c3a4-45d6-895f-af7f72bf7a94",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 400,
                      "CustomDeck": {
                        "4": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/7/c7a6e64e-4a9d-4fab-b85c-e9c4e88bca2f.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Seal of Doom\nEnchantment 3CMC",
                      "Description": "Sacrifice Seal of Doom: Destroy target nonblack creature. It can't be regenerated.",
                      "GMNotes": "",
                      "Memo": "71d54ba3-91fe-4a14-8b99-c284b4c75013",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 500,
                      "CustomDeck": {
                        "5": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/8/e/8ed90da8-2642-4253-9cd6-f26465ce5ad2.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Plaguecrafter\nCreature  Human Shaman 3CMC",
                      "Description": "When Plaguecrafter enters the battlefield, each player sacrifices a creature or planeswalker. Each player who can't discards a card.\n[b]3/2[/b]",
                      "GMNotes": "",
                      "Memo": "2e3ee458-fa3f-4452-ab95-5a7fb5a0483b",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 600,
                      "CustomDeck": {
                        "6": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/0/9/0972aad9-c7a1-42e2-8d2f-aecbb5fd33b5.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Blood Ogre\nCreature  Ogre Warrior 3CMC",
                      "Description": "Bloodthirst 1 (If an opponent was dealt damage this turn, this creature enters the battlefield with a +1/+1 counter on it.)\nFirst strike (This creature deals combat damage before creatures without first strike.)\n[b]2/2[/b]",
                      "GMNotes": "",
                      "Memo": "8bbe3f0d-41d0-4c58-ad65-6675a234cad3",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 700,
                      "CustomDeck": {
                        "7": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/b/c/bc1db7d4-7955-43c7-95c4-69d64493693d.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Curse of Opulence\nEnchantment  Aura Curse 1CMC",
                      "Description": "Enchant player\nWhenever enchanted player is attacked, create a Gold token. Each opponent attacking that player does the same. (A Gold token is an artifact with \"Sacrifice this artifact: Add one mana of any color.\")",
                      "GMNotes": "",
                      "Memo": "ba0d3df2-3acf-46d7-8d64-8d67d1579adc",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 800,
                      "CustomDeck": {
                        "8": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/6/6615d7f1-1ed6-43af-a916-6caa4bd35ca3.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Natural Connection\nInstant 3CMC",
                      "Description": "Search your library for a basic land card, put it onto the battlefield tapped, then shuffle.",
                      "GMNotes": "",
                      "Memo": "dc85c659-f2ed-4b13-807c-d853f74de410",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 900,
                      "CustomDeck": {
                        "9": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/d/3d26ba20-baa7-4258-9424-89660d11d41d.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Zendikar's Roil\nEnchantment 5CMC",
                      "Description": "Landfall  Whenever a land enters the battlefield under your control, create a 2/2 green Elemental creature token.",
                      "GMNotes": "",
                      "Memo": "a842cc2b-52eb-4dc5-86c6-6575c2ed913d",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1000,
                      "CustomDeck": {
                        "10": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/7/9/79298a0f-50ca-4bf5-b863-a60f07846970.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Hammer Dropper\nCreature  Giant Soldier 4CMC",
                      "Description": "Mentor (Whenever this creature attacks, put a +1/+1 counter on target attacking creature with lesser power.)\n[b]5/2[/b]",
                      "GMNotes": "",
                      "Memo": "088c9fa7-65ec-48c6-90cc-9087bc9df43e",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1100,
                      "CustomDeck": {
                        "11": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/2/8/28671684-b338-4d6c-8481-72ee8e59a320.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Rhonas's Monument\nLegendary Artifact 3CMC",
                      "Description": "Green creature spells you cast cost {1} less to cast.\nWhenever you cast a creature spell, target creature you control gets +2/+2 and gains trample until end of turn.",
                      "GMNotes": "",
                      "Memo": "b9a7c722-6b24-4383-ac6e-2a30f7834269",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1200,
                      "CustomDeck": {
                        "12": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/9/e95756ee-e76b-44e9-a13f-6125ee097ce7.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Birds of Paradise\nCreature  Bird 1CMC",
                      "Description": "Flying\n{T}: Add one mana of any color.\n[b]0/1[/b]",
                      "GMNotes": "",
                      "Memo": "d3a0b660-358c-41bd-9cd2-41fbf3491b1a",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1300,
                      "CustomDeck": {
                        "13": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/6/e6bc963e-042f-4cdc-be38-de8e386c00b3.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Bloom Tender\nCreature  Elf Druid 2CMC",
                      "Description": "{T}: For each color among permanents you control, add one mana of that color.\n[b]1/1[/b]",
                      "GMNotes": "",
                      "Memo": "0c23fefe-9891-4dd8-9bb1-eebdb3274e31",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1400,
                      "CustomDeck": {
                        "14": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/c/6c89c1fd-4717-4249-a74f-d9d4935c5753.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Krosan Adaptation\nEnchantment  Aura 1CMC",
                      "Description": "Enchant creature\nStorm (When you cast this spell, copy it for each spell cast before it this turn. You may choose new targets for the copies. The copies enter the battlefield as tokens.)\nEnchanted creature gets +1/+0 and has vigilance.",
                      "GMNotes": "",
                      "Memo": "6121d856-2dc9-4a43-b2b3-16af889eaa1f",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1500,
                      "CustomDeck": {
                        "15": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/0/60909727-0e87-4f58-a0e6-424eb81fff4f.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    }
                  ]
                }
              ]
            }
          ],
          "ChildObjects": [
            {
              "GUID": "c5ba3d",
              "Name": "Custom_Token",
              "Transform": {
                "posX": 0.009415796,
                "posY": 11.2064829,
                "posZ": -15.0850725,
                "rotX": 359.993225,
                "rotY": 0.0027701715,
                "rotZ": 0.000118303746,
                "scaleX": 6.53746653,
                "scaleY": 7.01005173,
                "scaleZ": 3.32304454
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "https://steamusercontent-a.akamaihd.net/ugc/10749807467837113954/1C4182B66F9B199F1F756D7EC2364993ED87C859/",
                "ImageSecondaryURL": "",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomToken": {
                  "Thickness": 0.2,
                  "MergeDistancePixels": 15.0,
                  "StandUp": true,
                  "Stackable": false
                }
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            }
          ]
        }
      ]
    },
    {
      "GUID": "0ae2e7",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 14.7249994,
        "posY": 2.587818,
        "posZ": 8.525,
        "rotX": 1.70753424E-06,
        "rotY": 179.998016,
        "rotZ": -7.522991E-07,
        "scaleX": 8.048128,
        "scaleY": 3.25563526,
        "scaleZ": 5.16360474
      },
      "Nickname": "[FFDA00]ANY[ffffff] MTG Booster Box",
      "Description": "SET: SPM",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/1666858152071990826/9AD455F2CBAEC01B2CBCDDB8B6DC4CE48D14B545/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 0,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "--- Global Configuration ---\r\nlocal config = {\r\n    backURL = 'https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/',\r\n    apiBaseURL = 'http://api.scryfall.com/cards/random?q='\r\n}\r\n\r\n--- Script State ---\r\nlocal boosterCount = 0\r\nlocal boosterDataCache = {}\r\nlocal cardStackDescription = \"\"\r\nlocal lastDescription = \"\"\r\nlocal pollInterval = 0.15  -- seconds, limit scryfall API requests to <10/sec\r\nlocal timePassed = 0\r\n\r\n--- Function Hooks ---\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n\r\n    local setCode = getSetCode()\r\n\r\n    leave_object.setName(setCode .. \" Booster\")\r\n    boosterCount = boosterCount + 1\r\n    local currentBoosterID = boosterCount\r\n\r\n    local queryTable = getScryfallQueryTable()\r\n    fetchDeckData(queryTable, currentBoosterID)\r\n\r\n    leave_object.createButton(makeBoosterLabelParams(\"generating \" .. setCode))\r\n\r\n    Wait.condition(\r\n            function()\r\n                Wait.condition(\r\n                        function()\r\n                            local objectData = leave_object.getData()\r\n                            objectData.ContainedObjects = { boosterDataCache[currentBoosterID] }\r\n                            leave_object.destruct()\r\n                            local generatedBooster = spawnObjectData({ data = objectData })\r\n\r\n                            generatedBooster.createButton(makeBoosterLabelParams(setCode .. \" Booster\"))\r\n                        end,\r\n                        function()\r\n                            return leave_object.resting\r\n                        end\r\n                )\r\n            end,\r\n            function()\r\n                return boosterDataCache[currentBoosterID] ~= nil\r\n            end\r\n    )\r\nend\r\n\r\nfunction onLoad()\r\n    local setCode = getSetCode()\r\n\r\n    self.createButton({\r\n        click_function = \"null\",\r\n        function_owner = self,\r\n        label = setCode .. \" Boosters\",\r\n        position = { 0.025, -0.22, 0.355 },\r\n        rotation = { 270, 0, 0 },\r\n        color = { 0.1, 0.1, 0.1, 1 },\r\n        font_color = { 0.8, 0.8, 0.8, 0.8 },\r\n        scale = { 0.25, 0.25, 0.7 },\r\n        width = 0,\r\n        height = 0,\r\n        font_size = 220,\r\n    })\r\n\r\n    self.createButton({\r\n        click_function = \"null\",\r\n        function_owner = self,\r\n        label = setCode,\r\n        position = { 0.025, 0.5, -0.5 },\r\n        rotation = { 270, 0, 0 },\r\n        color = { 0.1, 0.1, 0.1, 1 },\r\n        font_color = { 0.8, 0.8, 0.8, 0.8 },\r\n        scale = { 0.25, 0.25, 0.7 },\r\n        width = 0,\r\n        height = 0,\r\n        font_size = 500,\r\n    })\r\n\r\n    if #setCode > 3 then\r\n        self.editButton({ index = 0, font_size = 160 })\r\n        self.editButton({ index = 1, font_size = 250 })\r\n    end\r\nend\r\n\r\nfunction onUpdate()\r\n    timePassed = timePassed + Time.delta_time\r\n    if timePassed >= pollInterval then\r\n        timePassed = 0\r\n        checkDescription()\r\n        processRequestQueue()\r\n    end\r\nend\r\n\r\nfunction checkDescription()\r\n    local description = self.getDescription()\r\n\r\n    if description ~= lastDescription then\r\n        local setCode = getSetCode()\r\n        lastDescription = description\r\n        self.editButton({ index = 0, label = setCode .. \" Boosters\" })\r\n        self.editButton({ index = 1, label = setCode })\r\n\r\n        if #setCode > 3 then\r\n            self.editButton({ index = 0, font_size = 160 })\r\n            self.editButton({ index = 1, font_size = 250 })\r\n        else\r\n            self.editButton({ index = 0, font_size = 220 })\r\n            self.editButton({ index = 1, font_size = 500 })\r\n        end\r\n    end\r\nend\r\n\r\n--- Booster Generation Logic ---\r\nfunction makeBoosterLabelParams(label)\r\n    return {\r\n        label = label,\r\n        click_function = 'null',\r\n        function_owner = self,\r\n        position = { 0, 0.2, -1.7 },\r\n        rotation = { 0, 0, 0 },\r\n        width = 0,\r\n        height = 0,\r\n        font_size = 100,\r\n        color = { 0, 0, 0, 0 },\r\n        font_color = { 0, 0, 0, 95 },\r\n    }\r\nend\r\n\r\nfunction getSetCode()\r\n    local setCode = \"mystery\"\r\n\r\n    -- Trim leading/trailing whitespace from the captured text\r\n    -- This makes sure \" SET: M15 \" becomes \"M15\"\r\n    local captured_text = self.getDescription():match(\"SET:%s*([^\\n]+)\")\r\n    if captured_text then\r\n        setCode = captured_text:match(\"^%s*(.-)%s*$\")\r\n    end\r\n\r\n    if #setCode > 3 then\r\n        setCode = string.lower(setCode):gsub(\"^%l\", string.upper)\r\n    else\r\n        setCode = string.upper(setCode)\r\n    end\r\n\r\n    return setCode\r\nend\r\n\r\nlocal BoosterPacks = {}\r\nlocal apiSetPrefix = config.apiBaseURL .. 'is:booster+s:'\r\n\r\nlocal function getRandomRarity(mythicChance, rareChance, uncommonChance)\r\n    if math.random(1, mythicChance or 36) == 1 then\r\n        return 'r:mythic'\r\n    elseif math.random(1, rareChance or 8) == 1 then\r\n        return 'r:rare'\r\n    elseif math.random(1, uncommonChance or 4) == 1 then\r\n        return 'r:uncommon'\r\n    else\r\n        return 'r:common'\r\n    end\r\nend\r\n\r\nlocal function addCardTypeToPack(pack, cardType)\r\n    local randomIndex = math.random(#pack - 1, #pack)\r\n    for i = 13, #pack do\r\n        if randomIndex == i then\r\n            pack[i] = pack[i] .. '+' .. cardType\r\n        else\r\n            pack[i] = pack[i] .. '+-(' .. cardType .. ')'\r\n        end\r\n    end\r\n    return pack\r\nend\r\n\r\nlocal MasterpieceSets = {\r\n    bfz = 'exp', ogw = 'exp', kld = 'mps', aer = 'mps',\r\n    akh = 'mp2', hou = 'mp2', stx = 'sta',\r\n    tsp = 'tsb', mb1 = 'fmb1', mh2 = 'h1r'\r\n}\r\n\r\nfunction BoosterPacks.default(set)\r\n    local pack = {}\r\n    local url = apiSetPrefix .. set .. '+'\r\n    url = url:gsub('%+s:%(', '+(')\r\n\r\n    for c in ('wubrg'):gmatch('.') do\r\n        table.insert(pack, url .. 'r:common+c>=' .. c)\r\n    end\r\n    for i = 1, 6 do\r\n        table.insert(pack, url .. 'r:common+-t:basic')\r\n    end\r\n    for i = 1, 3 do\r\n        table.insert(pack, url .. 'r:uncommon')\r\n    end\r\n\r\n    table.insert(pack, url .. getRandomRarity(8, 1))\r\n\r\n    if MasterpieceSets[set] and math.random(1, 144) == 1 then\r\n        pack[#pack] = config.apiBaseURL .. 's:' .. MasterpieceSets[set]\r\n    end\r\n\r\n    return pack\r\nend\r\n\r\nfunction BoosterPacks.dom(set)\r\n    return addCardTypeToPack(BoosterPacks.default(set), 't:legendary')\r\nend\r\nfunction BoosterPacks.war(set)\r\n    return addCardTypeToPack(BoosterPacks.default(set), 't:planeswalker')\r\nend\r\nfunction BoosterPacks.znr(set)\r\n    return addCardTypeToPack(BoosterPacks.default(set), 't:land+(is:spell+or+pathway)')\r\nend\r\n\r\n-- Changed function name to be a valid Lua identifier for clarity.\r\nfunction BoosterPacks.twoxm(set)\r\n    local pack = BoosterPacks.default(set)\r\n    pack[11] = pack[#pack]\r\n    for i = 9, 10 do\r\n        pack[i] = apiSetPrefix .. '2xm' .. '+' .. getRandomRarity()\r\n    end\r\n    return pack\r\nend\r\n\r\nlocal function createReplacementSlotPack(pack, set, removeQuery, addQuery)\r\n    for i, v in pairs(pack) do\r\n        if i ~= 6 then\r\n            pack[i] = v .. removeQuery\r\n        else\r\n            pack[i] = apiSetPrefix .. set .. '+' .. getRandomRarity() .. addQuery\r\n        end\r\n    end\r\n    return pack\r\nend\r\n\r\nfor _, s in ipairs({ 'isd', 'dka', 'soi', 'emn' }) do\r\n    BoosterPacks[s] = function(set)\r\n        return createReplacementSlotPack(BoosterPacks.default(set), set, '+-is:transform', '+is:transform')\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'mid' }) do\r\n    BoosterPacks[s] = function(set)\r\n        local pack = BoosterPacks.default(set)\r\n        local transformIndex = math.random(#pack - 1, #pack)\r\n        for i, v in pairs(pack) do\r\n            if i == 6 or i == transformIndex then\r\n                pack[i] = v .. '+is:transform'\r\n            else\r\n                pack[i] = v .. '+-is:transform'\r\n            end\r\n        end\r\n        return pack\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'cns', 'cn2' }) do\r\n    BoosterPacks[s] = function(set)\r\n        return createReplacementSlotPack(BoosterPacks.default(set), set, '+-wm:conspiracy', '+wm:conspiracy')\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'rav', 'gpt', 'dis', 'rtr', 'gtc', 'dgm', 'grn', 'rna' }) do\r\n    BoosterPacks[s] = function(set)\r\n        return createReplacementSlotPack(BoosterPacks.default(set), set, '+-t:land', '+t:land+-t:basic')\r\n    end\r\nend\r\n\r\nfor _, s in ipairs({ 'ice', 'all', 'csp', 'mh1', 'khm' }) do\r\n    BoosterPacks[s] = function(set)\r\n        local pack = BoosterPacks.default(set)\r\n        pack[6] = apiSetPrefix .. set .. '+t:basic+t:snow'\r\n        return pack\r\n    end\r\nend\r\n\r\nBoosterPacks.mystery = function()\r\n    local urlTable = {}\r\n    local urlPrefix = config.apiBaseURL .. 'set:mb1+'\r\n    for _, c in ipairs({ 'w', 'u', 'b', 'r', 'g' }) do\r\n        table.insert(urlTable, urlPrefix .. 'r<rare+c=' .. c)\r\n        table.insert(urlTable, urlPrefix .. 'r<rare+c=' .. c)\r\n    end\r\n    table.insert(urlTable, urlPrefix .. 'c:m+r<rare')\r\n    table.insert(urlTable, urlPrefix .. 'c:c+r<rare')\r\n    table.insert(urlTable, urlPrefix .. 'r>=rare+frame:2015')\r\n    table.insert(urlTable, urlPrefix .. 'r>=rare+-frame:2015')\r\n    table.insert(urlTable, config.apiBaseURL .. 'set:cmb1')\r\n    return urlTable\r\nend\r\n\r\nBoosterPacks.spm = function()\r\n    local urlTable = {}\r\n    local urlPrefix = config.apiBaseURL .. 's:spm+'\r\n\r\n    for i = 1, math.random(6, 9) do\r\n        table.insert(urlTable, urlPrefix .. 'r:common')\r\n    end\r\n    for i = 1, math.random(3, 5) do\r\n        table.insert(urlTable, urlPrefix .. 'r:uncommon')\r\n    end\r\n    table.insert(urlTable, urlPrefix .. 't:land')\r\n\r\n    local numRares = 1\r\n    local rareRoll = math.random(1, 200)\r\n    if rareRoll == 1 then\r\n        numRares = 4\r\n    elseif rareRoll <= 7 then\r\n        numRares = 3\r\n    elseif rareRoll <= 70 then\r\n        numRares = 2\r\n    end\r\n    for i = 1, numRares do\r\n        table.insert(urlTable, urlPrefix .. getRandomRarity(8, 1))\r\n    end\r\n\r\n    table.insert(urlTable, urlPrefix .. getRandomRarity(nil, nil, 4))\r\n    return urlTable\r\nend\r\n\r\nBoosterPacks.stx = function()\r\n    local pack = {}\r\n    local url = apiSetPrefix .. 'stx+'\r\n    local archiveURL = config.apiBaseURL .. 'set:sta+r>common+'\r\n    table.insert(pack, archiveURL .. (math.random(2) == 1 and 'lang:en' or 'lang:ja'))\r\n    table.insert(pack, url .. 't:lesson+-r:u')\r\n    table.insert(pack, url .. getRandomRarity(8, 1))\r\n    for i = 1, 3 do\r\n        table.insert(pack, url .. 'r:u')\r\n    end\r\n    for _, c in ipairs({ 'w', 'u', 'b', 'r', 'g' }) do\r\n        table.insert(pack, url .. 'r:c+c:' .. c)\r\n    end\r\n    for i = 1, 3 do\r\n        table.insert(pack, url .. 'r:c+-t:basic')\r\n    end\r\n\r\n    if math.random(3) == 1 then\r\n        table.insert(pack, url)\r\n    else\r\n        table.insert(pack, url .. 'r:c+-t:basic')\r\n    end\r\n    return pack\r\nend\r\n\r\nlocal function createCustomBooster(setQuery, packStructure)\r\n    return function()\r\n        local pack = BoosterPacks.default(setQuery)\r\n        return packStructure(pack)\r\n    end\r\nend\r\n\r\nBoosterPacks.standard = createCustomBooster('f:standard', function(pack)\r\n    local url = config.apiBaseURL .. 'f:standard+'\r\n    local artSets = '(set:tafr+or+set:tstx+or+set:tkhm+or+set:tznr+or+set:sznr+or+set:tm21+or+set:tiko+or+set:tthb+or+set:teld)'\r\n    local artQuery = '(border:borderless+or+frame:showcase+or+frame:extendedart+or+set:plist+or+set:sta)'\r\n    table.insert(pack, url .. 't:basic')\r\n    table.insert(pack, config.apiBaseURL .. artSets)\r\n    if math.random(2) == 1 then\r\n        pack[#pack - 1] = url .. artQuery\r\n    end\r\n    if math.random(2) == 1 then\r\n        pack[#pack] = url .. artQuery\r\n    end\r\n    return pack\r\nend)\r\n\r\nBoosterPacks.conspiracy = createCustomBooster('(s:cns+or+s:cn2)', function(pack)\r\n    table.insert(pack, pack[#pack]:gsub('r:%S+', getRandomRarity(9, 6, 3)))\r\n    pack[6] = pack[math.random(11, 12)]\r\n    for i, _ in pairs(pack) do\r\n        local query = (i == 6 or i == #pack) and '+wm:conspiracy' or '+-wm:conspiracy'\r\n        pack[i] = pack[i] .. query\r\n    end\r\n    return pack\r\nend)\r\n\r\nBoosterPacks.innistrad = createCustomBooster('(s:isd+or+s:dka+or+s:avr+or+s:soi+or+s:emn+or+s:mid)', function(pack)\r\n    table.insert(pack, pack[#pack]:gsub('r:%S+', getRandomRarity(8, 1)))\r\n    pack[11] = pack[12]\r\n    for i, _ in pairs(pack) do\r\n        local query = (i == 6 or i == #pack or i == #pack - 2) and '+is:transform' or '+-is:transform'\r\n        pack[i] = pack[i] .. query\r\n    end\r\n    return pack\r\nend)\r\n\r\nBoosterPacks.ravnica = createCustomBooster('(s:rav+or+s:gpt+or+s:dis+or+s:rtr+or+s:gtc+or+s:dgm+or+s:grn+or+s:rna)', function(pack)\r\n    local landQuery = 't:land+-t:basic'\r\n    table.insert(pack, pack[#pack])\r\n    for i = 7, 9 do\r\n        pack[i] = pack[6] .. '+id>=2'\r\n    end\r\n    for i, _ in pairs(pack) do\r\n        if i == 6 or i == #pack then\r\n            pack[i] = pack[i]:gsub('r:%S+', getRandomRarity(9, 6, 3)) .. '+' .. landQuery\r\n        else\r\n            pack[i] = pack[i] .. '+-' .. landQuery\r\n        end\r\n    end\r\n    return pack\r\nend)\r\n\r\n-- Maps set codes that are not valid Lua identifiers to valid function names.\r\nlocal setCodeMapping = {\r\n    ['2xm'] = 'twoxm'\r\n}\r\n\r\n--- Rate Limiting State ---\r\nlocal requestQueue = {}\r\nlocal requestsThisMinute = 0\r\nlocal resetTime = os.time()\r\n\r\n-- enqueue requests instead of calling WebRequest.get directly\r\nfunction enqueueRequest(url, callback)\r\n    table.insert(requestQueue, { url = url, callback = callback })\r\nend\r\n\r\n-- process up to 5 requests per minute\r\nfunction processRequestQueue()\r\n    if #requestQueue == 0 then\r\n        return\r\n    end\r\n    local req = table.remove(requestQueue, 1)\r\n    WebRequest.get(req.url, req.callback)\r\nend\r\n\r\n--- Scryfall API and Deck Handling ---\r\nfunction getScryfallQueryTable()\r\n    local setCode = string.lower(getSetCode())\r\n    local mappedSetCode = setCodeMapping[setCode] or setCode\r\n    local packGenerator = BoosterPacks[mappedSetCode] or BoosterPacks.default\r\n    return packGenerator(setCode)\r\nend\r\n\r\nfunction fetchDeckData(urlTable, boosterID)\r\n    local deck = {\r\n        Transform = { posX = 0, posY = 0, posZ = 0, rotX = 0, rotY = 180, rotZ = 180, scaleX = 1, scaleY = 1, scaleZ = 1 },\r\n        Name = \"Deck\",\r\n        Nickname = getSetCode() .. \" Booster\",\r\n        Description = cardStackDescription,\r\n        DeckIDs = {},\r\n        CustomDeck = {},\r\n        ContainedObjects = {},\r\n    }\r\n\r\n    local requestsPending = #urlTable\r\n    local requestsCompleted = 0\r\n\r\n    for i, url in ipairs(urlTable) do\r\n        enqueueRequest(url, function(request)\r\n            if request.response_code ~= 200 then\r\n                local errorInfo = JSON.decode(request.text)\r\n                local message = errorInfo and errorInfo.details or (request.error .. \": \" .. request.text)\r\n                broadcastToAll(message, \"Red\")\r\n                print(message)\r\n            else\r\n                local cardData = createCardDataFromJSON(request.text, i)\r\n                if cardData then\r\n                    deck.ContainedObjects[i] = cardData\r\n                    deck.DeckIDs[i] = cardData.CardID\r\n                    deck.CustomDeck[i] = cardData.CustomDeck[i]\r\n                end\r\n            end\r\n            requestsCompleted = requestsCompleted + 1\r\n        end)\r\n    end\r\n\r\n    Wait.condition(\r\n            function()\r\n                if #deck.ContainedObjects ~= #urlTable then\r\n                    return\r\n                end\r\n\r\n                local cardNames = {}\r\n                local hasDuplicates = false\r\n                for _, card in ipairs(deck.ContainedObjects) do\r\n                    if cardNames[card.Nickname] then\r\n                        hasDuplicates = true\r\n                        break\r\n                    end\r\n                    cardNames[card.Nickname] = true\r\n                end\r\n\r\n                if hasDuplicates then\r\n                    fetchDeckData(urlTable, boosterID)\r\n                else\r\n                    boosterDataCache[boosterID] = deck\r\n                end\r\n            end,\r\n            function()\r\n                return requestsPending == requestsCompleted\r\n            end\r\n    )\r\nend\r\n\r\nfunction getCardOracleText(cardFace)\r\n    local powerToughness = \"\"\r\n    if cardFace.power then\r\n        powerToughness = '\\n[b]' .. cardFace.power .. '/' .. cardFace.toughness .. '[b]'\r\n    elseif cardFace.loyalty then\r\n        powerToughness = '\\n[b]' .. tostring(cardFace.loyalty) .. '[/b]'\r\n    end\r\n    return (cardFace.oracle_text or \"\") .. powerToughness\r\nend\r\n\r\nfunction createCardDataFromJSON(jsonString, cardIndex)\r\n    local card = JSON.decode(jsonString)\r\n    if not card or not card.name then\r\n        error(\"Failed to decode JSON: \" .. jsonString)\r\n        return\r\n    end\r\n\r\n    local cardName = \"\"\r\n    local cardOracle = \"\"\r\n    local faceURL = \"\"\r\n    local backData = nil\r\n    local imageQuality = 'large'\r\n    local cacheBuster = (card.image_status ~= 'highres_scan') and ('?' .. os.date(\"%Y%m%d\")) or \"\"\r\n\r\n    local function getFormattedName(face, typeSuffix)\r\n        return string.format('%s\\n%s %s CMC %s', face.name:gsub('\"', ''), face.type_line, tostring(card.cmc or face.cmc or 0), typeSuffix or \"\"):gsub('%s$', '')\r\n    end\r\n\r\n    if card.card_faces then\r\n        if card.image_uris then\r\n            -- Split cards like Adventure\r\n            cardName = getFormattedName(card.card_faces[1])\r\n            for i, face in ipairs(card.card_faces) do\r\n                cardOracle = cardOracle .. getFormattedName(face) .. '\\n' .. getCardOracleText(face)\r\n                if i < #card.card_faces then\r\n                    cardOracle = cardOracle .. '\\n'\r\n                end\r\n            end\r\n            faceURL = card.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n        else\r\n            -- Transform / DFC\r\n            local face = card.card_faces[1]\r\n            local back = card.card_faces[2]\r\n            cardName = getFormattedName(face, 'DFC')\r\n            cardOracle = getCardOracleText(face)\r\n            faceURL = face.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n            local backURL = back.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n\r\n            local backCardIndex = cardIndex + 100\r\n            backData = {\r\n                Transform = { posX = 0, posY = 0, posZ = 0, rotX = 0, rotY = 0, rotZ = 0, scaleX = 1, scaleY = 1, scaleZ = 1 },\r\n                Name = \"Card\",\r\n                Nickname = getFormattedName(back, 'DFC'),\r\n                Description = getCardOracleText(back),\r\n                Memo = card.oracle_id,\r\n                CardID = backCardIndex * 100,\r\n                CustomDeck = {\r\n                    [backCardIndex] = {\r\n                        FaceURL = backURL, BackURL = config.backURL, NumWidth = 1, NumHeight = 1,\r\n                        Type = 0, BackIsHidden = true, UniqueBack = false\r\n                    }\r\n                },\r\n            }\r\n        end\r\n    else\r\n        -- Normal card\r\n        cardName = getFormattedName(card)\r\n        cardOracle = getCardOracleText(card)\r\n        faceURL = card.image_uris.normal:gsub('%?.*', ''):gsub('normal', imageQuality) .. cacheBuster\r\n    end\r\n\r\n    local cardData = {\r\n        Transform = { posX = 0, posY = 0, posZ = 0, rotX = 0, rotY = 0, rotZ = 0, scaleX = 1, scaleY = 1, scaleZ = 1 },\r\n        Name = \"Card\",\r\n        Nickname = cardName,\r\n        Description = cardOracle,\r\n        Memo = card.oracle_id,\r\n        CardID = cardIndex * 100,\r\n        CustomDeck = {\r\n            [cardIndex] = {\r\n                FaceURL = faceURL, BackURL = config.backURL, NumWidth = 1, NumHeight = 1,\r\n                Type = 0, BackIsHidden = true, UniqueBack = false\r\n            }\r\n        },\r\n    }\r\n\r\n    if backData then\r\n        cardData.States = { [2] = backData }\r\n    end\r\n\r\n    return cardData\r\nend\r\n\r\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "3482bf",
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -12.191412,
            "posY": 4.42412567,
            "posZ": 9.041547,
            "rotX": 1.33040712E-05,
            "rotY": 359.976929,
            "rotZ": 2.27627E-05,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Empty Booster",
          "Description": "",
          "GMNotes": "",
          "AltLookAngle": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          },
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/9779110528988615269/E9A65CD25256BFDB28AE4140FCB1D27BC71A5A8D/",
            "DiffuseURL": "https://steamusercontent-a.akamaihd.net/ugc/12555777445170015064/1F22F21DA19B1C5D668D761C2CA447889AE98A2A/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "Bag": {
            "Order": 0
          },
          "LuaScript": "function tryObjectEnter()\r\n    return false\r\nend\r\n\r\nfunction onObjectLeaveContainer(container)\r\n    if container ~= self then\r\n        return\r\n    end\r\n\r\n    -- wait one second, then destroy the container when it's empty\r\n    Wait.time(function()\r\n        Wait.condition(\r\n                function()\r\n                    if container ~= nil then\r\n                        container.destruct()\r\n                    end\r\n                end,\r\n                function()\r\n                    return container ~= nil and container.getQuantity() == 0\r\n                end\r\n        )\r\n    end, 1)\r\nend\r\n",
          "LuaScriptState": "",
          "XmlUI": "",
          "ContainedObjects": [
            {
              "GUID": "8cd2f5",
              "Name": "CardCustom",
              "Transform": {
                "posX": -8.525,
                "posY": 1.38543224,
                "posZ": -2.32499981,
                "rotX": 0.0001361478,
                "rotY": 180.01059,
                "rotZ": 179.9995,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 0.713235259,
                "g": 0.713235259,
                "b": 0.713235259
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": true,
              "Hands": true,
              "CardID": 24700,
              "SidewaysCard": false,
              "CustomDeck": {
                "247": {
                  "FaceURL": "https://steamusercontent-a.akamaihd.net/ugc/1869555422032369755/F9BD705BCF967068A85CC525B6879147EDB76E71/",
                  "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1869555872447018243/605ECC61FD27EE474845AA7CC2AAC1AB2984DECB/",
                  "NumWidth": 1,
                  "NumHeight": 1,
                  "BackIsHidden": true,
                  "UniqueBack": false,
                  "Type": 0
                }
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            }
          ]
        }
      ],
      "ChildObjects": [
        {
          "GUID": "f39cf0",
          "Name": "Custom_Model_Infinite_Bag",
          "Transform": {
            "posX": -1.37481074E-05,
            "posY": -0.50000006,
            "posZ": -0.07334592,
            "rotX": -5.5286984E-16,
            "rotY": -5.502838E-08,
            "rotZ": 2.654954E-25,
            "scaleX": 0.0338982977,
            "scaleY": 0.08542431,
            "scaleZ": 0.0289256871
          },
          "Nickname": "Booster Box",
          "Description": "Set: M14",
          "GMNotes": "",
          "AltLookAngle": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          },
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/12983479995982417794/E62DB17C9EF924DD8561E483368697A5C396D16F/",
            "DiffuseURL": "https://steamusercontent-a.akamaihd.net/ugc/17688090535400173324/590A8D3033394EA170B56B22C333819A1DD29CD1/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 7,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "LuaScript": "function onLoad()\r\n  --customize card-back image\r\n  backURL='https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/'\r\n\r\n  setCode='Mystery'\r\n  -- setCode='KLM'\r\n  -- setCode='STX'\r\n  -- setCode='ZNR'\r\n\r\n  cardStackName=setCode..\" Booster\"\r\n  cardStackDescription=\"\"\r\n\r\n  -------------- don't change these\r\n  nBooster=0\r\n  boosterDats={}\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n---- Booster Set Lookup Function\r\n---- should be correct for all sets?\r\n---- if not add special cases e.g. using the set:lower()=='mystery' example\r\n--------------------------------------------------------------------------------\r\nlocal apiSet='http://api.scryfall.com/cards/random?q=is:booster+s:'\r\nfunction rarity(m,r,u)\r\n  if math.random(1,m or 36)==1 then return'r:mythic'\r\n  elseif math.random(1,r or 8)==1 then return'r:rare'\r\n  elseif math.random(1,u or 4)==1 then return'r:uncommon'\r\n  else return'r:common'end end\r\nfunction typeCo(p,t)local n=math.random(#p-1,#p)for i=13,#p do if n==i then p[i]=p[i]..'+'..t else p[i]=p[i]..'+-('..t..')'end end return p end\r\n\r\nlocal Booster=setmetatable({\r\n  dom=function(p)return typeCo(p,'t:legendary')end,\r\n  war=function(p)return typeCo(p,'t:planeswalker')end,\r\n  znr=function(p)return typeCo(p,'t:land+(is:spell+or+pathway)')end,\r\n  tsp='tsb',mb1='fmb1',mh2='h1r',bfz='exp',ogw='exp',kld='mps',aer='mps',akh='mp2',hou='mp2',stx='sta'\r\n},{__call=function(t,set,n)\r\n  local pack,u={},apiSet..set..'+'\r\n  u=u:gsub('%+s:%(','+(')\r\n  if not n and t[set]and type(t[set])=='function'then\r\n    return t[set](t(set,true))\r\n  else\r\n    for c in('wubrg'):gmatch('.')do table.insert(pack,u..'r:common+c>='..c)end\r\n    for i=1,6 do table.insert(pack,u..'r:common+-t:basic')end\r\n    --masterpiece math\r\n    if not n and((t[set]and math.random(1,144)==1)or('tsp mb1 mh2'):find(set))then\r\n      pack[#pack]=apiSet..t[set]end\r\n    for i=1,3 do table.insert(pack,u..'r:uncommon')end\r\n    table.insert(pack,u..rarity(8,1))\r\n    return pack\r\n  end\r\nend})\r\n\r\n--ReplacementSlot\r\nfunction rSlot(p,s,a,b)for i,v in pairs(p)do if i~=6 then p[i]=v..a else p[i]=apiSet..s..'+'..rarity()..b end end return p end\r\n\r\n--Weird Boosters\r\nBooster['mystery']=function()\r\n  urlTable={}\r\n  -- MYSTERY BOOSTER (set mb1)\r\n  urlPrefix='http://api.scryfall.com/cards/random?q=set:mb1+'\r\n  -- slot 1-10: each Convention pack has 2 commons/uncommons of each color\r\n  for _,c in pairs({'w','u','b','r','g'}) do\r\n    table.insert(urlTable,urlPrefix..'r<rare+c='..c)\r\n    table.insert(urlTable,urlPrefix..'r<rare+c='..c)\r\n  end\r\n  -- slot 11: 1 multicolored common/uncommon\r\n  table.insert(urlTable,urlPrefix..'c:m+r<rare')\r\n  -- slot 12: 1 common/uncommon artifact/land\r\n  table.insert(urlTable,urlPrefix..'c:c+r<rare')\r\n  -- slot 13: 1 rare/mythic rare with the M15 card frame\r\n  table.insert(urlTable,urlPrefix..'r>=rare+frame:2015')\r\n  -- slot 14: one pre-M15 card in its original frame\r\n  table.insert(urlTable,urlPrefix..'r>=rare+-frame:2015')\r\n  -- slot 15: a pretend \"playtest card\" in the special slot that seems more like part of an Un-set\r\n  table.insert(urlTable,'http://api.scryfall.com/cards/random?q=set:cmb1')\r\n  return urlTable\r\nend\r\n\r\nBooster['stx']=function()\r\n  local pack,u={},apiSet..'stx+'\r\n  -- 1 mystical archive card  (Uncommon, Rare, or Mythic Rare, 50% chance japanese)\r\n  if math.random(2)==1 then table.insert(pack,'http://api.scryfall.com/cards/random?q=set:sta+r>common+lang:en')\r\n  else table.insert(pack,'http://api.scryfall.com/cards/random?q=set:sta+r>common+lang:ja') end\r\n  table.insert(pack,u..'t:lesson+-r:u')             -- 1 lesson card (Common, Rare, or Mythic Rare)\r\n  table.insert(pack,u..rarity(8,1))                 -- 1 rare (7/8 chance) or mythic rare (1/8 chance)\r\n  for i=1,3 do table.insert(pack,u..'r:u') end      -- 3 uncommons\r\n  for _,c in pairs({'w','u','b','r','g'}) do table.insert(pack,u..'r:c+c:'..c) end              -- 8 commons\r\n  for i=1,3 do table.insert(pack,u..'r:c+-t:basic') end\r\n  if math.random(3)==1 then table.insert(pack,u) else table.insert(pack,u..'r:c+-t:basic') end  -- 33% chance foil of any rarity (66% chance another common)\r\n  return pack\r\nend\r\n\r\nBooster['2xm']=function(p)p[11]=p[#p]for i=9,10 do p[i]=apiSet..'2xm'..'+'..rarity()end return p end\r\nfor s in('isd dka soi emn'):gmatch('%S+')do\r\n  Booster[s]=function(p)return rSlot(p,s,'+-is:transform','+is:transform')end end\r\nfor s in('mid'):gmatch('%S+')do--Crimson Moon\r\n  Booster[s]=function(p)local n=math.random(#p-1,#p)for i,v in pairs(p)do if i==6 or i==n then p[i]=p[i]..'+is:transform'else p[i]=p[i]..'+-is:transform'end end return p end end\r\nfor s in('cns cn2'):gmatch('%S+')do\r\n  Booster[s]=function(p)return rSlot(p,s,'+-wm:conspiracy','+wm:conspiracy')end end\r\nfor s in('rav gpt dis rtr gtc dgm grn rna'):gmatch('%S+')do\r\n  Booster[s]=function(p)return rSlot(p,s,'+-t:land','+t:land+-t:basic')end end\r\nfor s in('ice all csp mh1 khm'):gmatch('%S+')do\r\n  Booster[s]=function(p)p[6]=apiSet..s..'+t:basic+t:snow'return p end end\r\n\r\n--Custom Booster Packs\r\nBooster.standard=function(qTbl)\r\n  local pack,u={},'http://api.scryfall.com/cards/random?q=f:standard+'\r\n  for c in ('wubrg'):gmatch('.')do\r\n    table.insert(pack,u..'r:common+c:'..c)end\r\n  for i=1,5 do table.insert(pack,u..'r:common+-t:basic')end\r\n  for i=1,3 do table.insert(pack,u..'r:uncommon')end\r\n  table.insert(pack,u..rarity(8,1))\r\n  table.insert(pack,u..'t:basic')\r\n  table.insert(pack,u:sub(1,39)..'(set:tafr+or+set:tstx+or+set:tkhm+or+set:tznr+or+set:sznr+or+set:tm21+or+set:tiko+or+set:tthb+or+set:teld)')\r\n  for i=#pack-1,#pack do\r\n    if math.random(1,2)==1 then\r\n      pack[i]=u..'(border:borderless+or+frame:showcase+or+frame:extendedart+or+set:plist+or+set:sta)'\r\n    end end\r\n  return pack end\r\nBooster.conspiracy=function(qTbl)--wubrgCCCCCTUUURT\r\n  local p=Booster('(s:cns+or+s:cn2)')\r\n  local z=p[#p]:gsub('r:%S+',rarity(9,6,3))\r\n  table.insert(p,z)\r\n  p[6]=p[math.random(11,12)]\r\n  for i,s in pairs(p)do\r\n    if i==6 or i==#p then\r\n      p[i]=p[i]..'+wm:conspiracy'\r\n    else p[i]=p[i]..'+-wm:conspiracy'end end\r\n  return p end\r\nBooster.innistrad=function(qTbl)--wubrgDCCCCUUUDRD\r\n  local p=Booster('(s:isd+or+s:dka+or+s:avr+or+s:soi+or+s:emn+or+s:mid)')\r\n  local z=p[#p]:gsub('r:%S+',rarity(8,1))\r\n  table.insert(p,z)\r\n  p[11]=p[12]\r\n  for i,s in pairs(p)do\r\n    if i==6 or i==#p or i==#p-2 then\r\n      p[i]=p[i]..'+is:transform'\r\n    else p[i]=p[i]..'+-is:transform'end end\r\n  return p end\r\nBooster.ravnica=function(qTbl)--wubrgLmmmCCUUURL\r\n  local l,p='t:land+-t:basic',Booster('(s:rav+or+s:gpt+or+s:dis+or+s:rtr+or+s:gtc+or+s:dgm+or+s:grn+or+s:rna)')\r\n  table.insert(p,p[#p])\r\n  for i=7,9 do p[i]=p[6]..'+id>=2'end\r\n  for i,s in pairs(p)do\r\n    if i==6 or i==#p then\r\n      p[i]=p[i]:gsub('r:%S+',rarity(9,6,3))..'+'..l\r\n    else p[i]=p[i]..'+-'..l end end\r\n  return p end\r\n\r\nfunction getScryfallQueryTable()\r\n  urlTable=Booster(setCode:lower())\r\n  return urlTable\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n-- when a booster is taken out from the box, start scryfall query and replace booster contents\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n  if container ~= self then return end\r\n\r\n  leave_object.setName(cardStackName)\r\n\r\n  nBooster=nBooster+1\r\n  local boosterN=nBooster\r\n\r\n  urlTable=getScryfallQueryTable()\r\n  getDeckDat(urlTable,boosterN)\r\n\r\n  leave_object.createButton({\r\n    click_function='null',\r\n    function_owner=self,\r\n    label='generating\\ncards',\r\n    position={0,0.5,0},\r\n    rotation={0,90,0},\r\n    scale={0.5,0.5,0.5},\r\n    width=0,\r\n    height=0,\r\n    font_size=1000,\r\n    color={0,0,0,0},\r\n    font_color={1,1,1,100},\r\n  })\r\n\r\n  Wait.condition(function()\r\n    leave_object.clearButtons()\r\n    Wait.condition(function()\r\n      bDat = leave_object.getData()\r\n      bDat.ContainedObjects={boosterDats[boosterN]}\r\n      leave_object.destruct()\r\n      spawnObjectData({data=bDat})\r\n    end,\r\n    function()\r\n      -- print('obj resting')\r\n      return leave_object.resting\r\n    end)\r\n  end,function()\r\n    -- print('nil data')\r\n    return boosterDats[boosterN]~=nil\r\n  end)\r\nend\r\n\r\n\r\n-- takes in a table of scryfall query url's\r\n-- queries scryfall for the data\r\n-- generates TTS deckData object with the cards (saved to boosterDats[boosterN])\r\nfunction getDeckDat(urlTable,boosterN)\r\n\r\n  deckDat={\r\n    Transform={posX=0,posY=0,posZ=0,rotX=0,rotY=180,rotZ=180,scaleX=1,scaleY=1,scaleZ=1},\r\n    Name=\"Deck\",\r\n    Nickname=cardStackName,\r\n    Description=cardStackDescription,\r\n    DeckIDs={},\r\n    CustomDeck={},\r\n    ContainedObjects={},\r\n  }\r\n\r\n  local nLoading=0\r\n  local nLoaded=0\r\n\r\n  for n,url in ipairs(urlTable) do\r\n    nLoading=nLoading+1\r\n\r\n    WebRequest.get(url,function(wr)\r\n      cardDat=getCardDatFromJSON(wr.text,n)\r\n      deckDat.ContainedObjects[n]=cardDat\r\n      deckDat.DeckIDs[n]=cardDat.CardID      -- add card info into deckDat\r\n      deckDat.CustomDeck[n]=cardDat.CustomDeck[n]\r\n      nLoaded=nLoaded+1\r\n    end)\r\n\r\n  end\r\n\r\n  Wait.condition(function()   -- once all the queries come back from scryfall\r\n\r\n    -- check for doubles\r\n    local doubles=false\r\n    local names={}\r\n    for _,card in pairs(deckDat.ContainedObjects) do\r\n      for _,prevName in pairs(names) do\r\n        if card.Nickname==prevName then\r\n          doubles=true\r\n        end\r\n      end\r\n      table.insert(names,card.Nickname)\r\n    end\r\n\r\n    if doubles then   -- just redo the search\r\n      getDeckDat(urlTable,boosterN)\r\n    else              -- update the boosterDats\r\n      boosterDats[boosterN]=deckDat\r\n    end\r\n  end,\r\n  function() return nLoading==nLoaded end)\r\n\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n\r\nfunction getCardDatFromJSON(json,n)\r\n\r\n  local c=JSONdecode(json)\r\n\r\n  c.face=''\r\n  c.oracle=''\r\n  local qual='large'\r\n\r\n  local imagesuffix=''\r\n  if c.image_status~='highres_scan' then      -- cache buster for low quality images\r\n    imagesuffix='?'..tostring(os.date(\"%x\")):gsub('/', '')\r\n  end\r\n\r\n  --Check for card's spoiler image quality\r\n  --Oracle text Handling for Split then DFC then Normal\r\n  if c.card_faces and c.image_uris then\r\n    for i,f in ipairs(c.card_faces) do\r\n      if c.cmc then\r\n        f.name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..c.cmc..'CMC'\r\n      else\r\n        f.name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..f.cmc..'CMC'\r\n      end\r\n      if i==1 then cardName=f.name end\r\n      c.oracle=c.oracle..f.name..'\\n'..setOracle(f)..(i==#c.card_faces and''or'\\n')\r\n    end\r\n  elseif c.card_faces then\r\n    local f=c.card_faces[1]\r\n    if c.cmc then\r\n      cardName=f.name:gsub('\"','')..'\\n'..f.type_line..' '..c.cmc..'CMC DFC'\r\n    else\r\n      cardName=f.name:gsub('\"','')..'\\n'..f.type_line..' '..f.cmc..'CMC DFC'\r\n    end\r\n    c.oracle=setOracle(f)\r\n  else\r\n    cardName=c.name:gsub('\"','')..'\\n'..c.type_line..' '..c.cmc..'CMC'\r\n    c.oracle=setOracle(c)\r\n  end\r\n  local backDat=nil\r\n  --Image Handling\r\n  if c.card_faces and not c.image_uris then --DFC REWORKED for STATES!\r\n    local faceAddress=c.card_faces[1].image_uris.normal:gsub('%?.*',''):gsub('normal',qual)..imagesuffix\r\n    local backAddress=c.card_faces[2].image_uris.normal:gsub('%?.*',''):gsub('normal',qual)..imagesuffix\r\n    if faceAddress:find('/back/') and backAddress:find('/front/') then\r\n      local temp=faceAddress;faceAddress=backAddress;backAddress=temp\r\n    end\r\n    c.face=faceAddress\r\n    local f=c.card_faces[2]\r\n    local name\r\n    if c.cmc then\r\n      name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..c.cmc..'CMC DFC'\r\n    else\r\n      name=f.name:gsub('\"','')..'\\n'..f.type_line..' '..f.cmc..'CMC DFC'\r\n    end\r\n    local oracle=setOracle(f)\r\n    local b=n+100\r\n    backDat={\r\n      Transform={posX=0,posY=0,posZ=0,rotX=0,rotY=0,rotZ=0,scaleX=1,scaleY=1,scaleZ=1},\r\n      Name=\"Card\",\r\n      Nickname=name,\r\n      Description=oracle,\r\n      Memo=c.oracle_id,\r\n      CardID=b*100,\r\n      CustomDeck={[b]={FaceURL=backAddress,BackURL=backURL,NumWidth=1,NumHeight=1,Type=0,BackIsHidden=true,UniqueBack=false}},\r\n    }\r\n  elseif c.image_uris then\r\n    c.face=c.image_uris.normal:gsub('%?.*',''):gsub('normal',qual)..imagesuffix\r\n    if cardName:lower():match('geralf') then\r\n      c.face=c.image_uris.normal:gsub('%?.*',''):gsub('normal','png'):gsub('jpg','png')..imagesuffix\r\n    end\r\n  end\r\n\r\n  local cardDat={\r\n    Transform={posX=0,posY=0,posZ=0,rotX=0,rotY=0,rotZ=0,scaleX=1,scaleY=1,scaleZ=1},\r\n    Name=\"Card\",\r\n    Nickname=cardName,\r\n    Description=c.oracle,\r\n    Memo=c.oracle_id,\r\n    CardID=n*100,\r\n    CustomDeck={[n]={FaceURL=c.face,BackURL=backURL,NumWidth=1,NumHeight=1,Type=0,BackIsHidden=true,UniqueBack=false}},\r\n  }\r\n\r\n  if backDat then\r\n    cardDat.States={[2]=backDat}\r\n  end\r\n  return cardDat\r\nend\r\n\r\n\r\nfunction setOracle(c)local n='\\n[b]'\r\n  if c.power then\r\n    n=n..c.power..'/'..c.toughness\r\n  elseif c.loyalty then\r\n    n=n..tostring(c.loyalty)\r\n  else\r\n    n=false\r\n  end\r\n  return c.oracle_text..(n and n..'[/b]'or'')\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n-- pie's manual \"JSONdecode\" for scryfall's \"object\":\"card\"\r\n--------------------------------------------------------------------------------\r\n\r\nnormal_card_keys={\r\n  'object',\r\n  'id',\r\n  'oracle_id',\r\n  'name',\r\n  'lang',\r\n  'layout',\r\n  'image_status',\r\n  'image_uris',\r\n  'mana_cost',\r\n  'cmc',\r\n  'type_line',\r\n  'oracle_text',\r\n  'loyalty',\r\n  'power',\r\n  'toughness',\r\n  'loyalty',\r\n  'legalities',\r\n  'set',\r\n  'rulings_uri',\r\n  'prints_search_uri',\r\n  'collector_number'\r\n}\r\n\r\nimage_uris_keys={    -- \"image_uris\":{\r\n  'small',\r\n  'normal',\r\n  'large',\r\n  'png',\r\n  'art_crop',\r\n  'border_crop',\r\n}\r\n\r\nlegalities_keys={    -- \"legalities\":{\r\n  'standard',\r\n  'future',\r\n  'historic',\r\n  'gladiator',\r\n  'pioneer',\r\n  'modern',\r\n  'legacy',\r\n  'pauper',\r\n  'vintage',\r\n  'penny',\r\n  'commander',\r\n  'brawl',\r\n  'duel',\r\n  'oldschool',\r\n  'premodern',\r\n}\r\n\r\nrelated_card_keys={     -- \"all_parts\":[{\"object\":\"related_card\",\r\n  'id',\r\n  'component',\r\n  'name',\r\n  'type_line',\r\n  'uri',\r\n}\r\n\r\ncard_face_keys={        -- \"card_faces\":[{\"object\":\"card_face\",\r\n  'name',\r\n  'mana_cost',\r\n  'cmc',\r\n  'type_line',\r\n  'oracle_text',\r\n  'power',\r\n  'toughness',\r\n  'loyalty',\r\n  'image_uris',\r\n}\r\n\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\nfunction JSONdecode(txt)\r\n  local txtBeginning = txt:sub(1,16)\r\n  local jsonType = txtBeginning:match('{\"object\":\"(%w+)\"')\r\n\r\n  -- not scryfall? use normal JSON.decode\r\n  if not(jsonType=='card' or jsonType=='list') then\r\n    return JSON.decode(txt)\r\n  end\r\n\r\n  ------------------------------------------------------------------------------\r\n  -- parse list: extract each card, and parse it separately\r\n  -- used when one wants to decode a whole list\r\n  if jsonType=='list' then\r\n    local txtBeginning = txt:sub(1,80)\r\n    local nCards=txtBeginning:match('\"total_cards\":(%d+)')\r\n    if nCards==nil then\r\n      return JSON.decode(txt)\r\n    end\r\n    local cardStart=0\r\n    local cardEnd=0\r\n    local cardDats = {}\r\n    for i=1,nCards do     -- could insert max number cards to parse here\r\n      cardStart=string.find(txt,'{\"object\":\"card\"',cardEnd+1)\r\n      cardEnd = findClosingBracket(txt,cardStart)\r\n      local cardDat = JSONdecode(txt:sub(cardStart,cardEnd))\r\n      table.insert(cardDats,cardDat)\r\n    end\r\n    local dat = {object=\"list\",total_cards=nCards,data=cardDats}    --ignoring has_more...\r\n    return dat\r\n  end\r\n\r\n  ------------------------------------------------------------------------------\r\n  -- parse card\r\n\r\n  txt=txt:gsub('}',',}')    -- comma helps parsing last element in an array\r\n\r\n  local cardDat={}\r\n  local all_parts_i=string.find(txt,'\"all_parts\":')\r\n  local card_faces_i=string.find(txt,'\"card_faces\":')\r\n\r\n  -- if all_parts exist\r\n  if all_parts_i~=nil then\r\n    local st=string.find(txt,'%[',all_parts_i)\r\n    local en=findClosingBracket(txt,st)\r\n    local all_parts_txt = txt:sub(all_parts_i,en)\r\n    local all_parts={}\r\n    -- remove all_parts snip from the main text\r\n    txt=txt:sub(1,all_parts_i-1)..txt:sub(en+2,-1)\r\n    -- parse all_parts_txt for each related_card\r\n    st=1\r\n    local cardN=0\r\n    while st~=nil do\r\n      st=string.find(all_parts_txt,'{\"object\":\"related_card\"',st)\r\n      if st~=nil then\r\n        cardN=cardN+1\r\n        en=findClosingBracket(all_parts_txt,st)\r\n        local related_card_txt=all_parts_txt:sub(st,en)\r\n        st=en\r\n        local s,e=1,1\r\n        local related_card={}\r\n        for i,key in ipairs(related_card_keys) do\r\n          val,s=getKeyValue(related_card_txt,key,s)\r\n          related_card[key]=val\r\n        end\r\n        table.insert(all_parts,related_card)\r\n        if cardN>100 then break end   -- avoid inf loop if something goes strange\r\n      end\r\n      cardDat.all_parts=all_parts\r\n    end\r\n  end\r\n\r\n  -- if card_faces exist\r\n  if card_faces_i~=nil then\r\n    local st=string.find(txt,'%[',card_faces_i)\r\n    local en=findClosingBracket(txt,st)\r\n    local card_faces_txt = txt:sub(card_faces_i,en)\r\n    local card_faces={}\r\n    -- remove card_faces snip from the main text\r\n    txt=txt:sub(1,card_faces_i-1)..txt:sub(en+2,-1)\r\n\r\n    -- parse card_faces_txt for each card_face\r\n    st=1\r\n    local cardN=0\r\n    while st~=nil do\r\n      st=string.find(card_faces_txt,'{\"object\":\"card_face\"',st)\r\n      if st~=nil then\r\n        cardN=cardN+1\r\n        en=findClosingBracket(card_faces_txt,st)\r\n        local card_face_txt=card_faces_txt:sub(st,en)\r\n        st=en\r\n        local s,e=1,1\r\n        local card_face={}\r\n        for i,key in ipairs(card_face_keys) do\r\n          val,s=getKeyValue(card_face_txt,key,s)\r\n          card_face[key]=val\r\n        end\r\n        table.insert(card_faces,card_face)\r\n        if cardN>4 then break end   -- avoid inf loop if something goes strange\r\n      end\r\n      cardDat.card_faces=card_faces\r\n    end\r\n  end\r\n\r\n  -- normal card (or what's left of it after removing card_faces and all_parts)\r\n  st=1\r\n  for i,key in ipairs(normal_card_keys) do\r\n    val,st=getKeyValue(txt,key,st)\r\n    cardDat[key]=val\r\n  end\r\n\r\n  return cardDat\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\n-- returns data for one card at a time from a scryfall's \"object\":\"list\"\r\nfunction getNextCardDatFromList(txt,startHere)\r\n\r\n  if startHere==nil then\r\n    startHere=1\r\n  end\r\n\r\n  local cardStart=string.find(txt,'{\"object\":\"card\"',startHere)\r\n  if cardStart==nil then\r\n    -- print('error: no more cards in list')\r\n    startHere=nil\r\n    return nil,nil,nil\r\n  end\r\n\r\n  local cardEnd = findClosingBracket(txt,cardStart)\r\n  if cardEnd==nil then\r\n    -- print('error: no more cards in list')\r\n    startHere=nil\r\n    return nil,nil,nil\r\n  end\r\n\r\n  -- startHere is not a local variable, so it's possible to just do:\r\n  -- getNextCardFromList(txt) and it will keep giving the next card or nil if there's no more\r\n  startHere=cardEnd+1\r\n\r\n  local cardDat = JSONdecode(txt:sub(cardStart,cardEnd))\r\n\r\n  return cardDat,cardStart,cardEnd\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\nfunction findClosingBracket(txt,st)   -- find paired {} or []\r\n  if st==nil then return nil end\r\n  local ob,cb='{','}'\r\n  local pattern='[{}]'\r\n  if txt:sub(st,st)=='[' then\r\n    ob,cb='[',']'\r\n    pattern='[%[%]]'\r\n  end\r\n  local txti=st\r\n  local nopen=1\r\n  while nopen>0 do\r\n    txti=string.find(txt,pattern,txti+1)\r\n    if txt:sub(txti,txti)==ob then\r\n      nopen=nopen+1\r\n    elseif txt:sub(txti,txti)==cb then\r\n      nopen=nopen-1\r\n    end\r\n  end\r\n  return txti\r\nend\r\n\r\n--------------------------------------------------------------------------------\r\nfunction getKeyValue(txt,key,st)\r\n  local str='\"'..key..'\":'\r\n  local st=string.find(txt,str,st)\r\n  local en=nil\r\n  local value=nil\r\n  if st~=nil then\r\n    if key=='image_uris' then     -- special case for scryfall's image_uris table\r\n      value={}\r\n      local s=st\r\n      for i,k in ipairs(image_uris_keys) do\r\n        local val,s=getKeyValue(txt,k,s)\r\n        value[k]=val\r\n      end\r\n      en=s\r\n    elseif txt:sub(st+#str,st+#str)~='\"' then      -- not a string\r\n      en=string.find(txt,',\"',st+#str+1)\r\n      value=tonumber(txt:sub(st+#str,en-1))\r\n    else                                           -- a string\r\n      en=string.find(txt,'\",',st+#str+1)\r\n      value=txt:sub(st+#str+1,en-1):gsub('\\\\\"','\"'):gsub('\\\\n','\\n'):gsub(\"\\\\u(%x%x%x%x)\",function (x) return string.char(tonumber(x,16)) end)\r\n    end\r\n  end\r\n  if type(value)=='string' then\r\n    value=value:gsub(',}','}')    -- get rid of the previously inserted comma\r\n  end\r\n  return value,en\r\nend",
          "LuaScriptState": "",
          "XmlUI": "",
          "ContainedObjects": [
            {
              "GUID": "36dc1f",
              "Name": "Custom_Model_Bag",
              "Transform": {
                "posX": -2.96532932E-08,
                "posY": 3.1172986,
                "posZ": 6.101597E-07,
                "rotX": 0.00148047716,
                "rotY": 0.034782324,
                "rotZ": -0.0022447498,
                "scaleX": 1.0,
                "scaleY": 1.0,
                "scaleZ": 1.0
              },
              "Nickname": "Mystery Booster",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "MaterialIndex": -1,
              "MeshIndex": -1,
              "CustomMesh": {
                "MeshURL": "https://steamusercontent-a.akamaihd.net/ugc/9779110528988615269/E9A65CD25256BFDB28AE4140FCB1D27BC71A5A8D/",
                "DiffuseURL": "https://steamusercontent-a.akamaihd.net/ugc/12555777445170015064/1F22F21DA19B1C5D668D761C2CA447889AE98A2A/",
                "NormalURL": "",
                "ColliderURL": "",
                "Convex": true,
                "MaterialIndex": 3,
                "TypeIndex": 6,
                "CustomShader": {
                  "SpecularColor": {
                    "r": 1.0,
                    "g": 1.0,
                    "b": 1.0
                  },
                  "SpecularIntensity": 0.0,
                  "SpecularSharpness": 2.0,
                  "FresnelStrength": 0.0
                },
                "CastShadows": true
              },
              "Bag": {
                "Order": 0
              },
              "LuaScript": "function tryObjectEnter(obj)\r\n  if obj.type=='Card' or obj.type=='Deck' then\r\n    return true\r\n  else\r\n    return false\r\n  end\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, object)\r\n  if container~=self then return end\r\n  if container.getQuantity()==0 then\r\n    Wait.time(function()\r\n      if container~=nil then\r\n        container.destruct()\r\n      end\r\n    end,2)\r\n  end\r\nend\r\n",
              "LuaScriptState": "",
              "XmlUI": "",
              "ContainedObjects": [
                {
                  "GUID": "",
                  "Name": "Deck",
                  "Transform": {
                    "posX": 0.0,
                    "posY": 0.0,
                    "posZ": 0.0,
                    "rotX": 0.0,
                    "rotY": 180.0,
                    "rotZ": 180.0,
                    "scaleX": 1.0,
                    "scaleY": 1.0,
                    "scaleZ": 1.0
                  },
                  "Nickname": "Mystery Booster",
                  "Description": "",
                  "GMNotes": "",
                  "AltLookAngle": {
                    "x": 0.0,
                    "y": 0.0,
                    "z": 0.0
                  },
                  "LayoutGroupSortIndex": 0,
                  "Value": 0,
                  "Locked": false,
                  "Grid": true,
                  "Snap": true,
                  "IgnoreFoW": false,
                  "MeasureMovement": false,
                  "DragSelectable": true,
                  "Autoraise": true,
                  "Sticky": true,
                  "Tooltip": true,
                  "GridProjection": false,
                  "DeckIDs": [
                    100,
                    200,
                    300,
                    400,
                    500,
                    600,
                    700,
                    800,
                    900,
                    1000,
                    1100,
                    1200,
                    1300,
                    1400,
                    1500
                  ],
                  "CustomDeck": {
                    "4": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/7/c7a6e64e-4a9d-4fab-b85c-e9c4e88bca2f.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "13": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/6/e6bc963e-042f-4cdc-be38-de8e386c00b3.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "1": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/2/c2ece04a-e6b3-4496-b5e2-1fe8875f1982.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "14": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/c/6c89c1fd-4717-4249-a74f-d9d4935c5753.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "9": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/d/3d26ba20-baa7-4258-9424-89660d11d41d.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "7": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/b/c/bc1db7d4-7955-43c7-95c4-69d64493693d.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "6": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/0/9/0972aad9-c7a1-42e2-8d2f-aecbb5fd33b5.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "8": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/6/6615d7f1-1ed6-43af-a916-6caa4bd35ca3.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "5": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/8/e/8ed90da8-2642-4253-9cd6-f26465ce5ad2.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "15": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/0/60909727-0e87-4f58-a0e6-424eb81fff4f.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "12": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/9/e95756ee-e76b-44e9-a13f-6125ee097ce7.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "3": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/d/1/d1f0d34b-ab98-4bb4-8795-58688bcf02b5.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "2": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/a/3ab2938e-a68f-4eb4-ae05-42f051677f15.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "10": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/7/9/79298a0f-50ca-4bf5-b863-a60f07846970.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    },
                    "11": {
                      "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/2/8/28671684-b338-4d6c-8481-72ee8e59a320.jpg",
                      "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                      "NumWidth": 1,
                      "NumHeight": 1,
                      "BackIsHidden": true,
                      "UniqueBack": false,
                      "Type": 0
                    }
                  },
                  "LuaScript": "",
                  "LuaScriptState": "",
                  "XmlUI": "",
                  "ContainedObjects": [
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Hyena Umbra\nEnchantment  Aura 1CMC",
                      "Description": "Enchant creature\nEnchanted creature gets +1/+1 and has first strike.\nTotem armor (If enchanted creature would be destroyed, instead remove all damage from it and destroy this Aura.)",
                      "GMNotes": "",
                      "Memo": "354affb3-1be7-4a9e-91da-2989eb54f62d",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 100,
                      "CustomDeck": {
                        "1": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/2/c2ece04a-e6b3-4496-b5e2-1fe8875f1982.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Faithbearer Paladin\nCreature  Human Knight 5CMC",
                      "Description": "Lifelink (Damage dealt by this creature also causes you to gain that much life.)\n[b]3/4[/b]",
                      "GMNotes": "",
                      "Memo": "725dc451-cae4-4345-9741-6c58e5a1a1dc",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 200,
                      "CustomDeck": {
                        "2": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/a/3ab2938e-a68f-4eb4-ae05-42f051677f15.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Mistform Shrieker\nCreature  Illusion 5CMC",
                      "Description": "Flying\n{1}: Mistform Shrieker becomes the creature type of your choice until end of turn.\nMorph {3}{U}{U} (You may cast this card face down as a 2/2 creature for {3}. Turn it face up any time for its morph cost.)\n[b]3/3[/b]",
                      "GMNotes": "",
                      "Memo": "50fe31e9-473e-4d2f-b1b5-3eef3c7bb0e6",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 300,
                      "CustomDeck": {
                        "3": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/d/1/d1f0d34b-ab98-4bb4-8795-58688bcf02b5.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Ior Ruin Expedition\nEnchantment 2CMC",
                      "Description": "Landfall  Whenever a land enters the battlefield under your control, you may put a quest counter on Ior Ruin Expedition.\nRemove three quest counters from Ior Ruin Expedition and sacrifice it: Draw two cards.",
                      "GMNotes": "",
                      "Memo": "fc338ba2-c3a4-45d6-895f-af7f72bf7a94",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 400,
                      "CustomDeck": {
                        "4": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/c/7/c7a6e64e-4a9d-4fab-b85c-e9c4e88bca2f.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Seal of Doom\nEnchantment 3CMC",
                      "Description": "Sacrifice Seal of Doom: Destroy target nonblack creature. It can't be regenerated.",
                      "GMNotes": "",
                      "Memo": "71d54ba3-91fe-4a14-8b99-c284b4c75013",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 500,
                      "CustomDeck": {
                        "5": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/8/e/8ed90da8-2642-4253-9cd6-f26465ce5ad2.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Plaguecrafter\nCreature  Human Shaman 3CMC",
                      "Description": "When Plaguecrafter enters the battlefield, each player sacrifices a creature or planeswalker. Each player who can't discards a card.\n[b]3/2[/b]",
                      "GMNotes": "",
                      "Memo": "2e3ee458-fa3f-4452-ab95-5a7fb5a0483b",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 600,
                      "CustomDeck": {
                        "6": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/0/9/0972aad9-c7a1-42e2-8d2f-aecbb5fd33b5.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Blood Ogre\nCreature  Ogre Warrior 3CMC",
                      "Description": "Bloodthirst 1 (If an opponent was dealt damage this turn, this creature enters the battlefield with a +1/+1 counter on it.)\nFirst strike (This creature deals combat damage before creatures without first strike.)\n[b]2/2[/b]",
                      "GMNotes": "",
                      "Memo": "8bbe3f0d-41d0-4c58-ad65-6675a234cad3",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 700,
                      "CustomDeck": {
                        "7": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/b/c/bc1db7d4-7955-43c7-95c4-69d64493693d.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Curse of Opulence\nEnchantment  Aura Curse 1CMC",
                      "Description": "Enchant player\nWhenever enchanted player is attacked, create a Gold token. Each opponent attacking that player does the same. (A Gold token is an artifact with \"Sacrifice this artifact: Add one mana of any color.\")",
                      "GMNotes": "",
                      "Memo": "ba0d3df2-3acf-46d7-8d64-8d67d1579adc",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 800,
                      "CustomDeck": {
                        "8": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/6/6615d7f1-1ed6-43af-a916-6caa4bd35ca3.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Natural Connection\nInstant 3CMC",
                      "Description": "Search your library for a basic land card, put it onto the battlefield tapped, then shuffle.",
                      "GMNotes": "",
                      "Memo": "dc85c659-f2ed-4b13-807c-d853f74de410",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 900,
                      "CustomDeck": {
                        "9": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/3/d/3d26ba20-baa7-4258-9424-89660d11d41d.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Zendikar's Roil\nEnchantment 5CMC",
                      "Description": "Landfall  Whenever a land enters the battlefield under your control, create a 2/2 green Elemental creature token.",
                      "GMNotes": "",
                      "Memo": "a842cc2b-52eb-4dc5-86c6-6575c2ed913d",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1000,
                      "CustomDeck": {
                        "10": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/7/9/79298a0f-50ca-4bf5-b863-a60f07846970.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Hammer Dropper\nCreature  Giant Soldier 4CMC",
                      "Description": "Mentor (Whenever this creature attacks, put a +1/+1 counter on target attacking creature with lesser power.)\n[b]5/2[/b]",
                      "GMNotes": "",
                      "Memo": "088c9fa7-65ec-48c6-90cc-9087bc9df43e",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1100,
                      "CustomDeck": {
                        "11": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/2/8/28671684-b338-4d6c-8481-72ee8e59a320.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Rhonas's Monument\nLegendary Artifact 3CMC",
                      "Description": "Green creature spells you cast cost {1} less to cast.\nWhenever you cast a creature spell, target creature you control gets +2/+2 and gains trample until end of turn.",
                      "GMNotes": "",
                      "Memo": "b9a7c722-6b24-4383-ac6e-2a30f7834269",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1200,
                      "CustomDeck": {
                        "12": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/9/e95756ee-e76b-44e9-a13f-6125ee097ce7.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Birds of Paradise\nCreature  Bird 1CMC",
                      "Description": "Flying\n{T}: Add one mana of any color.\n[b]0/1[/b]",
                      "GMNotes": "",
                      "Memo": "d3a0b660-358c-41bd-9cd2-41fbf3491b1a",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1300,
                      "CustomDeck": {
                        "13": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/e/6/e6bc963e-042f-4cdc-be38-de8e386c00b3.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Bloom Tender\nCreature  Elf Druid 2CMC",
                      "Description": "{T}: For each color among permanents you control, add one mana of that color.\n[b]1/1[/b]",
                      "GMNotes": "",
                      "Memo": "0c23fefe-9891-4dd8-9bb1-eebdb3274e31",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1400,
                      "CustomDeck": {
                        "14": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/c/6c89c1fd-4717-4249-a74f-d9d4935c5753.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    },
                    {
                      "GUID": "",
                      "Name": "Card",
                      "Transform": {
                        "posX": 0.0,
                        "posY": 0.0,
                        "posZ": 0.0,
                        "rotX": 0.0,
                        "rotY": 0.0,
                        "rotZ": 0.0,
                        "scaleX": 1.0,
                        "scaleY": 1.0,
                        "scaleZ": 1.0
                      },
                      "Nickname": "Krosan Adaptation\nEnchantment  Aura 1CMC",
                      "Description": "Enchant creature\nStorm (When you cast this spell, copy it for each spell cast before it this turn. You may choose new targets for the copies. The copies enter the battlefield as tokens.)\nEnchanted creature gets +1/+0 and has vigilance.",
                      "GMNotes": "",
                      "Memo": "6121d856-2dc9-4a43-b2b3-16af889eaa1f",
                      "AltLookAngle": {
                        "x": 0.0,
                        "y": 0.0,
                        "z": 0.0
                      },
                      "LayoutGroupSortIndex": 0,
                      "Value": 0,
                      "Locked": false,
                      "Grid": true,
                      "Snap": true,
                      "IgnoreFoW": false,
                      "MeasureMovement": false,
                      "DragSelectable": true,
                      "Autoraise": true,
                      "Sticky": true,
                      "Tooltip": true,
                      "GridProjection": false,
                      "CardID": 1500,
                      "CustomDeck": {
                        "15": {
                          "FaceURL": "https://c1.scryfall.com/file/scryfall-cards/large/front/6/0/60909727-0e87-4f58-a0e6-424eb81fff4f.jpg",
                          "BackURL": "https://steamusercontent-a.akamaihd.net/ugc/1647720103762682461/35EF6E87970E2A5D6581E7D96A99F8A575B7A15F/",
                          "NumWidth": 1,
                          "NumHeight": 1,
                          "BackIsHidden": true,
                          "UniqueBack": false,
                          "Type": 0
                        }
                      },
                      "LuaScript": "",
                      "LuaScriptState": "",
                      "XmlUI": ""
                    }
                  ]
                }
              ]
            }
          ],
          "ChildObjects": [
            {
              "GUID": "c5ba3d",
              "Name": "Custom_Token",
              "Transform": {
                "posX": 0.009415796,
                "posY": 11.2064829,
                "posZ": -15.0850725,
                "rotX": 359.993225,
                "rotY": 0.0027701715,
                "rotZ": 0.000118303746,
                "scaleX": 6.53746653,
                "scaleY": 7.01005173,
                "scaleZ": 3.32304454
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "AltLookAngle": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              },
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Value": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "https://steamusercontent-a.akamaihd.net/ugc/10749807467837113954/1C4182B66F9B199F1F756D7EC2364993ED87C859/",
                "ImageSecondaryURL": "",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomToken": {
                  "Thickness": 0.2,
                  "MergeDistancePixels": 15.0,
                  "StandUp": true,
                  "Stackable": false
                }
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            }
          ]
        }
      ]
    }
  ]
}